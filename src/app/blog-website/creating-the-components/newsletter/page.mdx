import BackToTop from "@/components/BackToTop";

# Newsletter Component

## Table of Contents

## About Newsletters

Newsletters are a great way to keep your audience engaged and informed about your latest content. They can be used to share updates, promotions, and other relevant information directly with your subscribers.

### Email Collection for Email List

Your newsletter should include a form to collect email addresses from your visitors. This allows you to build an email list that you can use to send out newsletters. This is called email marketing, and it is a powerful tool for reaching your audience directly.

### About Email Marketing

Email marketing is the process of sending emails to a list of subscribers with the goal of promoting your content, products, or services. It is an effective way to communicate with your audience and keep them engaged with your brand.

Some key benefits of email marketing include:

- Direct communication with your audience
- Higher engagement rates compared to other marketing channels
- Ability to segment your audience for targeted campaigns
- Cost-effective compared to traditional advertising methods

Downsides of email marketing include:

- Potential for spam filters to block your emails
- Requires ongoing maintenance of your email list
- Can be time-consuming to create and send newsletters

Useful resources for email marketing:

- [Mailchimp](https://mailchimp.com/)
- [ConvertKit](https://convertkit.com/)
- [Sendinblue](https://www.sendinblue.com/)
- [MailerLite](https://www.mailerlite.com/)
- [Constant Contact](https://www.constantcontact.com/)
- [ActiveCampaign](https://www.activecampaign.com/)
- [AWeber](https://www.aweber.com/)
- [GetResponse](https://www.getresponse.com/)
- [Campaign Monitor](https://www.campaignmonitor.com/)
- [HubSpot Email Marketing](https://www.hubspot.com/products/marketing/email)
- [Benchmark Email](https://www.benchmarkemail.com/)
- [Zoho Campaigns](https://www.zoho.com/campaigns/)
- [EmailOctopus](https://emailoctopus.com/)

## The Newsletter Component

There are a few different places where you can create a newsletter component in your blog website:

- **Home Page**: A newsletter signup form can be placed prominently on the home page to encourage visitors to subscribe.
- **Header**: Including a newsletter signup form in the header can make it visible on every page of your website, ensuring that visitors can easily find it.
- **Sidebar**: If your blog has a sidebar, you can include a newsletter signup form there. This is a common location for newsletter signups and can be effective in capturing email addresses from visitors who are reading your content.
- **Footer**: Including a newsletter signup form in the footer ensures that it is accessible from every page of your website.
- **Dedicated Newsletter Page**: You can create a separate page for the newsletter where you can provide more information about what subscribers can expect to receive, along with the signup form.
- **Blog Posts**: Including a newsletter signup form at the end of each blog post can encourage readers to subscribe after they have engaged with your content.
- **Pop-up or Slide-in Form**: A pop-up or slide-in form can be used to capture email addresses without disrupting the user experience. This can be triggered after a certain time on the page or when the user scrolls to a specific point.
- **Call-to-Action Buttons**: Including call-to-action buttons throughout your website can encourage visitors to subscribe to your newsletter. These buttons can be placed in strategic locations such as the header, footer, or within blog posts.

Let's go over the different styles of newsletter components for each of these locations.

### The Home Page Newsletter Component

When creating a newsletter component for the home page, consider the following:

- **Visibility**: Make sure the newsletter signup form is prominently displayed so that visitors can easily see it.
- **Simplicity**: Keep the form simple, asking for only essential information such as the email address and possibly the name.
- **Call-to-Action**: Use a clear call-to-action (CTA) that encourages visitors to subscribe, such as "Subscribe Now" or "Join Our Newsletter".

#### Examples

##### Example 1: Hero Section with Split Design and Social Proof

```tsx
import { useState } from "react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Badge } from "@/components/ui/badge";
import { Card, CardContent } from "@/components/ui/card";
import {
  Mail,
  Users,
  TrendingUp,
  CheckCircle,
  Star,
  ArrowRight,
  Sparkles,
  Globe,
  Timer,
} from "lucide-react";
import { motion } from "framer-motion";

// Hero section component with split layout design and social proof elements
export default function HeroNewsletterSplit() {
  const [email, setEmail] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [isSubscribed, setIsSubscribed] = useState(false);

  // Handles form submission and simulates API call for newsletter subscription
  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);

    try {
      // Simulate API call
      await new Promise((resolve) => setTimeout(resolve, 2000));
      setIsSubscribed(true);
    } catch (error) {
      console.error("Subscription failed:", error);
    } finally {
      setIsLoading(false);
    }
  };

  const stats = [
    { icon: Users, value: "25,000+", label: "Active Subscribers" },
    { icon: TrendingUp, value: "98%", label: "Open Rate" },
    { icon: Globe, value: "50+", label: "Countries Reached" },
  ];

  const benefits = [
    "üìö Weekly curated content",
    "üöÄ Exclusive tutorials",
    "üí° Industry insights",
    "üéÅ Free resources",
  ];

  return (
    <section className="relative min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 overflow-hidden">
      {/* Background Effects */}
      <div className="absolute inset-0 bg-[url('/grid.svg')] bg-center [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))]"></div>

      {/* Floating Elements */}
      <div className="absolute top-20 left-10 w-32 h-32 bg-purple-500/20 rounded-full blur-3xl animate-pulse"></div>
      <div className="absolute bottom-40 right-20 w-24 h-24 bg-blue-500/20 rounded-full blur-3xl animate-pulse delay-1000"></div>

      <div className="relative container mx-auto px-4 py-20">
        <div className="grid lg:grid-cols-2 gap-12 items-center min-h-[80vh]">
          {/* Left Column - Content */}
          <motion.div
            initial={{ opacity: 0, x: -50 }}
            animate={{ opacity: 1, x: 0 }}
            transition={{ duration: 0.6 }}
            className="space-y-8"
          >
            {/* Header */}
            <div className="space-y-4">
              <motion.div
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: 0.2 }}
                className="flex items-center gap-2"
              >
                <Badge className="bg-purple-500/20 text-purple-200 border-purple-500/30">
                  <Sparkles className="h-3 w-3 mr-1" />
                  Free Newsletter
                </Badge>
                <Badge className="bg-green-500/20 text-green-200 border-green-500/30">
                  <Timer className="h-3 w-3 mr-1" />
                  Weekly
                </Badge>
              </motion.div>

              <h1 className="text-4xl lg:text-6xl font-bold text-white leading-tight">
                Stay Ahead of the{" "}
                <span className="bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                  Tech Curve
                </span>
              </h1>

              <p className="text-xl text-gray-300 leading-relaxed">
                Join thousands of developers, designers, and tech enthusiasts
                who get the latest insights, tutorials, and industry news
                delivered straight to their inbox every week.
              </p>
            </div>

            {/* Stats */}
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 0.4 }}
              className="grid grid-cols-3 gap-4"
            >
              {stats.map((stat, index) => (
                <div key={index} className="text-center space-y-2">
                  <div className="w-12 h-12 bg-white/10 rounded-lg flex items-center justify-center mx-auto">
                    <stat.icon className="h-6 w-6 text-purple-300" />
                  </div>
                  <div className="text-2xl font-bold text-white">
                    {stat.value}
                  </div>
                  <div className="text-sm text-gray-400">{stat.label}</div>
                </div>
              ))}
            </motion.div>

            {/* Benefits */}
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 0.6 }}
              className="space-y-3"
            >
              <h3 className="text-lg font-semibold text-white">
                What you'll get:
              </h3>
              <div className="grid grid-cols-2 gap-2">
                {benefits.map((benefit, index) => (
                  <div
                    key={index}
                    className="flex items-center gap-2 text-gray-300"
                  >
                    <CheckCircle className="h-4 w-4 text-green-400 flex-shrink-0" />
                    <span className="text-sm">{benefit}</span>
                  </div>
                ))}
              </div>
            </motion.div>

            {/* Testimonial */}
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 0.8 }}
              className="p-4 bg-white/5 rounded-lg border border-white/10"
            >
              <div className="flex items-center gap-1 mb-2">
                {[...Array(5)].map((_, i) => (
                  <Star
                    key={i}
                    className="h-4 w-4 text-yellow-400 fill-current"
                  />
                ))}
              </div>
              <p className="text-sm text-gray-300 italic">
                "The best tech newsletter I've ever subscribed to. The content
                is always relevant and actionable."
              </p>
              <p className="text-xs text-gray-400 mt-2">
                ‚Äî Sarah Chen, Senior Developer
              </p>
            </motion.div>
          </motion.div>

          {/* Right Column - Newsletter Signup */}
          <motion.div
            initial={{ opacity: 0, x: 50 }}
            animate={{ opacity: 1, x: 0 }}
            transition={{ duration: 0.6, delay: 0.3 }}
            className="lg:pl-8"
          >
            <Card className="bg-white/10 backdrop-blur-lg border-white/20 shadow-2xl">
              <CardContent className="p-8">
                {!isSubscribed ? (
                  <div className="space-y-6">
                    <div className="text-center space-y-2">
                      <div className="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto">
                        <Mail className="h-8 w-8 text-white" />
                      </div>
                      <h2 className="text-2xl font-bold text-white">
                        Join 25,000+ Readers
                      </h2>
                      <p className="text-gray-300">
                        Get weekly insights that matter
                      </p>
                    </div>

                    <form onSubmit={handleSubmit} className="space-y-4">
                      <div className="space-y-2">
                        <label className="text-sm font-medium text-gray-300">
                          Email Address
                        </label>
                        <Input
                          type="email"
                          placeholder="your@email.com"
                          value={email}
                          onChange={(e) => setEmail(e.target.value)}
                          required
                          className="bg-white/10 border-white/20 text-white placeholder:text-gray-400 focus:bg-white/20 transition-colors"
                        />
                      </div>

                      <Button
                        type="submit"
                        disabled={isLoading || !email}
                        className="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3 rounded-lg transition-all duration-200 transform hover:scale-105"
                      >
                        {isLoading ? (
                          <div className="flex items-center gap-2">
                            <div className="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                            Subscribing...
                          </div>
                        ) : (
                          <div className="flex items-center gap-2">
                            <Mail className="h-4 w-4" />
                            Get Weekly Insights
                            <ArrowRight className="h-4 w-4" />
                          </div>
                        )}
                      </Button>
                    </form>

                    <div className="text-center space-y-2">
                      <p className="text-xs text-gray-400">
                        Join readers from top companies:
                      </p>
                      <div className="flex items-center justify-center gap-4 opacity-60">
                        <div className="text-xs font-medium text-gray-400">
                          Google
                        </div>
                        <div className="text-xs font-medium text-gray-400">
                          Microsoft
                        </div>
                        <div className="text-xs font-medium text-gray-400">
                          Meta
                        </div>
                        <div className="text-xs font-medium text-gray-400">
                          Netflix
                        </div>
                      </div>
                    </div>

                    <div className="text-center">
                      <p className="text-xs text-gray-400">
                        ‚úì No spam, ever ‚úì Unsubscribe anytime ‚úì 100% free
                      </p>
                    </div>
                  </div>
                ) : (
                  <motion.div
                    initial={{ scale: 0.8, opacity: 0 }}
                    animate={{ scale: 1, opacity: 1 }}
                    className="text-center space-y-4"
                  >
                    <div className="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto">
                      <CheckCircle className="h-8 w-8 text-white" />
                    </div>
                    <h3 className="text-xl font-bold text-white">
                      Welcome to the Community! üéâ
                    </h3>
                    <p className="text-gray-300">
                      Check your email for a confirmation link and your first
                      newsletter.
                    </p>
                    <Badge className="bg-green-500/20 text-green-200 border-green-500/30">
                      Subscription Confirmed
                    </Badge>
                  </motion.div>
                )}
              </CardContent>
            </Card>
          </motion.div>
        </div>
      </div>
    </section>
  );
}
```

##### How It Works

This hero section newsletter component creates a compelling first impression with several key features:

1. **Split Layout Design**: Divides content and signup form into distinct sections for better visual hierarchy
2. **Gradient Background**: Creates depth with layered gradients and subtle animations
3. **Social Proof Elements**: Displays subscriber count, open rates, and company logos to build trust
4. **Progressive Disclosure**: Shows benefits and testimonials to educate before asking for email
5. **Glass Morphism Effect**: Uses backdrop blur and transparency for modern aesthetic
6. **Motion Animations**: Staged animations create smooth entrance effects
7. **Trust Indicators**: Multiple trust signals including testimonials, stats, and guarantees

##### Customization Options

##### Dynamic Stats Counter

```tsx
// Creates animated counter that smoothly increments from 0 to target value
const useCountUp = (end, duration = 2000) => {
  const [count, setCount] = useState(0);

  useEffect(() => {
    let startTime;
    const animate = (currentTime) => {
      if (!startTime) startTime = currentTime;
      const progress = Math.min((currentTime - startTime) / duration, 1);
      setCount(Math.floor(progress * end));

      if (progress < 1) {
        requestAnimationFrame(animate);
      }
    };

    requestAnimationFrame(animate);
  }, [end, duration]);

  return count;
};

// Usage
const subscriberCount = useCountUp(25000);
```

##### A/B Testing Headlines

```tsx
const headlines = [
  "Stay Ahead of the Tech Curve",
  "Master the Latest in Tech",
  "Your Weekly Dose of Innovation",
  "Join the Tech Revolution",
];

const [currentHeadline] = useState(
  () => headlines[Math.floor(Math.random() * headlines.length)]
);
```

##### Dynamic Background Animations

```tsx
// Animated particle system
// Generates floating particle system for dynamic background effects
const useParticleSystem = (count = 50) => {
  const [particles, setParticles] = useState([]);

  // @collapse
  useEffect(() => {
    setParticles(
      Array.from({ length: count }, (_, i) => ({
        id: i,
        x: Math.random() * 100,
        y: Math.random() * 100,
        size: Math.random() * 3 + 1,
        speed: Math.random() * 2 + 0.5,
        color: `hsl(${240 + Math.random() * 60}, 70%, ${60 + Math.random() * 20}%)`,
      }))
    );
  }, [count]);

  return particles;
};

// Floating geometric shapes
// Renders animated geometric shapes that move in continuous patterns
const FloatingShapes = () => {
  const shapes = [
    { type: "circle", size: 120, color: "bg-purple-400/10" },
    { type: "square", size: 80, color: "bg-blue-400/10" },
    { type: "triangle", size: 100, color: "bg-pink-400/10" },
  ];

  return (
    <>
      {shapes.map((shape, index) => (
        <motion.div
          key={index}
          className={`absolute ${shape.color} blur-xl`}
          style={{
            width: shape.size,
            height: shape.size,
            left: `${20 + index * 30}%`,
            top: `${30 + index * 20}%`,
          }}
          animate={{
            x: [0, 50, 0],
            y: [0, -30, 0],
            rotate: [0, 180, 360],
          }}
          transition={{
            duration: 15 + index * 5,
            repeat: Infinity,
            ease: "easeInOut",
          }}
        />
      ))}
    </>
  );
};
```

##### Interactive Theme Switcher

```tsx
const themes = {
  purple: {
    gradient: "from-purple-900 via-blue-900 to-indigo-900",
    accent: "from-purple-500 to-pink-500",
    text: "from-purple-400 to-pink-400",
  },
  green: {
    gradient: "from-emerald-900 via-teal-900 to-cyan-900",
    accent: "from-emerald-500 to-teal-500",
    text: "from-emerald-400 to-teal-400",
  },
  orange: {
    gradient: "from-orange-900 via-red-900 to-pink-900",
    accent: "from-orange-500 to-red-500",
    text: "from-orange-400 to-red-400",
  },
};

const [currentTheme, setCurrentTheme] = useState("purple");

// Theme toggle button
<Button
  onClick={() => {
    const themeKeys = Object.keys(themes);
    const currentIndex = themeKeys.indexOf(currentTheme);
    const nextTheme = themeKeys[(currentIndex + 1) % themeKeys.length];
    setCurrentTheme(nextTheme);
  }}
  className="fixed top-4 right-4 z-10"
>
  Switch Theme
</Button>;
```

##### Personalization Based on User Behavior

```tsx
// Track user interactions
const useUserBehavior = () => {
  const [behavior, setBehavior] = useState({
    timeOnPage: 0,
    scrollDepth: 0,
    interactions: 0,
    preferredContent: null,
  });

  useEffect(() => {
    const startTime = Date.now();

    // @collapse
    const trackScroll = () => {
      const scrolled =
        (window.scrollY / (document.body.scrollHeight - window.innerHeight)) *
        100;
      setBehavior((prev) => ({
        ...prev,
        scrollDepth: Math.max(prev.scrollDepth, scrolled),
      }));
    };

    const trackTime = setInterval(() => {
      setBehavior((prev) => ({ ...prev, timeOnPage: Date.now() - startTime }));
    }, 1000);

    window.addEventListener("scroll", trackScroll);

    return () => {
      window.removeEventListener("scroll", trackScroll);
      clearInterval(trackTime);
    };
  }, []);

  return behavior;
};

// Personalized messaging
// Returns personalized call-to-action message based on user behavior patterns
const getPersonalizedMessage = (behavior) => {
  if (behavior.timeOnPage > 30000)
    return "You seem really interested! Join our community.";
  if (behavior.scrollDepth > 50)
    return "Enjoying the content? Get more delivered weekly.";
  if (behavior.interactions > 3)
    return "Ready to take the next step? Subscribe below.";
  return "Join thousands of tech enthusiasts";
};
```

##### Advanced Form Validation

```tsx
// Provides comprehensive form validation with real-time feedback and suggestions
const useAdvancedValidation = () => {
  const [validation, setValidation] = useState({
    isValid: false,
    errors: {},
    suggestions: [],
  });

  // Validates email format and provides domain suggestions for common typos
  const validateEmail = (email) => {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    const commonDomains = [
      "gmail.com",
      "yahoo.com",
      "outlook.com",
      "hotmail.com",
    ];

    if (!email) {
      return { isValid: false, error: "Email is required" };
    }

    if (!emailRegex.test(email)) {
      return { isValid: false, error: "Please enter a valid email address" };
    }

    const domain = email.split("@")[1];
    const suggestions = commonDomains
      .filter((d) => d.includes(domain.slice(0, 3)))
      .slice(0, 3);

    return {
      isValid: true,
      error: null,
      suggestions: suggestions.length > 0 ? suggestions : [],
    };
  };

  return { validation, validateEmail };
};

// Usage in component
const { validation, validateEmail } = useAdvancedValidation();

const handleEmailChange = (e) => {
  const email = e.target.value;
  setEmail(email);
  const result = validateEmail(email);
  setValidation(result);
};
```

##### Multi-language Support

```tsx
const translations = {
  en: {
    title: "Stay Ahead of the Tech Curve",
    subtitle: "Join thousands of developers, designers, and tech enthusiasts",
    emailPlaceholder: "your@email.com",
    subscribeButton: "Get Weekly Insights",
    benefits: [
      "üìö Weekly curated content",
      "üöÄ Exclusive tutorials",
      "üí° Industry insights",
      "üéÅ Free resources",
    ],
  },
  es: {
    title: "Mantente a la Vanguardia Tecnol√≥gica",
    subtitle:
      "√önete a miles de desarrolladores, dise√±adores y entusiastas de la tecnolog√≠a",
    emailPlaceholder: "tu@email.com",
    subscribeButton: "Recibir Insights Semanales",
    benefits: [
      "üìö Contenido curado semanal",
      "üöÄ Tutoriales exclusivos",
      "üí° Insights de la industria",
      "üéÅ Recursos gratuitos",
    ],
  },
  fr: {
    title: "Restez en Avance sur la Courbe Tech",
    subtitle:
      "Rejoignez des milliers de d√©veloppeurs, designers et passionn√©s de technologie",
    emailPlaceholder: "votre@email.com",
    subscribeButton: "Recevoir les Insights Hebdomadaires",
    benefits: [
      "üìö Contenu cur√© hebdomadaire",
      "üöÄ Tutoriels exclusifs",
      "üí° Insights de l'industrie",
      "üéÅ Ressources gratuites",
    ],
  },
};

const [language, setLanguage] = useState("en");
const t = translations[language];

// Language selector
<select
  value={language}
  onChange={(e) => setLanguage(e.target.value)}
  className="absolute top-4 right-4 bg-white/20 text-white rounded"
>
  <option value="en">üá∫üá∏ EN</option>
  <option value="es">üá™üá∏ ES</option>
  <option value="fr">üá´üá∑ FR</option>
</select>;
```

<BackToTop />

##### Example 2: Minimalist Center-Focused with Floating Elements

```tsx
import { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Badge } from "@/components/ui/badge";
import {
  Mail,
  ArrowRight,
  CheckCircle,
  Sparkles,
  Users,
  Clock,
} from "lucide-react";
import { motion, useAnimation } from "framer-motion";

// Minimalist newsletter component with floating parallax elements and mouse tracking
export default function MinimalistFloatingNewsletter() {
  const [email, setEmail] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [isSubscribed, setIsSubscribed] = useState(false);
  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });

  const controls = useAnimation();

  // Tracks mouse position for parallax effect on floating elements
  useEffect(() => {
    // Updates mouse position coordinates for parallax calculations
    const handleMouseMove = (e) => {
      setMousePosition({
        x: (e.clientX / window.innerWidth) * 2 - 1,
        y: (e.clientY / window.innerHeight) * 2 - 1,
      });
    };

    window.addEventListener("mousemove", handleMouseMove);
    return () => window.removeEventListener("mousemove", handleMouseMove);
  }, []);

  // Handles form submission with celebration animation on success
  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);

    try {
      await new Promise((resolve) => setTimeout(resolve, 1500));
      setIsSubscribed(true);

      // Trigger celebration animation
      controls.start({
        scale: [1, 1.2, 1],
        rotate: [0, 360],
        transition: { duration: 0.8 },
      });
    } catch (error) {
      console.error("Subscription failed:", error);
    } finally {
      setIsLoading(false);
    }
  };

  const floatingElements = [
    { icon: Mail, delay: 0, color: "text-blue-400" },
    { icon: Users, delay: 1, color: "text-purple-400" },
    { icon: Sparkles, delay: 2, color: "text-pink-400" },
    { icon: Clock, delay: 3, color: "text-green-400" },
  ];

  return (
    <section className="relative min-h-screen bg-white overflow-hidden flex items-center justify-center">
      {/* Floating Background Elements */}
      {floatingElements.map((element, index) => (
        <motion.div
          key={index}
          className={`absolute ${element.color} opacity-10`}
          style={{
            left: `${20 + index * 20}%`,
            top: `${30 + index * 15}%`,
          }}
          animate={{
            x: mousePosition.x * (10 + index * 5),
            y: mousePosition.y * (10 + index * 5),
            rotate: [0, 360],
          }}
          transition={{
            x: { type: "spring", stiffness: 100, damping: 30 },
            y: { type: "spring", stiffness: 100, damping: 30 },
            rotate: {
              duration: 20 + index * 5,
              repeat: Infinity,
              ease: "linear",
            },
          }}
        >
          <element.icon className="h-24 w-24" />
        </motion.div>
      ))}

      {/* Geometric Shapes */}
      <div className="absolute top-20 right-20 w-32 h-32 border-2 border-gray-100 rounded-full opacity-30"></div>
      <div className="absolute bottom-40 left-20 w-20 h-20 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg opacity-40 transform rotate-45"></div>

      {/* Main Content */}
      <div className="relative z-10 text-center max-w-2xl mx-auto px-4">
        {!isSubscribed ? (
          <motion.div
            initial={{ opacity: 0, y: 30 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.8 }}
            className="space-y-8"
          >
            {/* Header */}
            <div className="space-y-6">
              <motion.div
                initial={{ opacity: 0, scale: 0.8 }}
                animate={{ opacity: 1, scale: 1 }}
                transition={{ delay: 0.2, duration: 0.6 }}
                className="mx-auto w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg"
              >
                <Mail className="h-10 w-10 text-white" />
              </motion.div>

              <div className="space-y-4">
                <motion.h1
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                  transition={{ delay: 0.4, duration: 0.6 }}
                  className="text-4xl lg:text-5xl font-bold text-gray-900 leading-tight"
                >
                  Simple. Focused.{" "}
                  <span className="bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent">
                    Valuable.
                  </span>
                </motion.h1>

                <motion.p
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                  transition={{ delay: 0.6, duration: 0.6 }}
                  className="text-xl text-gray-600 leading-relaxed"
                >
                  One email, once a week. Everything you need to stay informed
                  and inspired in the world of technology.
                </motion.p>
              </div>
            </div>

            {/* Subscriber Count */}
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 0.8, duration: 0.6 }}
              className="flex items-center justify-center gap-2"
            >
              <div className="flex -space-x-2">
                {[...Array(5)].map((_, i) => (
                  <div
                    key={i}
                    className="w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full border-2 border-white"
                    style={{
                      background: `linear-gradient(45deg, hsl(${250 + i * 20}, 70%, 60%), hsl(${300 + i * 15}, 70%, 60%))`,
                    }}
                  />
                ))}
              </div>
              <span className="text-gray-600 font-medium">
                Join 12,500+ weekly readers
              </span>
            </motion.div>

            {/* Newsletter Form */}
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 1, duration: 0.6 }}
              className="max-w-md mx-auto"
            >
              <form onSubmit={handleSubmit} className="space-y-4">
                <div className="relative group">
                  <Input
                    type="email"
                    placeholder="your@email.com"
                    value={email}
                    onChange={(e) => setEmail(e.target.value)}
                    required
                    className="w-full px-6 py-4 text-lg border-2 border-gray-200 rounded-2xl focus:border-purple-500 transition-all duration-200 group-hover:border-gray-300"
                  />
                  <div className="absolute inset-0 bg-gradient-to-r from-purple-500/5 to-pink-500/5 rounded-2xl opacity-0 group-focus-within:opacity-100 transition-opacity duration-200 pointer-events-none"></div>
                </div>

                <Button
                  type="submit"
                  disabled={isLoading || !email}
                  className="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-4 text-lg rounded-2xl transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl"
                >
                  {isLoading ? (
                    <div className="flex items-center gap-3">
                      <div className="animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"></div>
                      Getting you subscribed...
                    </div>
                  ) : (
                    <div className="flex items-center gap-3">
                      Subscribe for Free
                      <ArrowRight className="h-5 w-5" />
                    </div>
                  )}
                </Button>
              </form>
            </motion.div>

            {/* Trust Indicators */}
            <motion.div
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              transition={{ delay: 1.2, duration: 0.6 }}
              className="flex flex-col sm:flex-row items-center justify-center gap-4 text-sm text-gray-500"
            >
              <div className="flex items-center gap-6">
                <span className="flex items-center gap-1">
                  <CheckCircle className="h-4 w-4 text-green-500" />
                  No spam, ever
                </span>
                <span className="flex items-center gap-1">
                  <CheckCircle className="h-4 w-4 text-green-500" />
                  Unsubscribe anytime
                </span>
                <span className="flex items-center gap-1">
                  <CheckCircle className="h-4 w-4 text-green-500" />
                  100% free
                </span>
              </div>
            </motion.div>
          </motion.div>
        ) : (
          <motion.div
            initial={{ scale: 0.8, opacity: 0 }}
            animate={controls}
            className="space-y-6"
          >
            <div className="mx-auto w-20 h-20 bg-green-500 rounded-2xl flex items-center justify-center shadow-lg">
              <CheckCircle className="h-10 w-10 text-white" />
            </div>

            <div className="space-y-4">
              <h2 className="text-3xl font-bold text-gray-900">
                You're all set! üéâ
              </h2>
              <p className="text-lg text-gray-600">
                Check your email for a confirmation link. Your first newsletter
                will arrive next week.
              </p>
            </div>

            <Badge className="bg-green-100 text-green-800 px-4 py-2 text-base">
              Welcome to the community!
            </Badge>
          </motion.div>
        )}
      </div>
    </section>
  );
}
```

##### How It Works

This minimalist newsletter component focuses on simplicity and elegance:

1. **Floating Parallax Elements**: Background icons move with mouse movement for subtle interactivity
2. **Progressive Animation**: Staggered entrance animations create smooth visual flow
3. **Clean Typography**: Large, readable fonts with gradient text effects for emphasis
4. **Geometric Accents**: Subtle shapes add visual interest without overwhelming
5. **Hover Interactions**: Form fields and buttons respond to user interaction
6. **Celebration Animation**: Success state includes playful rotation and scaling
7. **Social Proof**: Avatar stack and subscriber count build credibility

##### Customization Options

##### Interactive Background

```tsx
// Particle system
const generateParticles = (count) => {
  return Array.from({ length: count }, (_, i) => ({
    id: i,
    x: Math.random() * 100,
    y: Math.random() * 100,
    size: Math.random() * 4 + 1,
    speed: Math.random() * 2 + 1,
    color: `hsl(${Math.random() * 60 + 240}, 70%, 60%)`,
  }));
};

// Animated mesh gradient
const MeshBackground = () => (
  <div className="absolute inset-0 opacity-30">
    <svg width="100%" height="100%">
      <defs>
        <linearGradient id="mesh1" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stopColor="#8B5CF6" />
          <stop offset="100%" stopColor="#EC4899" />
        </linearGradient>
      </defs>
      <rect width="100%" height="100%" fill="url(#mesh1)" />
    </svg>
  </div>
);
```

##### Advanced Mouse Interaction

```tsx
// Enhanced parallax with depth layers
// Provides advanced mouse tracking for complex parallax effects with depth
const useMouseParallax = (intensity = 1) => {
  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });
  const [isMoving, setIsMoving] = useState(false);

  useEffect(() => {
    let timeout;

    const handleMouseMove = (e) => {
      setMousePosition({
        x: (e.clientX / window.innerWidth) * 2 - 1,
        y: (e.clientY / window.innerHeight) * 2 - 1,
      });

      setIsMoving(true);
      clearTimeout(timeout);
      timeout = setTimeout(() => setIsMoving(false), 100);
    };

    window.addEventListener("mousemove", handleMouseMove);
    return () => {
      window.removeEventListener("mousemove", handleMouseMove);
      clearTimeout(timeout);
    };
  }, []);

  return { mousePosition, isMoving, intensity };
};

// 3D tilt effect
// Creates 3D tilt effect based on mouse position relative to element
const use3DTilt = (tiltIntensity = 10) => {
  const [tilt, setTilt] = useState({ x: 0, y: 0 });

  const handleMouseMove = useCallback(
    (e, element) => {
      if (!element) return;

      const rect = element.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      const centerX = rect.width / 2;
      const centerY = rect.height / 2;

      const tiltX = ((y - centerY) / centerY) * tiltIntensity;
      const tiltY = ((centerX - x) / centerX) * tiltIntensity;

      setTilt({ x: tiltX, y: tiltY });
    },
    [tiltIntensity]
  );

  return { tilt, handleMouseMove };
};
```

##### Dynamic Content Animations

```tsx
// Staggered text reveal
// Reveals text character by character with customizable delay timing
const useTextReveal = (text, delay = 50) => {
  const [revealedChars, setRevealedChars] = useState(0);

  useEffect(() => {
    if (revealedChars < text.length) {
      const timer = setTimeout(() => {
        setRevealedChars((prev) => prev + 1);
      }, delay);
      return () => clearTimeout(timer);
    }
  }, [revealedChars, text.length, delay]);

  return text.slice(0, revealedChars);
};

// Morphing shapes
// Animates between different shapes with smooth transitions
const MorphingShape = ({ shapes, duration = 3000 }) => {
  const [currentShape, setCurrentShape] = useState(0);

  useEffect(() => {
    const interval = setInterval(() => {
      setCurrentShape((prev) => (prev + 1) % shapes.length);
    }, duration);

    return () => clearInterval(interval);
  }, [shapes.length, duration]);

  return (
    <motion.div
      key={currentShape}
      initial={{ scale: 0, rotate: -180 }}
      animate={{ scale: 1, rotate: 0 }}
      exit={{ scale: 0, rotate: 180 }}
      transition={{ duration: 0.8, ease: "easeInOut" }}
      className={`w-20 h-20 ${shapes[currentShape].className}`}
    />
  );
};
```

##### Responsive Typography System

```tsx
// Provides dynamic font sizing that adapts to different viewport widths
const useResponsiveFontSize = () => {
  const [fontSize, setFontSize] = useState({
    title: "text-4xl lg:text-5xl",
    subtitle: "text-xl",
    body: "text-base",
  });

  // Updates font sizes based on current viewport width breakpoints
  useEffect(() => {
    // Calculates and sets appropriate font sizes for different screen sizes
    const updateFontSize = () => {
      const width = window.innerWidth;

      if (width < 640) {
        setFontSize({
          title: "text-3xl",
          subtitle: "text-lg",
          body: "text-sm",
        });
      } else if (width < 1024) {
        setFontSize({
          title: "text-4xl",
          subtitle: "text-xl",
          body: "text-base",
        });
      } else {
        setFontSize({
          title: "text-5xl xl:text-6xl",
          subtitle: "text-xl xl:text-2xl",
          body: "text-lg",
        });
      }
    };

    updateFontSize();
    window.addEventListener("resize", updateFontSize);
    return () => window.removeEventListener("resize", updateFontSize);
  }, []);

  return fontSize;
};

// Fluid typography with CSS clamp
const fluidTypography = {
  title: "clamp(2rem, 5vw, 4rem)",
  subtitle: "clamp(1.125rem, 2.5vw, 1.5rem)",
  body: "clamp(1rem, 1.5vw, 1.125rem)",
};
```

##### Performance Optimization

```tsx
// Lazy loading for animations
// Triggers animations only when elements enter the viewport for performance
const useLazyAnimation = (threshold = 0.1) => {
  const [isInView, setIsInView] = useState(false);
  const ref = useRef();

  // @collapse
  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsInView(true);
          observer.unobserve(entry.target);
        }
      },
      { threshold }
    );

    if (ref.current) {
      observer.observe(ref.current);
    }

    return () => observer.disconnect();
  }, [threshold]);

  return { ref, isInView };
};

// Debounced animations
// Delays animation execution until after specified delay period
const useDebouncedAnimation = (value, delay = 300) => {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => clearTimeout(handler);
  }, [value, delay]);

  return debouncedValue;
};

// Reduced motion support
// Detects user's reduced motion preference for accessibility compliance
const useReducedMotion = () => {
  const [shouldReduceMotion, setShouldReduceMotion] = useState(false);

  useEffect(() => {
    const mediaQuery = window.matchMedia("(prefers-reduced-motion: reduce)");
    setShouldReduceMotion(mediaQuery.matches);

    const listener = (e) => setShouldReduceMotion(e.matches);
    mediaQuery.addEventListener("change", listener);

    return () => mediaQuery.removeEventListener("change", listener);
  }, []);

  return shouldReduceMotion;
};
```

##### Dark Mode Integration

```tsx
// Theme-aware animations
// Provides theme-aware color schemes that adapt to light/dark mode
const useThemeAwareColors = () => {
  const [isDark, setIsDark] = useState(false);

  // @collapse
  useEffect(() => {
    const checkTheme = () => {
      setIsDark(document.documentElement.classList.contains("dark"));
    };

    checkTheme();

    const observer = new MutationObserver(checkTheme);
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ["class"],
    });

    return () => observer.disconnect();
  }, []);

  return {
    isDark,
    colors: {
      background: isDark ? "bg-gray-900" : "bg-white",
      text: isDark ? "text-white" : "text-gray-900",
      accent: isDark
        ? "from-purple-400 to-pink-400"
        : "from-purple-600 to-pink-600",
      muted: isDark ? "text-gray-400" : "text-gray-600",
    },
  };
};
```

##### Accessibility Enhancements

```tsx
// Tracks focus state for improved accessibility in animated components
const useFocusManagement = () => {
  const [focusedElement, setFocusedElement] = useState(null);

  useEffect(() => {
    // Handles focus events to track currently focused element
    const handleFocus = (e) => setFocusedElement(e.target);
    // Clears focused element when focus is lost
    const handleBlur = () => setFocusedElement(null);

    document.addEventListener("focusin", handleFocus);
    document.addEventListener("focusout", handleBlur);

    return () => {
      document.removeEventListener("focusin", handleFocus);
      document.removeEventListener("focusout", handleBlur);
    };
  }, []);

  return focusedElement;
};

// Screen reader friendly animations
const accessibleMotion = {
  initial: { opacity: 0 },
  animate: { opacity: 1 },
  exit: { opacity: 0 },
  transition: { duration: 0.3 },
};

// Renders accessible skip navigation link for screen readers
const SkipToContent = () => (
  <a
    href="#main-content"
    className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded z-50"
  >
    Skip to main content
  </a>
);
```

<BackToTop />

##### Example 3: Interactive Card Grid with Preferences

```tsx
import { useState } from "react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Checkbox } from "@/components/ui/checkbox";
import {
  Mail,
  Code,
  Palette,
  TrendingUp,
  Rocket,
  Users,
  Star,
  CheckCircle,
  ArrowRight,
  Zap,
} from "lucide-react";
import { motion } from "framer-motion";

// Interactive newsletter component with multi-step preference selection
export default function InteractivePreferencesNewsletter() {
  const [email, setEmail] = useState("");
  const [selectedTopics, setSelectedTopics] = useState([]);
  const [frequency, setFrequency] = useState("weekly");
  const [isLoading, setIsLoading] = useState(false);
  const [isSubscribed, setIsSubscribed] = useState(false);
  const [step, setStep] = useState(1);

  // @collapse
  const topics = [
    {
      id: "tech",
      title: "Tech News",
      description: "Latest updates in the tech world",
      icon: Zap,
      color: "from-yellow-500 to-orange-500",
      subscribers: "20.5K",
    },
    {
      id: "development",
      title: "Web Development",
      description: "Latest frameworks, tools, and best practices",
      icon: Code,
      color: "from-blue-500 to-cyan-500",
      subscribers: "15.2K",
    },
    {
      id: "design",
      title: "UI/UX Design",
      description: "Design trends, tools, and user experience insights",
      icon: Palette,
      color: "from-purple-500 to-pink-500",
      subscribers: "12.8K",
    },
    {
      id: "business",
      title: "Tech Business",
      description: "Startup news, funding, and industry analysis",
      icon: TrendingUp,
      color: "from-green-500 to-emerald-500",
      subscribers: "9.4K",
    },
    {
      id: "ai",
      title: "AI & Machine Learning",
      description: "Latest AI developments and practical applications",
      icon: Rocket,
      color: "from-orange-500 to-red-500",
      subscribers: "18.6K",
    },
  ];

  // @collapse
  const frequencies = [
    {
      id: "daily",
      label: "Daily Digest",
      description: "Quick updates every day",
    },
    {
      id: "weekly",
      label: "Weekly Roundup",
      description: "Comprehensive weekly summary",
    },
    {
      id: "monthly",
      label: "Monthly Deep Dive",
      description: "In-depth monthly analysis",
    },
  ];

  // Toggles topic selection state when user clicks on topic cards
  const toggleTopic = (topicId) => {
    setSelectedTopics((prev) =>
      prev.includes(topicId)
        ? prev.filter((id) => id !== topicId)
        : [...prev, topicId]
    );
  };

  // Handles final form submission and newsletter subscription process
  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);

    try {
      await new Promise((resolve) => setTimeout(resolve, 2000));
      setIsSubscribed(true);
    } catch (error) {
      console.error("Subscription failed:", error);
    } finally {
      setIsLoading(false);
    }
  };

  // Advances to next step in the multi-step form flow
  const handleNext = () => {
    if (step === 1 && selectedTopics.length > 0) {
      setStep(2);
    } else if (step === 2) {
      setStep(3);
    }
  };

  const containerVariants = {
    hidden: { opacity: 0 },
    visible: {
      opacity: 1,
      transition: {
        staggerChildren: 0.1,
      },
    },
  };

  const itemVariants = {
    hidden: { opacity: 0, y: 20 },
    visible: { opacity: 1, y: 0 },
  };

  return (
    <section className="py-20 bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen">
      <div className="container mx-auto px-4">
        {!isSubscribed ? (
          <div className="max-w-4xl mx-auto">
            {/* Header */}
            <motion.div
              initial={{ opacity: 0, y: 30 }}
              animate={{ opacity: 1, y: 0 }}
              className="text-center mb-12"
            >
              <h1 className="text-4xl lg:text-5xl font-bold text-gray-900 mb-4">
                Personalize Your{" "}
                <span className="bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
                  Learning Journey
                </span>
              </h1>
              <p className="text-xl text-gray-600 max-w-2xl mx-auto">
                Tell us what interests you, and we'll curate the perfect
                newsletter experience just for you.
              </p>

              {/* Progress Indicator */}
              <div className="flex items-center justify-center gap-2 mt-8">
                {[1, 2, 3].map((stepNumber) => (
                  <div
                    key={stepNumber}
                    className={`w-3 h-3 rounded-full transition-colors duration-200 ${
                      stepNumber <= step ? "bg-blue-600" : "bg-gray-300"
                    }`}
                  />
                ))}
              </div>
            </motion.div>

            {/* Step 1: Topic Selection */}
            {step === 1 && (
              <motion.div
                variants={containerVariants}
                initial="hidden"
                animate="visible"
                className="space-y-8"
              >
                <div className="text-center">
                  <h2 className="text-2xl font-bold text-gray-900 mb-2">
                    What topics interest you?
                  </h2>
                  <p className="text-gray-600">
                    Select all that apply - you can change these later
                  </p>
                </div>

                <div className="grid md:grid-cols-2 gap-6">
                  {topics.map((topic) => (
                    <motion.div
                      key={topic.id}
                      variants={itemVariants}
                      whileHover={{ scale: 1.02 }}
                      whileTap={{ scale: 0.98 }}
                    >
                      <Card
                        className={`cursor-pointer transition-all duration-200 ${
                          selectedTopics.includes(topic.id)
                            ? "ring-2 ring-blue-500 shadow-lg"
                            : "hover:shadow-md"
                        }`}
                        onClick={() => toggleTopic(topic.id)}
                      >
                        <CardContent className="p-6">
                          <div className="flex items-start gap-4">
                            <div
                              className={`w-12 h-12 bg-gradient-to-r ${topic.color} rounded-lg flex items-center justify-center flex-shrink-0`}
                            >
                              <topic.icon className="h-6 w-6 text-white" />
                            </div>

                            <div className="flex-1">
                              <div className="flex items-center justify-between mb-2">
                                <h3 className="font-semibold text-gray-900">
                                  {topic.title}
                                </h3>
                                <Badge variant="secondary" className="text-xs">
                                  <Users className="h-3 w-3 mr-1" />
                                  {topic.subscribers}
                                </Badge>
                              </div>
                              <p className="text-sm text-gray-600 mb-3">
                                {topic.description}
                              </p>

                              <div className="flex items-center justify-between">
                                <div className="flex items-center gap-1">
                                  {[...Array(5)].map((_, i) => (
                                    <Star
                                      key={i}
                                      className="h-3 w-3 text-yellow-400 fill-current"
                                    />
                                  ))}
                                  <span className="text-xs text-gray-500 ml-1">
                                    4.8
                                  </span>
                                </div>

                                <Checkbox
                                  checked={selectedTopics.includes(topic.id)}
                                  onChange={() => toggleTopic(topic.id)}
                                  className="pointer-events-none"
                                />
                              </div>
                            </div>
                          </div>
                        </CardContent>
                      </Card>
                    </motion.div>
                  ))}
                </div>

                <div className="text-center">
                  <Button
                    onClick={handleNext}
                    disabled={selectedTopics.length === 0}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg"
                  >
                    Continue
                    <ArrowRight className="ml-2 h-4 w-4" />
                  </Button>
                  <p className="text-sm text-gray-500 mt-2">
                    {selectedTopics.length} topic
                    {selectedTopics.length !== 1 ? "s" : ""} selected
                  </p>
                </div>
              </motion.div>
            )}

            {/* Step 2: Frequency Selection */}
            {step === 2 && (
              <motion.div
                initial={{ opacity: 0, x: 50 }}
                animate={{ opacity: 1, x: 0 }}
                className="space-y-8"
              >
                <div className="text-center">
                  <h2 className="text-2xl font-bold text-gray-900 mb-2">
                    How often would you like to hear from us?
                  </h2>
                  <p className="text-gray-600">
                    Choose your preferred email frequency
                  </p>
                </div>

                <div className="max-w-2xl mx-auto space-y-4">
                  {frequencies.map((freq) => (
                    <Card
                      key={freq.id}
                      className={`cursor-pointer transition-all duration-200 ${
                        frequency === freq.id
                          ? "ring-2 ring-blue-500 shadow-lg"
                          : "hover:shadow-md"
                      }`}
                      onClick={() => setFrequency(freq.id)}
                    >
                      <CardContent className="p-6">
                        <div className="flex items-center justify-between">
                          <div>
                            <h3 className="font-semibold text-gray-900 mb-1">
                              {freq.label}
                            </h3>
                            <p className="text-sm text-gray-600">
                              {freq.description}
                            </p>
                          </div>
                          <div
                            className={`w-6 h-6 rounded-full border-2 transition-colors ${
                              frequency === freq.id
                                ? "border-blue-500 bg-blue-500"
                                : "border-gray-300"
                            }`}
                          >
                            {frequency === freq.id && (
                              <CheckCircle className="h-4 w-4 text-white m-0.5" />
                            )}
                          </div>
                        </div>
                      </CardContent>
                    </Card>
                  ))}
                </div>

                <div className="text-center space-y-4">
                  <Button
                    onClick={handleNext}
                    className="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg"
                  >
                    Continue
                    <ArrowRight className="ml-2 h-4 w-4" />
                  </Button>

                  <Button
                    variant="ghost"
                    onClick={() => setStep(1)}
                    className="text-gray-600"
                  >
                    ‚Üê Back to topics
                  </Button>
                </div>
              </motion.div>
            )}

            {/* Step 3: Email Subscription */}
            {step === 3 && (
              <motion.div
                initial={{ opacity: 0, x: 50 }}
                animate={{ opacity: 1, x: 0 }}
                className="max-w-md mx-auto"
              >
                <Card className="shadow-lg">
                  <CardHeader className="text-center">
                    <div className="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-4">
                      <Mail className="h-8 w-8 text-white" />
                    </div>
                    <CardTitle className="text-2xl">Almost there!</CardTitle>
                    <p className="text-gray-600">
                      Enter your email to start receiving your personalized
                      newsletter
                    </p>
                  </CardHeader>

                  <CardContent className="space-y-6">
                    {/* Summary */}
                    <div className="space-y-3">
                      <h4 className="font-medium text-gray-900">
                        Your preferences:
                      </h4>
                      <div className="space-y-2">
                        <div className="flex flex-wrap gap-2">
                          {selectedTopics.map((topicId) => {
                            const topic = topics.find((t) => t.id === topicId);
                            return (
                              <Badge key={topicId} variant="secondary">
                                {topic?.title}
                              </Badge>
                            );
                          })}
                        </div>
                        <Badge className="bg-blue-100 text-blue-800">
                          <Zap className="h-3 w-3 mr-1" />
                          {frequencies.find((f) => f.id === frequency)?.label}
                        </Badge>
                      </div>
                    </div>

                    <form onSubmit={handleSubmit} className="space-y-4">
                      <Input
                        type="email"
                        placeholder="your@email.com"
                        value={email}
                        onChange={(e) => setEmail(e.target.value)}
                        required
                        className="text-lg py-3"
                      />

                      <Button
                        type="submit"
                        disabled={isLoading || !email}
                        className="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 text-lg"
                      >
                        {isLoading ? (
                          <div className="flex items-center gap-2">
                            <div className="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                            Creating your experience...
                          </div>
                        ) : (
                          <div className="flex items-center gap-2">
                            <Mail className="h-4 w-4" />
                            Start My Personalized Newsletter
                          </div>
                        )}
                      </Button>
                    </form>

                    <div className="text-center">
                      <Button
                        variant="ghost"
                        onClick={() => setStep(2)}
                        className="text-gray-600 text-sm"
                      >
                        ‚Üê Change preferences
                      </Button>
                    </div>
                  </CardContent>
                </Card>
              </motion.div>
            )}
          </div>
        ) : (
          <motion.div
            initial={{ scale: 0.8, opacity: 0 }}
            animate={{ scale: 1, opacity: 1 }}
            className="text-center max-w-2xl mx-auto"
          >
            <div className="w-20 h-20 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-6">
              <CheckCircle className="h-10 w-10 text-white" />
            </div>
            <h2 className="text-3xl font-bold text-gray-900 mb-4">
              Welcome to Your Personalized Experience! üéâ
            </h2>
            <p className="text-lg text-gray-600 mb-6">
              Your customized newsletter is being prepared. You'll receive your
              first{" "}
              {frequencies.find((f) => f.id === frequency)?.label.toLowerCase()}{" "}
              next{" "}
              {frequency === "daily"
                ? "day"
                : frequency === "weekly"
                  ? "week"
                  : "month"}
              .
            </p>

            <div className="bg-gray-50 rounded-lg p-6 mb-6">
              <h3 className="font-semibold text-gray-900 mb-3">
                What to expect:
              </h3>
              <div className="space-y-2 text-left max-w-md mx-auto">
                {selectedTopics.map((topicId) => {
                  const topic = topics.find((t) => t.id === topicId);
                  return (
                    <div key={topicId} className="flex items-center gap-2">
                      <CheckCircle className="h-4 w-4 text-green-500 flex-shrink-0" />
                      <span className="text-sm text-gray-700">
                        {topic?.title} updates
                      </span>
                    </div>
                  );
                })}
              </div>
            </div>

            <Badge className="bg-green-100 text-green-800 px-4 py-2 text-base">
              Subscription Confirmed
            </Badge>
          </motion.div>
        )}
      </div>
    </section>
  );
}
```

##### How It Works

This interactive preferences newsletter component provides a personalized onboarding experience:

1. **Multi-Step Flow**: Guides users through topic selection, frequency preferences, and email collection
2. **Interactive Cards**: Clickable topic cards with hover effects and selection states
3. **Progress Tracking**: Visual progress indicator shows current step in the flow
4. **Preference Summary**: Shows selected options before final subscription
5. **Smart Validation**: Prevents progression without required selections
6. **Responsive Grid**: Adapts layout for different screen sizes
7. **Confirmation Experience**: Personalized success message based on user choices

##### Customization Options

##### Dynamic Content Loading

```tsx
// Loads newsletter topics from API endpoint
const [topics, setTopics] = useState([]);
const [loading, setLoading] = useState(true);

useEffect(() => {
  // Fetches available newsletter topics from the backend API
  const fetchTopics = async () => {
    try {
      const response = await fetch("/api/newsletter-topics");
      const data = await response.json();
      setTopics(data);
    } catch (error) {
      console.error("Failed to load topics:", error);
    } finally {
      setLoading(false);
    }
  };

  fetchTopics();
}, []);
```

##### Advanced Preference Engine

```tsx
// Generates intelligent topic recommendations based on user's current selections
const getRecommendedTopics = (selectedTopics) => {
  const recommendations = {
    development: ["ai", "business"],
    design: ["development", "business"],
    ai: ["development", "business"],
    business: ["ai", "development"],
  };

  return selectedTopics
    .reduce((acc, topic) => {
      return [...acc, ...(recommendations[topic] || [])];
    }, [])
    .filter(
      (topic, index, arr) =>
        arr.indexOf(topic) === index && !selectedTopics.includes(topic)
    );
};
```

##### User Analytics Integration

```tsx
// Sends user preference data to analytics platform for tracking and optimization
const trackUserSelection = (action, data) => {
  if (typeof window !== "undefined" && window.gtag) {
    window.gtag("event", action, {
      event_category: "Newsletter Signup",
      event_label: JSON.stringify(data),
      custom_parameter_1: data.topics?.length || 0,
      custom_parameter_2: data.frequency || "weekly",
    });
  }
};

// Usage in component
// Handles subscription with analytics tracking
const handleSubscribe = async (formData) => {
  trackUserSelection("newsletter_preferences_selected", {
    topics: selectedTopics,
    frequency: selectedFrequency,
    step_completed: step,
  });

  // Continue with subscription logic...
};
```

##### Progressive Enhancement with Local Storage

```tsx
// Automatically saves user progress to prevent data loss on page refresh
useEffect(() => {
  // Persists current form state to browser's local storage
  const saveProgress = () => {
    localStorage.setItem(
      "newsletter_signup_progress",
      JSON.stringify({
        step,
        selectedTopics,
        selectedFrequency,
        email,
        timestamp: Date.now(),
      })
    );
  };

  saveProgress();
}, [step, selectedTopics, selectedFrequency, email]);

// Restore progress on component mount
useEffect(() => {
  const restored = localStorage.getItem("newsletter_signup_progress");
  if (restored) {
    const data = JSON.parse(restored);
    // Only restore if less than 1 hour old
    if (Date.now() - data.timestamp < 3600000) {
      setStep(data.step);
      setSelectedTopics(data.selectedTopics || []);
      setSelectedFrequency(data.selectedFrequency || "weekly");
      setEmail(data.email || "");
    }
  }
}, []);
```

##### A/B Testing Framework

```tsx
// A/B test different flows
// Manages A/B testing variants with localStorage persistence
const useABTest = (testName, variants) => {
  const [variant, setVariant] = useState(null);

  useEffect(() => {
    const getVariant = () => {
      const stored = localStorage.getItem(`ab_test_${testName}`);
      if (stored) return stored;

      const variantKeys = Object.keys(variants);
      const randomVariant =
        variantKeys[Math.floor(Math.random() * variantKeys.length)];
      localStorage.setItem(`ab_test_${testName}`, randomVariant);
      return randomVariant;
    };

    setVariant(getVariant());
  }, [testName, variants]);

  return variant;
};

// Usage
const variant = useABTest("newsletter_flow", {
  three_step: { steps: 3, showProgress: true },
  single_step: { steps: 1, showProgress: false },
  two_step: { steps: 2, showProgress: true },
});
```

##### Advanced Form Validation

```tsx
// Custom validation with real-time feedback
// Provides comprehensive form validation with error tracking and field-level validation
const useFormValidation = () => {
  const [errors, setErrors] = useState({});
  const [touched, setTouched] = useState({});

  const validateEmail = (email) => {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!email) return "Email is required";
    if (!emailRegex.test(email)) return "Please enter a valid email";
    return null;
  };

  const validateTopics = (topics) => {
    if (topics.length === 0) return "Please select at least one topic";
    if (topics.length > 5) return "Please select no more than 5 topics";
    return null;
  };

  // @collapse
  const validate = (field, value) => {
    let error = null;
    switch (field) {
      case "email":
        error = validateEmail(value);
        break;
      case "topics":
        error = validateTopics(value);
        break;
    }

    setErrors((prev) => ({ ...prev, [field]: error }));
    return error === null;
  };

  return { errors, touched, setTouched, validate };
};
```

##### Accessibility Enhancements

```tsx
// Creates accessible announcements for screen readers
const announceToScreenReader = (message) => {
  const announcement = document.createElement("div");
  announcement.setAttribute("aria-live", "polite");
  announcement.setAttribute("aria-atomic", "true");
  announcement.setAttribute("class", "sr-only");
  announcement.textContent = message;

  document.body.appendChild(announcement);
  setTimeout(() => document.body.removeChild(announcement), 1000);
};

// Handles keyboard navigation for improved accessibility
const handleKeyDown = (e, action) => {
  if (e.key === "Enter" || e.key === " ") {
    e.preventDefault();
    action();
  }
};

// Utility functions for managing focus states in complex forms
const focusManagement = {
  // Moves focus to the first form field with an error
  focusFirstError: () => {
    const firstError = document.querySelector('[data-error="true"]');
    if (firstError) firstError.focus();
  },

  // Sets focus to the next step's primary interactive element
  focusNextStep: () => {
    const nextStepElement = document.querySelector('[data-step-focus="true"]');
    if (nextStepElement) nextStepElement.focus();
  },
};
```

<BackToTop />

### Header Newsletter Component

When creating a newsletter component for the header, consider the following:

- **Accessibility**: Ensure that the newsletter signup form is easily accessible from any page on your website.
- **Design**: The design should be consistent with the overall look and feel of your website, using colors and fonts that match your branding.
- **Minimalism**: Keep the form minimalistic to avoid cluttering the header. A simple email input field and a subscribe button are often sufficient.
- **Responsiveness**: Ensure that the newsletter component is responsive and looks good on both desktop and mobile devices.

#### Examples

##### Example 1: Collapsible Announcement Bar with Smart Timing

```tsx
import { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Badge } from "@/components/ui/badge";
import {
  Mail,
  X,
  ChevronDown,
  ChevronUp,
  Clock,
  Gift,
  Sparkles,
  Users,
} from "lucide-react";
import { motion, AnimatePresence } from "framer-motion";

// Smart header newsletter with collapsible design and intelligent timing
export default function SmartHeaderNewsletter() {
  const [isVisible, setIsVisible] = useState(false);
  const [isExpanded, setIsExpanded] = useState(false);
  const [email, setEmail] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [isSubscribed, setIsSubscribed] = useState(false);
  const [timeLeft, setTimeLeft] = useState(null);
  const [scrollY, setScrollY] = useState(0);

  // Manages banner visibility based on user history and timing
  useEffect(() => {
    const hasSeenBanner = localStorage.getItem("newsletter-banner-seen");
    const lastShown = localStorage.getItem("newsletter-banner-last-shown");
    const now = Date.now();
    const oneWeek = 7 * 24 * 60 * 60 * 1000;

    if (!hasSeenBanner || (lastShown && now - parseInt(lastShown) > oneWeek)) {
      const timer = setTimeout(() => {
        setIsVisible(true);
      }, 3000); // Show after 3 seconds

      return () => clearTimeout(timer);
    }
  }, []);

  // Creates and maintains countdown timer for promotional offers
  useEffect(() => {
    const endTime = new Date();
    endTime.setDate(endTime.getDate() + 7); // 7 days from now

    const timer = setInterval(() => {
      const now = new Date().getTime();
      const distance = endTime.getTime() - now;

      if (distance > 0) {
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor(
          (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        setTimeLeft({ days, hours });
      } else {
        setTimeLeft(null);
      }
    }, 1000);

    return () => clearInterval(timer);
  }, []);

  // Tracks scroll position for subtle parallax effects on banner
  useEffect(() => {
    // Updates scroll position for banner animations
    const handleScroll = () => setScrollY(window.scrollY);
    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  // Dismisses banner and records user interaction in localStorage
  const handleDismiss = () => {
    setIsVisible(false);
    localStorage.setItem("newsletter-banner-seen", "true");
    localStorage.setItem("newsletter-banner-last-shown", Date.now().toString());
  };

  // Processes newsletter subscription and manages banner state
  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);

    try {
      await new Promise((resolve) => setTimeout(resolve, 1500));
      setIsSubscribed(true);
      localStorage.setItem("newsletter-subscribed", "true");

      setTimeout(() => {
        setIsVisible(false);
      }, 3000);
    } catch (error) {
      console.error("Subscription failed:", error);
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <AnimatePresence>
      {isVisible && (
        <motion.div
          initial={{ y: -100, opacity: 0 }}
          animate={{ y: 0, opacity: 1 }}
          exit={{ y: -100, opacity: 0 }}
          transition={{ type: "spring", stiffness: 300, damping: 30 }}
          className="fixed top-0 left-0 right-0 z-50 shadow-lg"
          style={{
            transform: `translateY(${scrollY * 0.1}px)`,
          }}
        >
          <div className="bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 text-white relative overflow-hidden">
            {/* Animated background elements */}
            <div className="absolute inset-0 opacity-20">
              <div className="absolute top-0 left-1/4 w-32 h-32 bg-white rounded-full blur-3xl animate-pulse"></div>
              <div className="absolute bottom-0 right-1/3 w-24 h-24 bg-white rounded-full blur-3xl animate-pulse delay-1000"></div>
            </div>

            <div className="relative container mx-auto px-4">
              {!isExpanded ? (
                // Collapsed state
                <div className="py-3 flex items-center justify-between">
                  <div className="flex items-center gap-4">
                    <div className="flex items-center gap-2">
                      <div className="w-8 h-8 bg-white/20 rounded-full flex items-center justify-center">
                        <Gift className="h-4 w-4" />
                      </div>
                      <span className="font-medium text-sm sm:text-base">
                        üéâ Join our newsletter for exclusive content and
                        updates!
                      </span>
                    </div>

                    {timeLeft && (
                      <Badge className="bg-yellow-500 text-yellow-900 text-xs hidden sm:inline-flex">
                        <Clock className="h-3 w-3 mr-1" />
                        {timeLeft.days}d {timeLeft.hours}h left
                      </Badge>
                    )}
                  </div>

                  <div className="flex items-center gap-2">
                    <Button
                      onClick={() => setIsExpanded(true)}
                      variant="ghost"
                      size="sm"
                      className="text-white hover:bg-white/20 text-sm"
                    >
                      Subscribe
                      <ChevronDown className="h-4 w-4 ml-1" />
                    </Button>

                    <Button
                      onClick={handleDismiss}
                      variant="ghost"
                      size="sm"
                      className="text-white hover:bg-white/20 p-1"
                    >
                      <X className="h-4 w-4" />
                    </Button>
                  </div>
                </div>
              ) : (
                // Expanded state
                <motion.div
                  initial={{ height: 0, opacity: 0 }}
                  animate={{ height: "auto", opacity: 1 }}
                  exit={{ height: 0, opacity: 0 }}
                  className="py-6"
                >
                  {!isSubscribed ? (
                    <div className="grid md:grid-cols-3 gap-6 items-center">
                      {/* Left: Value proposition */}
                      <div className="space-y-2">
                        <div className="flex items-center gap-2">
                          <Sparkles className="h-5 w-5 text-yellow-300" />
                          <h3 className="font-bold text-lg">
                            Weekly Tech Digest
                          </h3>
                        </div>
                        <p className="text-sm text-white/90">
                          Get curated content, exclusive tutorials, and industry
                          insights delivered every Tuesday.
                        </p>
                        <div className="flex items-center gap-4 text-sm text-white/80">
                          <span className="flex items-center gap-1">
                            <Users className="h-4 w-4" />
                            25,000+ readers
                          </span>
                          <span>‚úì No spam</span>
                          <span>‚úì Unsubscribe anytime</span>
                        </div>
                      </div>

                      {/* Center: Subscription form */}
                      <div className="md:col-span-1">
                        <form onSubmit={handleSubmit} className="flex gap-2">
                          <Input
                            type="email"
                            placeholder="your@email.com"
                            value={email}
                            onChange={(e) => setEmail(e.target.value)}
                            required
                            className="bg-white/20 border-white/30 text-white placeholder:text-white/70 focus:bg-white/30"
                          />
                          <Button
                            type="submit"
                            disabled={isLoading || !email}
                            className="bg-white text-purple-600 hover:bg-white/90 font-semibold px-6 whitespace-nowrap"
                          >
                            {isLoading ? (
                              <div className="animate-spin rounded-full h-4 w-4 border-2 border-purple-600 border-t-transparent"></div>
                            ) : (
                              <>
                                <Mail className="h-4 w-4 mr-2" />
                                Subscribe
                              </>
                            )}
                          </Button>
                        </form>
                      </div>

                      {/* Right: Special offer countdown */}
                      {timeLeft && (
                        <div className="text-center space-y-2">
                          <div className="text-sm font-medium text-yellow-200">
                            üéÅ Limited Time: Free Premium Content
                          </div>
                          <div className="flex items-center justify-center gap-2 text-lg font-bold">
                            <div className="bg-white/20 rounded px-2 py-1 text-sm">
                              {timeLeft.days}d
                            </div>
                            <div className="bg-white/20 rounded px-2 py-1 text-sm">
                              {timeLeft.hours}h
                            </div>
                          </div>
                        </div>
                      )}
                    </div>
                  ) : (
                    <motion.div
                      initial={{ scale: 0.8, opacity: 0 }}
                      animate={{ scale: 1, opacity: 1 }}
                      className="text-center space-y-2"
                    >
                      <div className="flex items-center justify-center gap-2">
                        <div className="w-6 h-6 bg-green-400 rounded-full flex items-center justify-center">
                          <Mail className="h-4 w-4 text-green-900" />
                        </div>
                        <span className="font-semibold">
                          Thanks for subscribing! üéâ
                        </span>
                      </div>
                      <p className="text-sm text-white/90">
                        Check your email for confirmation. Your first newsletter
                        arrives next Tuesday!
                      </p>
                    </motion.div>
                  )}

                  <Button
                    onClick={() => setIsExpanded(false)}
                    variant="ghost"
                    size="sm"
                    className="absolute top-2 right-12 text-white hover:bg-white/20"
                  >
                    <ChevronUp className="h-4 w-4" />
                  </Button>

                  <Button
                    onClick={handleDismiss}
                    variant="ghost"
                    size="sm"
                    className="absolute top-2 right-2 text-white hover:bg-white/20"
                  >
                    <X className="h-4 w-4" />
                  </Button>
                </motion.div>
              )}
            </div>
          </div>
        </motion.div>
      )}
    </AnimatePresence>
  );
}
```

##### How It Works

This smart header newsletter component includes intelligent behavior:

1. **Smart Timing**: Shows after user has been on page for 3 seconds
2. **Persistence Logic**: Remembers if user has seen/dismissed banner using localStorage
3. **Progressive Disclosure**: Starts collapsed, expands on user interest
4. **Countdown Timer**: Creates urgency with real-time countdown
5. **Scroll Parallax**: Subtle movement effect based on scroll position
6. **Auto-dismiss**: Automatically hides after successful subscription
7. **Responsive Design**: Adapts content layout for different screen sizes

##### Customization Options

##### A/B Testing Integration

```tsx
// Variant testing
// @collapse
const variants = [
  {
    id: "urgency",
    title: "‚ö° Limited Time Offer",
    message: "Join now for exclusive early access!",
    color: "from-red-600 to-orange-600",
  },
  {
    id: "social",
    title: "üë• Join 25K+ Readers",
    message: "Be part of our growing community!",
    color: "from-blue-600 to-purple-600",
  },
  {
    id: "value",
    title: "üìö Free Weekly Insights",
    message: "Get expert-curated content delivered weekly!",
    color: "from-green-600 to-blue-600",
  },
];

const [currentVariant] = useState(() => {
  const variantId =
    localStorage.getItem("newsletter-variant") ||
    variants[Math.floor(Math.random() * variants.length)].id;
  localStorage.setItem("newsletter-variant", variantId);
  return variants.find((v) => v.id === variantId);
});
```

##### Smart Exit Intent

```tsx
// Exit intent detection
useEffect(() => {
  const handleMouseLeave = (e) => {
    if (e.clientY <= 0 && !isSubscribed && !isVisible) {
      setIsVisible(true);
      setIsExpanded(true);
    }
  };

  document.addEventListener("mouseleave", handleMouseLeave);
  return () => document.removeEventListener("mouseleave", handleMouseLeave);
}, [isSubscribed, isVisible]);
```

<BackToTop />

##### Example 2: Floating Sticky Header with Progressive Enhancement

```tsx
import { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Badge } from "@/components/ui/badge";
import {
  Mail,
  TrendingUp,
  Users,
  Star,
  ChevronRight,
  X,
  Check,
} from "lucide-react";
import { motion, useScroll, useTransform } from "framer-motion";

// Floating sticky newsletter that appears based on scroll progress and reading behavior
export default function FloatingStickyNewsletter() {
  const [isVisible, setIsVisible] = useState(false);
  const [email, setEmail] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  const [isSubscribed, setIsSubscribed] = useState(false);
  const [readingProgress, setReadingProgress] = useState(0);

  const { scrollYProgress } = useScroll();
  const headerOpacity = useTransform(scrollYProgress, [0, 0.1], [0, 1]);
  const headerY = useTransform(scrollYProgress, [0, 0.1], [-50, 0]);

  // Tracks user reading progress based on scroll position
  useEffect(() => {
  // @collapse
  useEffect(() => {
    const calculateProgress = () => {
      const totalHeight =
        document.documentElement.scrollHeight - window.innerHeight;
      const progress = (window.scrollY / totalHeight) * 100;
      setReadingProgress(Math.min(progress, 100));

      // Show newsletter when user reaches 25% of page
      if (
        progress > 25 &&
        !isSubscribed &&
        !localStorage.getItem("newsletter-shown-sticky")
      ) {
        setIsVisible(true);
        localStorage.setItem("newsletter-shown-sticky", "true");
      }
    };

    window.addEventListener("scroll", calculateProgress);
    return () => window.removeEventListener("scroll", calculateProgress);
  }, [isSubscribed]);

  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);

    try {
      await new Promise((resolve) => setTimeout(resolve, 1500));
      setIsSubscribed(true);

      // Show success for 3 seconds then hide
      setTimeout(() => setIsVisible(false), 3000);
    } catch (error) {
      console.error("Subscription failed:", error);
    } finally {
      setIsLoading(false);
    }
  };

  const stats = [
    { icon: Users, value: "15K+", label: "Subscribers" },
    { icon: TrendingUp, value: "94%", label: "Open Rate" },
    { icon: Star, value: "4.9", label: "Rating" },
  ];

  return (
    <>
      {/* Reading Progress Bar */}
      <motion.div
        className="fixed top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-purple-500 z-50 origin-left"
        style={{
          scaleX: readingProgress / 100,
          opacity: scrollYProgress,
        }}
      />

      {/* Floating Newsletter Header */}
      <motion.div
        style={{
          opacity: headerOpacity,
          y: headerY,
        }}
        className="fixed top-4 left-1/2 transform -translate-x-1/2 z-40 w-full max-w-6xl px-4"
      >
        {isVisible && (
          <motion.div
            initial={{ scale: 0.9, opacity: 0 }}
            animate={{ scale: 1, opacity: 1 }}
            exit={{ scale: 0.9, opacity: 0 }}
            className="bg-white/90 backdrop-blur-lg rounded-2xl shadow-2xl border border-white/20 overflow-hidden"
          >
            {!isSubscribed ? (
              <div className="p-4 lg:p-6">
                <div className="flex items-center justify-between gap-4">
                  {/* Left: Branding & Value Prop */}
                  <div className="flex items-center gap-4 min-w-0 flex-1">
                    <div className="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-xl flex items-center justify-center flex-shrink-0">
                      <Mail className="h-6 w-6 text-white" />
                    </div>

                    <div className="min-w-0 flex-1">
                      <h3 className="font-bold text-gray-900 text-lg leading-tight">
                        Tech Weekly
                      </h3>
                      <p className="text-sm text-gray-600 hidden sm:block">
                        Join thousands getting the best tech content
                      </p>
                    </div>
                  </div>

                  {/* Center: Stats (hidden on mobile) */}
                  <div className="hidden lg:flex items-center gap-6">
                    {stats.map((stat, index) => (
                      <div key={index} className="text-center">
                        <div className="flex items-center justify-center gap-1 text-sm font-semibold text-gray-900">
                          <stat.icon className="h-4 w-4 text-blue-500" />
                          {stat.value}
                        </div>
                        <div className="text-xs text-gray-500">
                          {stat.label}
                        </div>
                      </div>
                    ))}
                  </div>

                  {/* Right: Subscription Form */}
                  <div className="flex items-center gap-2 min-w-0">
                    <form onSubmit={handleSubmit} className="flex gap-2">
                      <Input
                        type="email"
                        placeholder="your@email.com"
                        value={email}
                        onChange={(e) => setEmail(e.target.value)}
                        required
                        className="w-40 sm:w-52 text-sm border-gray-200 focus:border-blue-500"
                      />
                      <Button
                        type="submit"
                        disabled={isLoading || !email}
                        className="bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold px-4 whitespace-nowrap"
                      >
                        {isLoading ? (
                          <div className="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                        ) : (
                          <>
                            Join
                            <ChevronRight className="h-4 w-4 ml-1" />
                          </>
                        )}
                      </Button>
                    </form>

                    <Button
                      onClick={() => setIsVisible(false)}
                      variant="ghost"
                      size="sm"
                      className="text-gray-400 hover:text-gray-600 p-1 flex-shrink-0"
                    >
                      <X className="h-4 w-4" />
                    </Button>
                  </div>
                </div>

                {/* Trust indicators */}
                <div className="mt-3 pt-3 border-t border-gray-100 flex items-center justify-between text-xs text-gray-500">
                  <div className="flex items-center gap-4">
                    <span className="flex items-center gap-1">
                      <Check className="h-3 w-3 text-green-500" />
                      Weekly updates
                    </span>
                    <span className="flex items-center gap-1">
                      <Check className="h-3 w-3 text-green-500" />
                      No spam
                    </span>
                    <span className="flex items-center gap-1">
                      <Check className="h-3 w-3 text-green-500" />
                      Unsubscribe anytime
                    </span>
                  </div>

                  <Badge variant="secondary" className="text-xs">
                    {Math.round(readingProgress)}% read
                  </Badge>
                </div>
              </div>
            ) : (
              <motion.div
                initial={{ scale: 0.8, opacity: 0 }}
                animate={{ scale: 1, opacity: 1 }}
                className="p-4 lg:p-6 text-center"
              >
                <div className="flex items-center justify-center gap-3">
                  <div className="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                    <Check className="h-5 w-5 text-white" />
                  </div>
                  <div>
                    <h3 className="font-semibold text-gray-900">
                      Successfully subscribed! üéâ
                    </h3>
                    <p className="text-sm text-gray-600">
                      Check your email for confirmation
                    </p>
                  </div>
                  <Button
                    onClick={() => setIsVisible(false)}
                    variant="ghost"
                    size="sm"
                    className="text-gray-400 hover:text-gray-600 ml-auto"
                  >
                    <X className="h-4 w-4" />
                  </Button>
                </div>
              </motion.div>
            )}
          </motion.div>
        )}
      </motion.div>
    </>
  );
}
```

##### How It Works

This floating sticky newsletter header provides non-intrusive engagement:

1. **Scroll-Based Appearance**: Only appears after user scrolls (indicating engagement)
2. **Reading Progress Integration**: Shows percentage of content read
3. **Glass Morphism Design**: Semi-transparent background with backdrop blur
4. **Progressive Enhancement**: Shows when user reaches 25% of content
5. **Responsive Layout**: Adapts content for different screen sizes
6. **Context-Aware**: Uses reading progress as trigger for newsletter invitation
7. **Smooth Animations**: Framer Motion for smooth entrance and transform effects

##### Customization Options

##### Content-Aware Triggers

```tsx
// Different messages based on content type
const getContextualMessage = () => {
  const url = window.location.pathname;
  const messages = {
    "/blog": "Love this post? Get more like it weekly!",
    "/tutorials": "Want more tutorials? Join our newsletter!",
    "/news": "Stay updated with our weekly digest!",
    default: "Join thousands getting the best tech content",
  };

  return messages[url] || messages.default;
};

// Time-based personalization
const getTimeBasedGreeting = () => {
  const hour = new Date().getHours();
  if (hour < 12) return "Good morning! Start your day with tech insights";
  if (hour < 17) return "Good afternoon! Take a break with our newsletter";
  return "Good evening! Wind down with curated content";
};
```

##### Engagement Tracking

```tsx
// Track user engagement metrics
const trackEngagement = () => {
  const engagement = {
    timeOnPage: Date.now() - sessionStorage.getItem("page-start"),
    scrollDepth: readingProgress,
    deviceType: window.innerWidth > 768 ? "desktop" : "mobile",
    referrer: document.referrer,
  };

  // Send to analytics
  analytics.track("newsletter_shown", engagement);
};
```

##### Dynamic Content Personalization

```tsx
// Personalize based on user behavior
const usePersonalization = () => {
  const [userProfile, setUserProfile] = useState({});

  useEffect(() => {
    const profile = {
      visitCount: parseInt(localStorage.getItem("visit_count") || "1"),
      lastVisit: localStorage.getItem("last_visit"),
      interests: JSON.parse(localStorage.getItem("user_interests") || "[]"),
      preferredTime: getBrowserTimeZone(),
    };

    setUserProfile(profile);
    localStorage.setItem("visit_count", (profile.visitCount + 1).toString());
    localStorage.setItem("last_visit", new Date().toISOString());
  }, []);

  return userProfile;
};

// Returning user detection
const getReturningUserMessage = (visitCount) => {
  if (visitCount === 1) return "Welcome! Join our community";
  if (visitCount < 5) return "Welcome back! Ready to subscribe?";
  return "You're a frequent visitor! Join our VIP newsletter";
};
```

##### Advanced Scroll Behavior

```tsx
// Smart scroll behavior with momentum detection
const useScrollMomentum = () => {
  const [scrollDirection, setScrollDirection] = useState("down");
  const [scrollSpeed, setScrollSpeed] = useState(0);
  const lastScrollY = useRef(0);
  const lastScrollTime = useRef(Date.now());

  useEffect(() => {
    const handleScroll = () => {
      const currentScrollY = window.scrollY;
      const currentTime = Date.now();
      const deltaY = currentScrollY - lastScrollY.current;
      const deltaTime = currentTime - lastScrollTime.current;

      setScrollDirection(deltaY > 0 ? "down" : "up");
      setScrollSpeed(Math.abs(deltaY) / deltaTime);

      lastScrollY.current = currentScrollY;
      lastScrollTime.current = currentTime;
    };

    window.addEventListener("scroll", handleScroll, { passive: true });
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  return { scrollDirection, scrollSpeed };
};
```

##### Performance Optimization

```tsx
// Debounced scroll handler
const useDebouncedScroll = (delay = 16) => {
  const [scrollY, setScrollY] = useState(0);
  const timeoutRef = useRef();

  useEffect(() => {
    const handleScroll = () => {
      clearTimeout(timeoutRef.current);
      timeoutRef.current = setTimeout(() => {
        setScrollY(window.scrollY);
      }, delay);
    };

    window.addEventListener("scroll", handleScroll, { passive: true });
    return () => {
      window.removeEventListener("scroll", handleScroll);
      clearTimeout(timeoutRef.current);
    };
  }, [delay]);

  return scrollY;
};

// Intersection Observer for performance
const useIntersectionObserver = (options) => {
  const [isIntersecting, setIsIntersecting] = useState(false);
  const elementRef = useRef();

  useEffect(() => {
    const observer = new IntersectionObserver(([entry]) => {
      setIsIntersecting(entry.isIntersecting);
    }, options);

    if (elementRef.current) observer.observe(elementRef.current);
    return () => observer.disconnect();
  }, [options]);

  return [elementRef, isIntersecting];
};
```

##### Multi-Device Synchronization

```tsx
// Sync subscription status across devices
const useCrossDeviceSync = () => {
  const [syncStatus, setSyncStatus] = useState("pending");

  const syncUserData = async (userData) => {
    try {
      const response = await fetch("/api/user-sync", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          email: userData.email,
          deviceId: getDeviceId(),
          timestamp: Date.now(),
          preferences: userData.preferences,
        }),
      });

      setSyncStatus(response.ok ? "synced" : "error");
    } catch (error) {
      setSyncStatus("error");
    }
  };

  return { syncStatus, syncUserData };
};

// Device fingerprinting for consistency
const getDeviceId = () => {
  const canvas = document.createElement("canvas");
  const ctx = canvas.getContext("2d");
  ctx.textBaseline = "top";
  ctx.font = "14px Arial";
  ctx.fillText("Device fingerprint", 2, 2);

  return btoa(canvas.toDataURL()).slice(0, 16);
};
```

<BackToTop />

### Pop-up or Slide-in Newsletter Component

When creating a pop-up or slide-in newsletter component, consider the following:

- **Timing**: Set the pop-up or slide-in to appear after a certain time on the page or when the user scrolls to a specific point. This ensures that it does not disrupt the user experience.
- **Design**: Use a design that is visually appealing and consistent with your website's branding. The pop-up should be eye-catching but not overly intrusive.
- **Simplicity**: Keep the form simple, asking for only essential information such as the email address and possibly the name.
- **Offer Value**: Clearly communicate the value of subscribing to your newsletter, such as exclusive content, discounts, or freebies.
- **Call-to-Action**: Use a clear call-to-action (CTA) that encourages visitors to subscribe, such as "Subscribe Now" or "Join Our Newsletter".
- **Incentives**: Consider offering incentives such as exclusive content, discounts, or freebies to encourage visitors to subscribe.
- **Follow-Up**: After a visitor subscribes, follow up with a welcome email that delivers the promised incentive and sets expectations for future newsletters.
- **Close Option**: Provide a clear option for users to close the pop-up or slide-in if they are not interested in subscribing. This helps to maintain a positive user experience.

#### Examples

##### Example 1: Elegant Timed Pop-up with Glassmorphism Effect

```tsx
import { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Card, CardContent } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { X, Mail, Gift, Sparkles, Clock, CheckCircle } from "lucide-react";
import { motion, AnimatePresence } from "framer-motion";

// Elegant timed popup with countdown and sophisticated animations
export default function ElegantTimedPopup() {
  const [isVisible, setIsVisible] = useState(false);
  const [email, setEmail] = useState("");
  const [isSubmitted, setIsSubmitted] = useState(false);
  const [timeLeft, setTimeLeft] = useState(10);
  const [isLoading, setIsLoading] = useState(false);

  // Displays popup after 8 seconds if user hasn't seen it before
  useEffect(() => {
    const timer = setTimeout(() => {
      if (!localStorage.getItem("newsletter-popup-shown")) {
        setIsVisible(true);
      }
    }, 8000);

    return () => clearTimeout(timer);
  }, []);

  // Countdown timer for limited offer
  useEffect(() => {
    if (isVisible && timeLeft > 0) {
      const countdown = setInterval(() => {
        setTimeLeft((prev) => prev - 1);
      }, 1000);

      return () => clearInterval(countdown);
    }
  }, [isVisible, timeLeft]);

  // @collapse
  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);

    try {
      // Simulate API call
      await new Promise((resolve) => setTimeout(resolve, 1500));

      setIsSubmitted(true);
      localStorage.setItem("newsletter-popup-shown", "true");

      // Auto-close after success
      setTimeout(() => {
        setIsVisible(false);
      }, 3000);
    } catch (error) {
      console.error("Subscription failed:", error);
    } finally {
      setIsLoading(false);
    }
  };

  const handleClose = () => {
    setIsVisible(false);
    localStorage.setItem("newsletter-popup-shown", "true");
  };

  return (
    <AnimatePresence>
      {isVisible && (
        <motion.div
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
          className="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4"
          onClick={handleClose}
        >
          <motion.div
            initial={{ scale: 0.8, opacity: 0, y: 50 }}
            animate={{ scale: 1, opacity: 1, y: 0 }}
            exit={{ scale: 0.8, opacity: 0, y: 50 }}
            transition={{ type: "spring", duration: 0.5 }}
            onClick={(e) => e.stopPropagation()}
            className="relative"
          >
            <Card className="w-full max-w-md bg-white/95 backdrop-blur-md border-0 shadow-2xl">
              <CardContent className="p-8">
                {/* Close Button */}
                <Button
                  variant="ghost"
                  size="sm"
                  onClick={handleClose}
                  className="absolute top-4 right-4 h-8 w-8 p-0 hover:bg-gray-100"
                >
                  <X className="h-4 w-4" />
                </Button>

                {!isSubmitted ? (
                  <div className="text-center space-y-6">
                    {/* Header with Icon */}
                    <div className="space-y-2">
                      <div className="mx-auto w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
                        <Mail className="h-8 w-8 text-white" />
                      </div>
                      <h3 className="text-2xl font-bold text-gray-900">
                        Don't Miss Out!
                      </h3>
                      <p className="text-gray-600">
                        Join 10,000+ subscribers and get exclusive content
                        delivered weekly
                      </p>
                    </div>

                    {/* Limited Time Offer */}
                    <div className="bg-gradient-to-r from-orange-100 to-red-100 p-4 rounded-lg border border-orange-200">
                      <div className="flex items-center justify-center gap-2 mb-2">
                        <Gift className="h-5 w-5 text-orange-600" />
                        <span className="font-semibold text-orange-800">
                          Limited Time Offer
                        </span>
                      </div>
                      <div className="flex items-center justify-center gap-2">
                        <Clock className="h-4 w-4 text-red-600" />
                        <span className="text-sm font-medium text-red-700">
                          Expires in: {Math.floor(timeLeft / 60)}:
                          {(timeLeft % 60).toString().padStart(2, "0")}
                        </span>
                      </div>
                      <p className="text-sm text-orange-700 mt-1">
                        Subscribe now and get our exclusive eBook FREE!
                      </p>
                    </div>

                    {/* Benefits */}
                    <div className="space-y-2 text-left">
                      <div className="flex items-center gap-3">
                        <div className="w-2 h-2 bg-green-500 rounded-full"></div>
                        <span className="text-sm text-gray-700">
                          Weekly industry insights
                        </span>
                      </div>
                      <div className="flex items-center gap-3">
                        <div className="w-2 h-2 bg-blue-500 rounded-full"></div>
                        <span className="text-sm text-gray-700">
                          Exclusive tutorials & guides
                        </span>
                      </div>
                      <div className="flex items-center gap-3">
                        <div className="w-2 h-2 bg-purple-500 rounded-full"></div>
                        <span className="text-sm text-gray-700">
                          Early access to new content
                        </span>
                      </div>
                    </div>

                    {/* Subscription Form */}
                    <form onSubmit={handleSubmit} className="space-y-4">
                      <div className="relative">
                        <Input
                          type="email"
                          placeholder="Enter your email address"
                          value={email}
                          onChange={(e) => setEmail(e.target.value)}
                          required
                          className="pl-4 pr-4 py-3 rounded-lg border-2 border-gray-200 focus:border-purple-500 transition-colors"
                        />
                      </div>

                      <Button
                        type="submit"
                        disabled={isLoading || !email}
                        className="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3 rounded-lg transition-all duration-200 transform hover:scale-105"
                      >
                        {isLoading ? (
                          <div className="flex items-center gap-2">
                            <div className="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                            Subscribing...
                          </div>
                        ) : (
                          <div className="flex items-center gap-2">
                            <Sparkles className="h-4 w-4" />
                            Get My Free eBook
                          </div>
                        )}
                      </Button>
                    </form>

                    {/* Trust Indicators */}
                    <div className="flex items-center justify-center gap-4 text-xs text-gray-500">
                      <span>‚úì No spam, ever</span>
                      <span>‚úì Unsubscribe anytime</span>
                      <span>‚úì 100% free</span>
                    </div>
                  </div>
                ) : (
                  <motion.div
                    initial={{ scale: 0.8, opacity: 0 }}
                    animate={{ scale: 1, opacity: 1 }}
                    className="text-center space-y-4"
                  >
                    <div className="mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center">
                      <CheckCircle className="h-8 w-8 text-green-600" />
                    </div>
                    <h3 className="text-xl font-bold text-gray-900">
                      Welcome Aboard! üéâ
                    </h3>
                    <p className="text-gray-600">
                      Check your email for your free eBook and confirmation
                      link.
                    </p>
                    <Badge
                      variant="secondary"
                      className="bg-green-100 text-green-800"
                    >
                      Subscription Confirmed
                    </Badge>
                  </motion.div>
                )}
              </CardContent>
            </Card>
          </motion.div>
        </motion.div>
      )}
    </AnimatePresence>
  );
}
```

##### How It Works

This elegant timed popup combines several advanced features for maximum engagement:

1. **Smart Timing**: Appears after 8 seconds to allow users to engage with content first
2. **Glassmorphism Design**: Uses backdrop blur and transparency for a modern aesthetic
3. **Countdown Timer**: Creates urgency with a real-time countdown for limited offers
4. **Smooth Animations**: Framer Motion provides spring-based animations for natural feel
5. **Local Storage**: Prevents popup from showing again once dismissed or completed
6. **Form Validation**: Real-time email validation with loading states
7. **Success State**: Animated confirmation with auto-close functionality

##### Customization Options

##### Trigger Variations

```tsx
// Scroll-based trigger
useEffect(() => {
  const handleScroll = () => {
    const scrollPercent =
      (window.scrollY / (document.body.scrollHeight - window.innerHeight)) *
      100;
    if (scrollPercent > 50 && !localStorage.getItem("newsletter-popup-shown")) {
      setIsVisible(true);
    }
  };

  window.addEventListener("scroll", handleScroll);
  return () => window.removeEventListener("scroll", handleScroll);
}, []);

// Exit intent trigger
useEffect(() => {
  const handleMouseLeave = (e) => {
    if (e.clientY <= 0 && !localStorage.getItem("newsletter-popup-shown")) {
      setIsVisible(true);
    }
  };

  document.addEventListener("mouseleave", handleMouseLeave);
  return () => document.removeEventListener("mouseleave", handleMouseLeave);
}, []);
```

##### Different Incentives

```tsx
const incentives = [
  {
    icon: Gift,
    text: "Free eBook",
    description: "Ultimate Guide to Web Development",
  },
  {
    icon: Percent,
    text: "20% Discount",
    description: "On your first purchase",
  },
  {
    icon: Star,
    text: "Exclusive Content",
    description: "Premium tutorials & resources",
  },
  {
    icon: Zap,
    text: "Early Access",
    description: "Be first to see new features",
  },
];
```

<BackToTop />

##### Example 2: Scroll-Triggered Side Slide-in with Progress Bar

```tsx
import { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Progress } from "@/components/ui/progress";
import { Badge } from "@/components/ui/badge";
import {
  X,
  Mail,
  TrendingUp,
  Users,
  BookOpen,
  ArrowRight,
  CheckCircle,
} from "lucide-react";
import { motion, AnimatePresence } from "framer-motion";

// Scroll-triggered slide-in newsletter that appears at specific scroll depth
export default function ScrollTriggeredSlideIn() {
  const [isVisible, setIsVisible] = useState(false);
  const [email, setEmail] = useState("");
  const [isSubmitted, setIsSubmitted] = useState(false);
  const [scrollProgress, setScrollProgress] = useState(0);
  const [isLoading, setIsLoading] = useState(false);
  const [step, setStep] = useState(1);

  // Monitors scroll progress and triggers popup at 60% scroll depth
  useEffect(() => {
    // Calculates current scroll percentage and updates visibility
    const handleScroll = () => {
      const totalHeight = document.body.scrollHeight - window.innerHeight;
      const progress = (window.scrollY / totalHeight) * 100;
      setScrollProgress(progress);

      // Show when user scrolls 60% and hasn't been shown before
      if (
        progress > 60 &&
        !isVisible &&
        !localStorage.getItem("newsletter-slide-shown")
      ) {
        setIsVisible(true);
      }
    };

    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, [isVisible]);

  // @collapse
  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);

    try {
      // Simulate API call
      await new Promise((resolve) => setTimeout(resolve, 2000));

      setIsSubmitted(true);
      localStorage.setItem("newsletter-slide-shown", "true");

      // Auto-close after 4 seconds
      setTimeout(() => {
        setIsVisible(false);
      }, 4000);
    } catch (error) {
      console.error("Subscription failed:", error);
    } finally {
      setIsLoading(false);
    }
  };

  const handleClose = () => {
    setIsVisible(false);
    localStorage.setItem("newsletter-slide-shown", "true");
  };

  const stats = [
    { icon: Users, value: "25K+", label: "Subscribers" },
    { icon: BookOpen, value: "100+", label: "Articles" },
    { icon: TrendingUp, value: "95%", label: "Satisfaction" },
  ];

  return (
    <AnimatePresence>
      {isVisible && (
        <motion.div
          initial={{ x: "100%" }}
          animate={{ x: 0 }}
          exit={{ x: "100%" }}
          transition={{ type: "spring", damping: 20, stiffness: 100 }}
          className="fixed right-0 top-1/2 transform -translate-y-1/2 z-50 w-80 bg-white shadow-2xl rounded-l-2xl border-l border-t border-b border-gray-200"
        >
          {/* Progress Bar */}
          <div className="absolute top-0 left-0 right-0 h-1 bg-gray-100 rounded-tl-2xl overflow-hidden">
            <motion.div
              initial={{ width: 0 }}
              animate={{ width: `${scrollProgress}%` }}
              className="h-full bg-gradient-to-r from-blue-500 to-purple-500"
            />
          </div>

          <div className="p-6 relative">
            {/* Close Button */}
            <Button
              variant="ghost"
              size="sm"
              onClick={handleClose}
              className="absolute top-4 right-4 h-8 w-8 p-0 hover:bg-gray-100"
            >
              <X className="h-4 w-4" />
            </Button>

            {!isSubmitted ? (
              <div className="space-y-5">
                {/* Header */}
                <div className="space-y-2">
                  <div className="flex items-center gap-2">
                    <div className="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center">
                      <Mail className="h-4 w-4 text-white" />
                    </div>
                    <Badge variant="secondary" className="text-xs">
                      {Math.round(scrollProgress)}% Progress
                    </Badge>
                  </div>
                  <h3 className="text-lg font-bold text-gray-900">
                    You're {100 - Math.round(scrollProgress)}% away from the
                    end!
                  </h3>
                  <p className="text-sm text-gray-600">
                    Join our community and never miss valuable insights
                  </p>
                </div>

                {/* Stats */}
                <div className="grid grid-cols-3 gap-3">
                  {stats.map((stat, index) => (
                    <motion.div
                      key={index}
                      initial={{ opacity: 0, y: 20 }}
                      animate={{ opacity: 1, y: 0 }}
                      transition={{ delay: index * 0.1 }}
                      className="text-center p-2 bg-gray-50 rounded-lg"
                    >
                      <stat.icon className="h-4 w-4 mx-auto text-blue-600 mb-1" />
                      <div className="text-sm font-bold text-gray-900">
                        {stat.value}
                      </div>
                      <div className="text-xs text-gray-600">{stat.label}</div>
                    </motion.div>
                  ))}
                </div>

                {/* Multi-step Form */}
                <div className="space-y-3">
                  {step === 1 && (
                    <motion.div
                      initial={{ opacity: 0, x: 20 }}
                      animate={{ opacity: 1, x: 0 }}
                      className="space-y-3"
                    >
                      <label className="text-sm font-medium text-gray-700">
                        What interests you most?
                      </label>
                      <div className="space-y-2">
                        {[
                          "Web Development",
                          "Design Tips",
                          "Career Growth",
                          "Tech News",
                        ].map((interest) => (
                          <button
                            key={interest}
                            onClick={() => setStep(2)}
                            className="w-full text-left p-2 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors text-sm"
                          >
                            {interest}
                          </button>
                        ))}
                      </div>
                    </motion.div>
                  )}

                  {step === 2 && (
                    <motion.div
                      initial={{ opacity: 0, x: 20 }}
                      animate={{ opacity: 1, x: 0 }}
                      className="space-y-3"
                    >
                      <form onSubmit={handleSubmit} className="space-y-3">
                        <div>
                          <label className="text-sm font-medium text-gray-700 block mb-1">
                            Email Address
                          </label>
                          <Input
                            type="email"
                            placeholder="your@email.com"
                            value={email}
                            onChange={(e) => setEmail(e.target.value)}
                            required
                            className="text-sm"
                          />
                        </div>

                        <Button
                          type="submit"
                          disabled={isLoading || !email}
                          className="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white text-sm"
                        >
                          {isLoading ? (
                            <div className="flex items-center gap-2">
                              <div className="animate-spin rounded-full h-3 w-3 border-2 border-white border-t-transparent"></div>
                              Subscribing...
                            </div>
                          ) : (
                            <div className="flex items-center gap-2">
                              Subscribe Now
                              <ArrowRight className="h-3 w-3" />
                            </div>
                          )}
                        </Button>
                      </form>

                      <button
                        onClick={() => setStep(1)}
                        className="text-xs text-gray-500 hover:text-gray-700 underline"
                      >
                        ‚Üê Change interests
                      </button>
                    </motion.div>
                  )}
                </div>

                {/* Footer */}
                <div className="text-center space-y-2">
                  <div className="text-xs text-gray-500">
                    Join the community that's already ahead
                  </div>
                  <div className="flex justify-center gap-1">
                    {[...Array(5)].map((_, i) => (
                      <div
                        key={i}
                        className="w-1 h-1 bg-yellow-400 rounded-full"
                      ></div>
                    ))}
                    <span className="text-xs text-gray-600 ml-1">
                      4.9/5 rating
                    </span>
                  </div>
                </div>
              </div>
            ) : (
              <motion.div
                initial={{ scale: 0.8, opacity: 0 }}
                animate={{ scale: 1, opacity: 1 }}
                className="text-center space-y-4"
              >
                <div className="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mx-auto">
                  <CheckCircle className="h-6 w-6 text-green-600" />
                </div>
                <div>
                  <h3 className="font-bold text-gray-900">You're In! üéâ</h3>
                  <p className="text-sm text-gray-600 mt-1">
                    Welcome to our community of learners
                  </p>
                </div>
                <Badge className="bg-green-100 text-green-800">
                  Subscription Confirmed
                </Badge>
              </motion.div>
            )}
          </div>
        </motion.div>
      )}
    </AnimatePresence>
  );
}
```

##### How It Works

This scroll-triggered slide-in component features several sophisticated elements:

1. **Scroll Progress Tracking**: Real-time calculation of reading progress with visual indicator
2. **Smart Triggering**: Appears when user has read 60% of content, indicating engagement
3. **Multi-step Interaction**: Two-step process to increase engagement and personalization
4. **Dynamic Content**: Progress-based messaging that adapts to user's scroll position
5. **Social Proof**: Real-time stats and ratings to build trust and credibility
6. **Smooth Animations**: Spring-based slide animations for natural movement
7. **Interest Targeting**: Collects user preferences for better segmentation

##### Customization Options

##### Different Trigger Points

```tsx
// Multiple trigger conditions
const triggerConditions = {
  scrollPercent: 75,
  timeOnPage: 30000, // 30 seconds
  elementsViewed: ["#intro", "#main-content"],
  exitIntent: true,
};

// Advanced scroll tracking
const useAdvancedScrollTracking = () => {
  const [metrics, setMetrics] = useState({
    scrollSpeed: 0,
    readingTime: 0,
    engagementScore: 0,
  });

  // @collapse
  useEffect(() => {
    let lastScrollTime = Date.now();
    let lastScrollPosition = 0;

    const handleScroll = () => {
      const now = Date.now();
      const scrollPosition = window.scrollY;
      const scrollSpeed =
        Math.abs(scrollPosition - lastScrollPosition) / (now - lastScrollTime);

      setMetrics((prev) => ({
        ...prev,
        scrollSpeed,
        readingTime: prev.readingTime + (now - lastScrollTime),
        engagementScore: calculateEngagement(scrollSpeed, prev.readingTime),
      }));

      lastScrollTime = now;
      lastScrollPosition = scrollPosition;
    };

    window.addEventListener("scroll", handleScroll);
    return () => window.removeEventListener("scroll", handleScroll);
  }, []);

  return metrics;
};
```

##### Personalization Options

```tsx
// Dynamic content based on user behavior
const getPersonalizedContent = (scrollProgress, timeOnPage) => {
  if (scrollProgress > 80) {
    return {
      title: "Almost done! üìö",
      message: "You're clearly engaged - get more content like this",
      incentive: "Exclusive in-depth guides",
    };
  } else if (timeOnPage > 60000) {
    return {
      title: "Taking your time? ü§î",
      message: "Get bite-sized content that fits your pace",
      incentive: "Weekly 5-minute reads",
    };
  }
  return defaultContent;
};
```

<BackToTop />

##### Example 3: Bold Colorful Side-Entry with Gamification

```tsx
import { useState, useEffect } from "react";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Badge } from "@/components/ui/badge";
import {
  X,
  Mail,
  Trophy,
  Star,
  Zap,
  Target,
  Users,
  Gift,
  ArrowRight,
  Sparkles,
} from "lucide-react";
import { motion, AnimatePresence } from "framer-motion";

// Gamified newsletter popup with achievement system and colorful animations
export default function GamifiedColorfulPopup() {
  const [isVisible, setIsVisible] = useState(false);
  const [email, setEmail] = useState("");
  const [isSubmitted, setIsSubmitted] = useState(false);
  const [currentLevel, setCurrentLevel] = useState(1);
  const [points, setPoints] = useState(0);
  const [achievements, setAchievements] = useState([]);
  const [isLoading, setIsLoading] = useState(false);
  const [showConfetti, setShowConfetti] = useState(false);

  // Initializes popup visibility after page load delay
  useEffect(() => {
    const timer = setTimeout(() => {
      if (!localStorage.getItem("newsletter-gamified-shown")) {
        setIsVisible(true);
        // Add entrance points
        setPoints(10);
        addAchievement(
          "first-visit",
          "First Visitor",
          "Welcome to our community!"
        );
      }
    }, 5000);

    return () => clearTimeout(timer);
  }, []);

  const addAchievement = (id, title, description) => {
    setAchievements((prev) => [
      ...prev,
      { id, title, description, timestamp: Date.now() },
    ]);
    setShowConfetti(true);
    setTimeout(() => setShowConfetti(false), 2000);
  };

  const handleEmailInput = (value) => {
    setEmail(value);

    // Award points for email input
    if (
      value.includes("@") &&
      !achievements.find((a) => a.id === "email-entry")
    ) {
      setPoints((prev) => prev + 25);
      addAchievement("email-entry", "Email Expert", "Valid email entered!");
    }
  };

  // @collapse
  const handleSubmit = async (e) => {
    e.preventDefault();
    setIsLoading(true);

    try {
      // Simulate API call
      await new Promise((resolve) => setTimeout(resolve, 2000));

      // Award subscription points
      setPoints((prev) => prev + 100);
      setCurrentLevel(2);
      addAchievement(
        "subscriber",
        "Newsletter Ninja",
        "Successfully subscribed!"
      );

      setIsSubmitted(true);
      localStorage.setItem("newsletter-gamified-shown", "true");

      // Auto-close after showing success
      setTimeout(() => {
        setIsVisible(false);
      }, 5000);
    } catch (error) {
      console.error("Subscription failed:", error);
    } finally {
      setIsLoading(false);
    }
  };

  const handleClose = () => {
    setIsVisible(false);
    localStorage.setItem("newsletter-gamified-shown", "true");
  };

  const levelProgress = points % 100;
  const nextLevelPoints = 100 - levelProgress;

  return (
    <AnimatePresence>
      {isVisible && (
        <>
          {/* Confetti Effect */}
          {showConfetti && (
            <div className="fixed inset-0 pointer-events-none z-60">
              {[...Array(20)].map((_, i) => (
                <motion.div
                  key={i}
                  initial={{
                    x: Math.random() * window.innerWidth,
                    y: -10,
                    rotate: 0,
                    scale: 1,
                  }}
                  animate={{
                    y: window.innerHeight + 10,
                    rotate: 360 * (Math.random() > 0.5 ? 1 : -1),
                    scale: 0,
                  }}
                  transition={{
                    duration: 2 + Math.random() * 2,
                    ease: "easeOut",
                  }}
                  className="absolute w-3 h-3 rounded-full"
                  style={{
                    backgroundColor: [
                      "#ff6b6b",
                      "#4ecdc4",
                      "#45b7d1",
                      "#96ceb4",
                      "#ffeaa7",
                    ][Math.floor(Math.random() * 5)],
                  }}
                />
              ))}
            </div>
          )}

          <motion.div
            initial={{ x: "-100%", rotate: -5 }}
            animate={{ x: 0, rotate: 0 }}
            exit={{ x: "-100%", rotate: -5 }}
            transition={{ type: "spring", damping: 15, stiffness: 100 }}
            className="fixed left-0 top-1/2 transform -translate-y-1/2 z-50 w-96"
          >
            <div className="bg-gradient-to-br from-purple-600 via-pink-600 to-orange-500 p-1 rounded-r-3xl shadow-2xl">
              <div className="bg-white rounded-r-3xl p-6 relative overflow-hidden">
                {/* Background Pattern */}
                <div className="absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-purple-100 to-transparent rounded-full -mr-16 -mt-16"></div>
                <div className="absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-pink-100 to-transparent rounded-full -ml-12 -mb-12"></div>

                {/* Close Button */}
                <Button
                  variant="ghost"
                  size="sm"
                  onClick={handleClose}
                  className="absolute top-4 right-4 h-8 w-8 p-0 hover:bg-gray-100 z-10"
                >
                  <X className="h-4 w-4" />
                </Button>

                {!isSubmitted ? (
                  <div className="relative space-y-5">
                    {/* Gamification Header */}
                    <div className="space-y-3">
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-2">
                          <div className="w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center">
                            <Trophy className="h-5 w-5 text-white" />
                          </div>
                          <div>
                            <div className="flex items-center gap-1">
                              <span className="font-bold text-gray-900">
                                Level {currentLevel}
                              </span>
                              <Badge
                                variant="secondary"
                                className="text-xs bg-purple-100 text-purple-800"
                              >
                                {points} XP
                              </Badge>
                            </div>
                            <div className="text-xs text-gray-600">
                              {nextLevelPoints} XP to next level
                            </div>
                          </div>
                        </div>
                      </div>

                      {/* Level Progress Bar */}
                      <div className="space-y-1">
                        <div className="h-2 bg-gray-200 rounded-full overflow-hidden">
                          <motion.div
                            initial={{ width: 0 }}
                            animate={{ width: `${levelProgress}%` }}
                            className="h-full bg-gradient-to-r from-purple-500 to-pink-500"
                            transition={{ duration: 0.5 }}
                          />
                        </div>
                      </div>

                      <h3 className="text-xl font-bold text-gray-900">
                        üöÄ Join the Knowledge Quest!
                      </h3>
                      <p className="text-sm text-gray-600">
                        Unlock exclusive content and earn rewards as you learn
                      </p>
                    </div>

                    {/* Recent Achievements */}
                    {achievements.length > 0 && (
                      <div className="space-y-2">
                        <h4 className="text-sm font-semibold text-gray-700 flex items-center gap-1">
                          <Star className="h-4 w-4 text-yellow-500" />
                          Recent Achievements
                        </h4>
                        <div className="space-y-1 max-h-20 overflow-y-auto">
                          {achievements.slice(-2).map((achievement) => (
                            <motion.div
                              key={achievement.id}
                              initial={{ opacity: 0, x: -20 }}
                              animate={{ opacity: 1, x: 0 }}
                              className="flex items-center gap-2 p-2 bg-yellow-50 rounded-lg text-xs"
                            >
                              <Trophy className="h-3 w-3 text-yellow-600" />
                              <div>
                                <div className="font-medium text-yellow-800">
                                  {achievement.title}
                                </div>
                                <div className="text-yellow-600">
                                  {achievement.description}
                                </div>
                              </div>
                            </motion.div>
                          ))}
                        </div>
                      </div>
                    )}

                    {/* Rewards Preview */}
                    <div className="grid grid-cols-2 gap-3">
                      <div className="p-3 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg text-center">
                        <Users className="h-6 w-6 mx-auto text-blue-600 mb-1" />
                        <div className="text-xs font-medium text-blue-800">
                          Community Access
                        </div>
                        <div className="text-xs text-blue-600">+50 XP</div>
                      </div>
                      <div className="p-3 bg-gradient-to-br from-green-50 to-teal-50 rounded-lg text-center">
                        <Gift className="h-6 w-6 mx-auto text-green-600 mb-1" />
                        <div className="text-xs font-medium text-green-800">
                          Free Resources
                        </div>
                        <div className="text-xs text-green-600">+100 XP</div>
                      </div>
                    </div>

                    {/* Subscription Form */}
                    <form onSubmit={handleSubmit} className="space-y-3">
                      <div className="relative">
                        <Input
                          type="email"
                          placeholder="Enter email to continue quest..."
                          value={email}
                          onChange={(e) => handleEmailInput(e.target.value)}
                          required
                          className="pr-10 border-2 border-gray-200 focus:border-purple-500 transition-colors"
                        />
                        <div className="absolute right-3 top-1/2 transform -translate-y-1/2">
                          {email.includes("@") ? (
                            <motion.div
                              initial={{ scale: 0 }}
                              animate={{ scale: 1 }}
                              className="w-5 h-5 bg-green-500 rounded-full flex items-center justify-center"
                            >
                              <Target className="h-3 w-3 text-white" />
                            </motion.div>
                          ) : (
                            <Mail className="h-4 w-4 text-gray-400" />
                          )}
                        </div>
                      </div>

                      <Button
                        type="submit"
                        disabled={isLoading || !email}
                        className="w-full bg-gradient-to-r from-purple-600 via-pink-600 to-orange-500 hover:from-purple-700 hover:via-pink-700 hover:to-orange-600 text-white font-bold py-3 rounded-xl transition-all duration-200 transform hover:scale-105"
                      >
                        {isLoading ? (
                          <div className="flex items-center gap-2">
                            <div className="animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"></div>
                            Joining Quest...
                          </div>
                        ) : (
                          <div className="flex items-center gap-2">
                            <Zap className="h-4 w-4" />
                            Start My Knowledge Quest (+100 XP)
                            <ArrowRight className="h-4 w-4" />
                          </div>
                        )}
                      </Button>
                    </form>

                    {/* Trust Indicators */}
                    <div className="flex items-center justify-center gap-4 text-xs text-gray-500">
                      <span>üîí Secure</span>
                      <span>üìß No spam</span>
                      <span>üéÅ Free rewards</span>
                    </div>
                  </div>
                ) : (
                  <motion.div
                    initial={{ scale: 0.8, opacity: 0 }}
                    animate={{ scale: 1, opacity: 1 }}
                    className="relative text-center space-y-4"
                  >
                    <motion.div
                      animate={{
                        rotate: [0, 10, -10, 0],
                        scale: [1, 1.1, 1],
                      }}
                      transition={{
                        duration: 2,
                        repeat: Infinity,
                        repeatType: "reverse",
                      }}
                      className="w-16 h-16 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center mx-auto"
                    >
                      <Trophy className="h-8 w-8 text-white" />
                    </motion.div>

                    <div>
                      <h3 className="text-xl font-bold text-gray-900 flex items-center justify-center gap-2">
                        Quest Accepted!{" "}
                        <Sparkles className="h-5 w-5 text-yellow-500" />
                      </h3>
                      <p className="text-sm text-gray-600 mt-2">
                        You've earned <strong>{points} XP</strong> and reached{" "}
                        <strong>Level {currentLevel}</strong>!
                      </p>
                    </div>

                    <div className="space-y-2">
                      <Badge className="bg-gradient-to-r from-purple-500 to-pink-500 text-white">
                        üèÜ Newsletter Ninja Unlocked
                      </Badge>
                      <div className="text-xs text-gray-600">
                        Check your email for your first quest reward!
                      </div>
                    </div>
                  </motion.div>
                )}
              </div>
            </div>
          </motion.div>
        </>
      )}
    </AnimatePresence>
  );
}
```

##### How It Works

This gamified popup transforms newsletter subscription into an engaging game-like experience:

1. **Experience Points System**: Users earn XP for various interactions (visiting, entering email, subscribing)
2. **Achievement System**: Real-time achievements with visual feedback and confetti animations
3. **Level Progression**: Visual progress bars and level-up notifications create engagement
4. **Interactive Feedback**: Immediate visual responses to user actions with icons and animations
5. **Reward Preview**: Shows what users will unlock to incentivize subscription
6. **Colorful Gradient Design**: Bold, vibrant colors that stand out and create excitement
7. **Micro-interactions**: Small delightful animations throughout the user journey

##### Customization Options

##### Achievement System Expansion

```tsx
// @collapse
const achievementTypes = {
  "speed-reader": {
    trigger: (scrollSpeed) => scrollSpeed > 5,
    reward: 25,
    title: "Speed Reader",
    description: "Read content at lightning speed!",
  },
  "careful-reader": {
    trigger: (timeOnPage) => timeOnPage > 300000, // 5 minutes
    reward: 50,
    title: "Careful Reader",
    description: "Took time to digest the content",
  },
  "social-sharer": {
    trigger: (shareAction) => shareAction,
    reward: 75,
    title: "Social Butterfly",
    description: "Shared content with others",
  },
};

const checkAchievements = (userMetrics) => {
  Object.entries(achievementTypes).forEach(([id, achievement]) => {
    if (achievement.trigger(userMetrics) && !hasAchievement(id)) {
      addAchievement(
        id,
        achievement.title,
        achievement.description,
        achievement.reward
      );
    }
  });
};
```

##### Dynamic Rewards System

```tsx
const rewardTiers = [
  { level: 1, rewards: ["Welcome Guide", "Community Access"] },
  { level: 2, rewards: ["Premium Templates", "Expert Tips"] },
  { level: 3, rewards: ["1-on-1 Consultation", "VIP Content"] },
  { level: 5, rewards: ["Lifetime Access", "Personal Mentor"] },
];

const getAvailableRewards = (currentLevel) => {
  return rewardTiers
    .filter((tier) => tier.level <= currentLevel)
    .flatMap((tier) => tier.rewards);
};
```

<BackToTop />
