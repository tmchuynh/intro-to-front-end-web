import BackToTop from "@/components/BackToTop";

# The Blog Page

## Table of Contents

## Introduction

The blog page is a central part of any blog website, where users can read and explore various blog posts. It typically includes a list of blog cards, each representing a different post. This page can be designed to showcase the latest posts, popular posts, or posts from specific categories. It is essential to create an engaging and user-friendly layout that encourages visitors to read more.

## Fetching Blog Posts from `.mdx` Files

To fetch blog posts from `.mdx` files, we can use the `getStaticProps` function in Next.js. This function allows us to read the contents of the `.mdx` files and pass them as props to the blog page component.

```typescript
import fs from "fs";
import path from "path";
import matter from "gray-matter";
import { GetStaticProps } from "next";
import { BlogPost } from "@/types/blog";
export const getStaticProps: GetStaticProps = async () => {
  const files = fs.readdirSync(
    path.join("src", "app", "blog-website", "blog-posts")
  );

  const posts = files.map((fileName) => {
    const filePath = path.join(
      "src",
      "app",
      "blog-website",
      "blog-posts",
      fileName
    );
    const fileContent = fs.readFileSync(filePath, "utf-8");
    const { data } = matter(fileContent);

    return {
      ...data,
      slug: fileName.replace(".mdx", ""),
    } as BlogPost;
  });

  return {
    props: {
      posts,
    },
  };
};
```

## Displaying Blog Cards

By using the fetched blog posts, we can create a list of blog cards. Each card will display the title, description, and a link to read more about the post.

Here, we need to iterate over the `posts` array and render a card for each post. We can use a simple card component that takes the post data as props.

**NOTE**

> Make sure to visit [Creating the Blog Card Component](/blog-website/creating-the-components/blog-cards) to learn how to create the blog card component if you haven't done so already.

## Blog Page Component

Finally, we can create the main blog page component that uses the `getStaticProps` function to fetch the posts and render the blog cards.

```typescript
import { GetStaticProps } from "next";
import { BlogPost } from "@/types/blog";
import BlogCard from "@/components/BlogCard";
import BackToTop from "@/components/BackToTop";
const BlogPage = ({ posts }: { posts: BlogPost[] }) => {
  return (
    <div className="blog-page">
      <h1>Blog</h1>
      <div className="blog-cards">
        {posts.map((post) => (
          <BlogCard key={post.slug} post={post} />
        ))}
      </div>
      <BackToTop />
    </div>
  );
};
export default BlogPage;
```

<BackToTop />

## Optional Enhancements

### Pagination

To enhance the blog page, you can implement pagination to display a limited number of posts per page. This can be done by using query parameters to determine which posts to display based on the current page.

#### Example #1: Minimal Pagination

```tsx
import React, { useState } from "react";
import { BlogPost } from "@/types/blog";
import BlogCard from "@/components/BlogCard";

interface PaginatedBlogProps {
  posts: BlogPost[];
  postsPerPage?: number;
}

const PaginatedBlog: React.FC<PaginatedBlogProps> = ({ 
  posts, 
  postsPerPage = 6 
}) => {
  const [currentPage, setCurrentPage] = useState(1);
  
  const totalPages = Math.ceil(posts.length / postsPerPage);
  const startIndex = (currentPage - 1) * postsPerPage;
  const currentPosts = posts.slice(startIndex, startIndex + postsPerPage);
  
  const goToPage = (page: number) => {
    setCurrentPage(Math.max(1, Math.min(page, totalPages)));
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };
  
  return (
    <div className="space-y-8">
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {currentPosts.map((post) => (
          <BlogCard key={post.slug} post={post} />
        ))}
      </div>
      
      {totalPages > 1 && (
        <div className="flex justify-center items-center space-x-4">
          <button
            onClick={() => goToPage(currentPage - 1)}
            disabled={currentPage === 1}
            className="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300 transition"
          >
            Previous
          </button>
          
          <span className="text-gray-600">
            Page {currentPage} of {totalPages}
          </span>
          
          <button
            onClick={() => goToPage(currentPage + 1)}
            disabled={currentPage === totalPages}
            className="px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-700 transition"
          >
            Next
          </button>
        </div>
      )}
    </div>
  );
};

export default PaginatedBlog;
```

##### How It Works

The minimal pagination component divides the blog posts into pages and provides simple Previous/Next navigation. It calculates the total number of pages based on the posts array length and the desired posts per page. The component maintains the current page state and slices the posts array to show only the relevant posts for the current page.

##### Customization Options

- **postsPerPage**: Adjust the number of posts displayed per page (default: 6)
- **Styling**: Customize button colors, spacing, and hover effects
- **Scroll behavior**: Modify the scroll-to-top behavior when changing pages
- **Loading states**: Add loading spinners during page transitions

<BackToTop />

#### Example #2: Displays Page Numbers

```tsx
import React, { useState } from "react";
import { BlogPost } from "@/types/blog";
import BlogCard from "@/components/BlogCard";

interface AdvancedPaginationProps {
  posts: BlogPost[];
  postsPerPage?: number;
}

const AdvancedPagination: React.FC<AdvancedPaginationProps> = ({ 
  posts, 
  postsPerPage = 9 
}) => {
  const [currentPage, setCurrentPage] = useState(1);
  
  const totalPages = Math.ceil(posts.length / postsPerPage);
  const startIndex = (currentPage - 1) * postsPerPage;
  const currentPosts = posts.slice(startIndex, startIndex + postsPerPage);
  
  const getVisiblePages = () => {
    const delta = 2;
    const range = [];
    const rangeWithDots = [];
    
    for (let i = Math.max(2, currentPage - delta); 
         i <= Math.min(totalPages - 1, currentPage + delta); 
         i++) {
      range.push(i);
    }
    
    if (currentPage - delta > 2) {
      rangeWithDots.push(1, '...');
    } else {
      rangeWithDots.push(1);
    }
    
    rangeWithDots.push(...range);
    
    if (currentPage + delta < totalPages - 1) {
      rangeWithDots.push('...', totalPages);
    } else {
      rangeWithDots.push(totalPages);
    }
    
    return rangeWithDots;
  };
  
  const goToPage = (page: number) => {
    setCurrentPage(page);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };
  
  return (
    <div className="space-y-8">
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {currentPosts.map((post) => (
          <BlogCard key={post.slug} post={post} />
        ))}
      </div>
      
      {totalPages > 1 && (
        <div className="flex justify-center items-center space-x-2">
          <button
            onClick={() => goToPage(currentPage - 1)}
            disabled={currentPage === 1}
            className="px-3 py-2 text-gray-500 hover:text-gray-700 disabled:opacity-50"
          >
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
            </svg>
          </button>
          
          {getVisiblePages().map((page, index) => (
            <React.Fragment key={index}>
              {page === '...' ? (
                <span className="px-3 py-2 text-gray-500">...</span>
              ) : (
                <button
                  onClick={() => goToPage(page as number)}
                  className={`px-3 py-2 rounded-lg transition ${
                    currentPage === page
                      ? 'bg-blue-600 text-white'
                      : 'text-gray-700 hover:bg-gray-200'
                  }`}
                >
                  {page}
                </button>
              )}
            </React.Fragment>
          ))}
          
          <button
            onClick={() => goToPage(currentPage + 1)}
            disabled={currentPage === totalPages}
            className="px-3 py-2 text-gray-500 hover:text-gray-700 disabled:opacity-50"
          >
            <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
            </svg>
          </button>
        </div>
      )}
      
      <div className="text-center text-gray-600 text-sm">
        Showing {startIndex + 1}-{Math.min(startIndex + postsPerPage, posts.length)} of {posts.length} posts
      </div>
    </div>
  );
};

export default AdvancedPagination;
```

##### How It Works

This advanced pagination component displays individual page numbers with smart truncation using ellipsis. It shows the first page, last page, current page, and surrounding pages within a delta range. The `getVisiblePages` function calculates which page numbers to display and where to place ellipsis to keep the pagination bar compact while maintaining usability.

##### Customization Options

- **Delta range**: Adjust how many pages to show around the current page
- **Icons**: Replace arrow icons with custom designs or text
- **Results counter**: Toggle the display of "Showing X-Y of Z posts"
- **Mobile responsiveness**: Adapt the pagination for smaller screens
- **URL synchronization**: Sync pagination state with browser URL

<BackToTop />

### Search Functionality

Adding a search bar allows users to quickly find specific blog posts. You can implement this by filtering the `posts` array based on the search query entered by the user.

#### Example #1: Using a `shadcn/ui` Command component with Keyboard shortcuts

```tsx
import React, { useState, useEffect } from "react";
import { BlogPost } from "@/types/blog";
import BlogCard from "@/components/BlogCard";
import {
  Command,
  CommandEmpty,
  CommandGroup,
  CommandInput,
  CommandItem,
  CommandList,
} from "@/components/ui/command";
import {
  Dialog,
  DialogContent,
  DialogTrigger,
} from "@/components/ui/dialog";

interface CommandSearchProps {
  posts: BlogPost[];
}

const CommandSearch: React.FC<CommandSearchProps> = ({ posts }) => {
  const [open, setOpen] = useState(false);
  const [filteredPosts, setFilteredPosts] = useState(posts);
  const [searchQuery, setSearchQuery] = useState("");

  useEffect(() => {
    const down = (e: KeyboardEvent) => {
      if (e.key === "k" && (e.metaKey || e.ctrlKey)) {
        e.preventDefault();
        setOpen((open) => !open);
      }
    };
    
    document.addEventListener("keydown", down);
    return () => document.removeEventListener("keydown", down);
  }, []);

  const handleSearch = (query: string) => {
    setSearchQuery(query);
    const filtered = posts.filter(
      (post) =>
        post.title.toLowerCase().includes(query.toLowerCase()) ||
        post.description?.toLowerCase().includes(query.toLowerCase()) ||
        post.tags?.some(tag => tag.toLowerCase().includes(query.toLowerCase()))
    );
    setFilteredPosts(filtered);
  };

  const handleSelectPost = (post: BlogPost) => {
    setOpen(false);
    // Navigate to post or perform action
    window.location.href = `/blog/${post.slug}`;
  };

  return (
    <div className="space-y-6">
      <div className="flex justify-between items-center">
        <h1 className="text-3xl font-bold">Blog Posts</h1>
        <Dialog open={open} onOpenChange={setOpen}>
          <DialogTrigger asChild>
            <button className="flex items-center space-x-2 px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition">
              <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
              <span>Search posts...</span>
              <kbd className="pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100">
                <span className="text-xs">âŒ˜</span>K
              </kbd>
            </button>
          </DialogTrigger>
          <DialogContent className="p-0">
            <Command className="rounded-lg border shadow-md">
              <CommandInput 
                placeholder="Search blog posts..." 
                onValueChange={handleSearch}
              />
              <CommandList>
                <CommandEmpty>No posts found.</CommandEmpty>
                <CommandGroup heading="Blog Posts">
                  {posts
                    .filter(post => 
                      post.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                      post.description?.toLowerCase().includes(searchQuery.toLowerCase())
                    )
                    .slice(0, 10)
                    .map((post) => (
                      <CommandItem
                        key={post.slug}
                        onSelect={() => handleSelectPost(post)}
                        className="cursor-pointer"
                      >
                        <div className="flex flex-col">
                          <span className="font-medium">{post.title}</span>
                          <span className="text-sm text-gray-500 truncate">
                            {post.description}
                          </span>
                        </div>
                      </CommandItem>
                    ))}
                </CommandGroup>
              </CommandList>
            </Command>
          </DialogContent>
        </Dialog>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {filteredPosts.map((post) => (
          <BlogCard key={post.slug} post={post} />
        ))}
      </div>
      
      {filteredPosts.length === 0 && searchQuery && (
        <div className="text-center py-12">
          <p className="text-gray-500">No posts found for "{searchQuery}"</p>
          <button 
            onClick={() => handleSearch("")}
            className="mt-2 text-blue-600 hover:text-blue-800"
          >
            Clear search
          </button>
        </div>
      )}
    </div>
  );
};

export default CommandSearch;
```

##### How It Works

This component uses shadcn/ui's Command component to create a powerful search interface with keyboard shortcuts. Pressing Cmd+K (or Ctrl+K) opens a search dialog where users can quickly find posts by title, description, or tags. The search filters posts in real-time and displays results in a clean, accessible format.

##### Customization Options

- **Keyboard shortcuts**: Modify the key combination or add additional shortcuts
- **Search fields**: Include/exclude different post properties in search
- **Result limit**: Adjust the maximum number of search results shown
- **Highlighting**: Add text highlighting for search matches
- **Categories**: Group search results by post categories

#### Example #2: Search with Debounce

```tsx
import React, { useState, useEffect, useMemo } from "react";
import { BlogPost } from "@/types/blog";
import BlogCard from "@/components/BlogCard";

interface DebouncedSearchProps {
  posts: BlogPost[];
}

const useDebounce = (value: string, delay: number): string => {
  const [debouncedValue, setDebouncedValue] = useState(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);

  return debouncedValue;
};

const DebouncedSearch: React.FC<DebouncedSearchProps> = ({ posts }) => {
  const [searchTerm, setSearchTerm] = useState("");
  const [isSearching, setIsSearching] = useState(false);
  const debouncedSearchTerm = useDebounce(searchTerm, 300);

  const filteredPosts = useMemo(() => {
    if (!debouncedSearchTerm.trim()) return posts;
    
    setIsSearching(true);
    
    const filtered = posts.filter((post) => {
      const searchLower = debouncedSearchTerm.toLowerCase();
      return (
        post.title.toLowerCase().includes(searchLower) ||
        post.description?.toLowerCase().includes(searchLower) ||
        post.author?.toLowerCase().includes(searchLower) ||
        post.tags?.some(tag => tag.toLowerCase().includes(searchLower)) ||
        post.category?.toLowerCase().includes(searchLower)
      );
    });
    
    setTimeout(() => setIsSearching(false), 100);
    return filtered;
  }, [debouncedSearchTerm, posts]);

  const highlightText = (text: string, highlight: string) => {
    if (!highlight.trim()) return text;
    
    const regex = new RegExp(`(${highlight})`, 'gi');
    const parts = text.split(regex);
    
    return parts.map((part, index) =>
      regex.test(part) ? (
        <mark key={index} className="bg-yellow-200 px-1 rounded">
          {part}
        </mark>
      ) : (
        part
      )
    );
  };

  const clearSearch = () => {
    setSearchTerm("");
  };

  return (
    <div className="space-y-6">
      <div className="relative max-w-md mx-auto">
        <div className="relative">
          <input
            type="text"
            placeholder="Search blog posts..."
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
            className="w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
          />
          <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg className="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
          </div>
          {searchTerm && (
            <button
              onClick={clearSearch}
              className="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600"
            >
              <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          )}
        </div>
        
        {isSearching && (
          <div className="absolute top-full left-1/2 transform -translate-x-1/2 mt-2">
            <div className="flex items-center space-x-2 text-sm text-gray-500">
              <div className="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500"></div>
              <span>Searching...</span>
            </div>
          </div>
        )}
      </div>

      <div className="text-center">
        <p className="text-gray-600">
          {searchTerm ? (
            <>
              Found {filteredPosts.length} post{filteredPosts.length !== 1 ? 's' : ''} 
              {' '}for "{highlightText(searchTerm, searchTerm)}"
            </>
          ) : (
            `Showing all ${posts.length} posts`
          )}
        </p>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {filteredPosts.map((post) => (
          <BlogCard 
            key={post.slug} 
            post={{
              ...post,
              title: highlightText(post.title, debouncedSearchTerm),
              description: post.description ? highlightText(post.description, debouncedSearchTerm) : undefined
            }} 
          />
        ))}
      </div>

      {filteredPosts.length === 0 && searchTerm && (
        <div className="text-center py-12">
          <div className="max-w-md mx-auto">
            <svg className="w-16 h-16 text-gray-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={1} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
            <h3 className="text-lg font-medium text-gray-900 mb-2">No posts found</h3>
            <p className="text-gray-500 mb-4">
              Try adjusting your search terms or browse all posts below.
            </p>
            <button 
              onClick={clearSearch}
              className="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition"
            >
              Show all posts
            </button>
          </div>
        </div>
      )}
    </div>
  );
};

export default DebouncedSearch;
```

##### How It Works

This search component implements debouncing to prevent excessive API calls or filtering operations while the user is typing. It waits 300ms after the user stops typing before performing the search. The component also includes text highlighting to show search matches, loading states, and a comprehensive empty state with suggestions.

##### Customization Options

- **Debounce delay**: Adjust the wait time before searching (default: 300ms)
- **Search fields**: Customize which post properties to include in search
- **Highlighting**: Modify the highlighting style and behavior
- **Loading indicators**: Customize the search loading state
- **Empty states**: Personalize the no-results message and actions

<BackToTop />

#### Example #3: Simple Search Bar

```tsx

```

##### How It Works

##### Customization Options

<BackToTop />

<BackToTop />

### Categories and Tags

You can categorize your blog posts and allow users to filter posts by categories or tags. This can be done by adding a category field to each post and creating a filter component that updates the displayed posts based on the selected category or tag.

#### Example #1: Using Badges

```tsx

```

##### How It Works

##### Customization Options

<BackToTop />

### Featured Posts

You can highlight certain posts as featured posts. This can be done by adding a `featured` field to the post metadata and rendering these posts in a separate section at the top of the blog page.

#### Example #1: Featured Post Displayed at the Top

```tsx

```

##### How It Works

##### Customization Options

<BackToTop />

#### Example #2: Featured Posts Section

```tsx

```

##### How It Works

##### Customization Options

<BackToTop />

### Social Sharing

You can add social sharing buttons to each blog card, allowing users to easily share posts on social media platforms. This can be done by integrating with social media APIs or using third-party libraries that provide social sharing functionality.

#### Example #1: Using a Floating Action Button (FAB) for Social Sharing

```tsx

```

##### How It Works

##### Customization Options

<BackToTop />

#### Example #2: Using a Simple Share Button

```tsx

```

##### How It Works

##### Customization Options

<BackToTop />

#### Example #3: Using a Dropdown for Social Sharing

```tsx

```

##### How It Works

##### Customization Options

<BackToTop />
