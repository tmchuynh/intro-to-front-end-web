import BackToTop from "@/components/BackToTop";

# The User Dashboard

## Table of Contents

## The `import` Statements

```tsx
// src/app/dashboard/page.tsx
"use client";

import { useAuth } from "@/app/context/authContext";
import { useCart } from "@/app/context/cartContext";
import { useCurrency } from "@/app/context/currencyContext";
import { useWishlist } from "@/app/context/wishlistContext";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import {
  ChartContainer,
  ChartTooltip,
  ChartTooltipContent,
} from "@/components/ui/chart";
import useOrderManagement from "@/hooks/useOrderManagement";
import { usePurchaseHistory } from "@/hooks/usePurchaseHistory";
import { getTierColor, getTierIcon } from "@/lib/utils/membership";
import { getStatusColor } from "@/lib/utils/orders";
import {
  CreditCard,
  Crown,
  DollarSign,
  Heart,
  History,
  LogOut,
  Mail,
  Package,
  Phone,
  PieChart as PieChartIcon,
  RefreshCw,
  Settings,
  ShoppingBag,
  Star,
  TrendingUp,
  Truck,
  User,
  Zap,
} from "lucide-react";
import Image from "next/image";
import Link from "next/link";
import { useRouter } from "next/navigation";
import { useEffect, useMemo } from "react";
import { Cell, Pie, PieChart } from "recharts";
```

### Explanation of the Code

This import architecture demonstrates enterprise-level dependency management for a complete user dashboard system that integrates authentication, e-commerce functionality, data visualization, and user experience optimization through strategic component organization and context management.

#### Multi-Context Integration Framework

The context provider imports showcase unified state management across the dashboard:

- **Authentication Context Integration**: The `useAuth` import provides centralized user authentication and session management that ensures secure dashboard access while supporting user profile data, membership status, and logout functionality throughout the interface.

- **Shopping Context Coordination**: The `useCart` and `useWishlist` imports enable real-time shopping data display that provides users with immediate visibility into their cart status and saved items while supporting seamless navigation to shopping features.

- **Currency Context Globalization**: The `useCurrency` import ensures consistent price formatting across all dashboard metrics while supporting internationalization and user preference customization for optimal financial data presentation.

#### Professional UI Component Architecture

The UI component imports demonstrate design system integration:

- **Consistent Card Layout System**: The complete Card component suite provides structured information organization that supports clear visual hierarchy while maintaining accessibility standards and responsive design for optimal dashboard presentation.

- **Interactive Element Framework**: Badge and Button components ensure consistent user interaction patterns with built-in accessibility features and responsive behavior that accommodates different user capabilities and interaction methods.

- **Data Visualization Integration**: Chart component imports (`ChartContainer`, `ChartTooltip`, `ChartTooltipContent`) enable professional data presentation that transforms complex shopping statistics into accessible visual insights for enhanced user understanding.

#### Custom Hook Integration Excellence

The custom hook imports showcase specialized dashboard functionality:

- **Order Management System**: The `useOrderManagement` hook provides order data processing that includes statistics calculation, recent order tracking, and order history management while maintaining performance optimization and data consistency.

- **Purchase History Integration**: The `usePurchaseHistory` hook enables demo data integration that supports platform demonstration while providing realistic user experience testing and development workflow enhancement.

#### Strategic Utility Function Organization

The utility imports demonstrate business logic centralization:

- **Membership Utility Integration**: Functions like `getTierColor` and `getTierIcon` provide consistent membership visualization that supports brand identity while enabling easy customization and business rule updates across the platform.

- **Status Management Utilities**: The `getStatusColor` function ensures consistent order status visualization that provides immediate user feedback while supporting accessibility requirements through proper color contrast and semantic meaning.

#### Comprehensive Icon and Visual Communication

The extensive Lucide React icon imports support intuitive dashboard navigation:

- **Financial Status Icons**: Icons like `CreditCard`, `DollarSign`, and `TrendingUp` provide immediate visual context for financial metrics while supporting universal understanding across different cultural and linguistic backgrounds.

- **User Action Icons**: Navigation and action icons (`Settings`, `LogOut`, `RefreshCw`) enable intuitive interface interaction while supporting accessibility requirements for screen readers and assistive technology.

- **Content Category Icons**: Shopping and content icons (`ShoppingBag`, `Package`, `Heart`) provide clear visual categorization that enhances user understanding while supporting different learning styles and interface preferences.

#### Modern Framework and Performance Optimization

The Next.js and React imports showcase optimal framework utilization:

- **Next.js Image Optimization**: The `Image` component import enables optimized image loading for product thumbnails and user avatars while supporting responsive design and performance optimization across different device types.

- **Navigation Performance**: Link and router imports provide optimized client-side navigation that maintains application performance while supporting SEO requirements and accessibility standards.

- **React Hook Integration**: Multiple React hooks (`useEffect`, `useMemo`) support efficient state management and performance optimization while ensuring responsive user interface updates and optimal resource utilization.

#### Data Visualization and Chart Architecture

The Recharts integration demonstrates professional data presentation:

- **Interactive Chart Components**: Pie chart imports enable dynamic data visualization that transforms shopping statistics into engaging visual insights while supporting user interaction and detailed data exploration.

- **Chart Customization Framework**: Component imports support extensive customization options that enable brand-consistent data presentation while maintaining accessibility standards and responsive design principles.

## Storing the Data

```tsx
// src/app/dashboard/page.tsx
export default function DashboardPage() {
  const { user, isLoggedIn, logout, hasMembership } = useAuth();
  const { totalItems } = useCart();
  const { wishlistCount, purchasedItems } = useWishlist();
  const { formatPrice } = useCurrency();
  const { orderStats, orders } = useOrderManagement(user?.email);
  const {
    previouslyPurchased,
    orderHistory,
    purchaseStats,
    isLoading: isPurchaseHistoryLoading,
    error: purchaseHistoryError,
    refetch: refetchPurchaseHistory,
  } = usePurchaseHistory();
  const router = useRouter();
```

### Explanation of the Code

This data management architecture demonstrates enterprise-level dashboard state coordination that integrates multiple data sources, contexts, and hooks to provide users with a unified view of their e-commerce activity while maintaining performance optimization and real-time data accuracy.

#### Centralized Authentication and User Management

The authentication data integration showcases secure user session management:

- **User Session Coordination**: The authentication context provides user data including profile information, membership status, and session state that enables personalized dashboard content while maintaining security boundaries and access control.

- **Membership Status Integration**: The `hasMembership` boolean enables conditional feature display and pricing calculations that provide personalized user experiences while supporting business logic for premium features and benefits.

- **Session Security Management**: User authentication state monitoring enables automatic logout functionality and session protection while maintaining user experience quality and security compliance standards.

#### Real-Time Shopping Data Integration

The shopping context coordination demonstrates dynamic commerce data management:

- **Cart State Monitoring**: The `totalItems` from cart context provides real-time cart status that enables immediate user feedback and navigation cues while supporting seamless shopping experience and cart management.

- **Wishlist Analytics**: The `wishlistCount` and `purchasedItems` provide wishlist data that supports user engagement tracking while enabling personalized recommendations and shopping behavior analysis.

- **Shopping Behavior Tracking**: Combined shopping data enables user activity analysis that supports business intelligence while providing users with meaningful insights into their shopping patterns.

#### Financial Data and Currency Management

The currency formatting integration showcases internationalization support:

- **Consistent Price Display**: The `formatPrice` function ensures uniform financial data presentation across all dashboard metrics while supporting multiple currencies and regional formatting preferences.

- **Localization Framework**: Currency formatting supports international users while maintaining consistency in financial data display and enabling accurate business reporting across different markets.

- **Financial Accuracy**: Centralized currency formatting prevents formatting inconsistencies while ensuring accurate financial calculations and display throughout the dashboard experience.

#### Comprehensive Order Management System

The order data integration demonstrates robust e-commerce analytics:

- **Order Statistics Processing**: The `orderStats` and `orders` provide order data including metrics calculation, recent order tracking, and historical analysis while maintaining data accuracy and performance optimization.

- **Email-Based Data Retrieval**: Order management hook utilizes user email for data association that enables secure order tracking while supporting multi-device access and user verification requirements.

- **Performance-Optimized Data Loading**: Order management system includes loading states and error handling that ensure responsive user experience while managing large datasets and network variability.

#### Demo Data Integration and Testing Support

The purchase history integration showcases development and demonstration capabilities:

- **Demo Data Management**: The purchase history hook provides realistic demo data that supports platform demonstration while maintaining clear separation between testing and production environments.

- **Comprehensive Analytics**: Demo data includes detailed statistics, loading states, and error handling that enable complete feature testing while providing realistic user experience simulation.

- **Development Workflow Support**: Demo integration supports developer testing and stakeholder demonstrations while enabling feature validation and user experience optimization.

#### Navigation and Router Integration

The router integration enables seamless dashboard navigation:

- **Programmatic Navigation**: Router access supports automated redirects and navigation control that enhances user experience while maintaining proper application flow and security boundaries.

- **Client-Side Performance**: Router integration maintains single-page application performance while supporting SEO requirements and accessibility standards throughout the dashboard experience.

- **State-Aware Navigation**: Navigation integration responds to user authentication state and dashboard context while preventing unauthorized access and maintaining proper user flow management.

## User Order Statistics

```tsx
// src/app/dashboard/page.tsx
const combinedOrderStats = useMemo(() => {
  if (!purchaseStats) {
    return {
      totalOrders: orderStats.totalOrders,
      totalSpent: orderStats.totalSpent,
      averageOrderValue: orderStats.averageOrderValue,
      recentOrders: orderStats.recentOrders.length,
      userOrders: orderStats.totalOrders,
      demoOrders: 0,
    };
  }

  const combinedTotal = orderStats.totalOrders + purchaseStats.totalOrders;
  const combinedSpent = orderStats.totalSpent + purchaseStats.totalSpent;
  const combinedAverage = combinedTotal > 0 ? combinedSpent / combinedTotal : 0;

  return {
    totalOrders: combinedTotal,
    totalSpent: combinedSpent,
    averageOrderValue: combinedAverage,
    recentOrders: orderStats.recentOrders.length,
    userOrders: orderStats.totalOrders,
    demoOrders: purchaseStats.totalOrders,
  };
}, [orderStats, purchaseStats, orderHistory, orders]);
```

### Explanation of the Code

This order statistics calculation demonstrates enterprise-level data processing and analytics integration that combines real user data with demo information to provide accurate business metrics while supporting development workflows and realistic user experience simulation.

#### Intelligent Data Source Integration

The statistics combination showcases flexible data management architecture:

- **Multi-Source Data Merging**: The calculation intelligently combines user order data with demo purchase statistics that provides analytics while maintaining clear distinction between real and demonstration data for accurate business reporting.

- **Fallback Data Strategy**: When demo data is unavailable, the system falls back to user-only statistics that ensures consistent dashboard functionality while preventing data display errors and maintaining user experience quality.

- **Data Source Transparency**: Combined statistics include metadata about data origins (user vs demo orders) that enables proper business intelligence while supporting development and demonstration requirements.

#### Performance-Optimized Calculation Framework

The `useMemo` implementation demonstrates efficient computation management:

- **Dependency-Based Recalculation**: The memo hook ensures statistics recalculate only when relevant data changes that optimizes dashboard performance while maintaining data accuracy and responsive user interface updates.

- **Complex Calculation Optimization**: Memoization prevents unnecessary recalculation of expensive operations like order totals and averages while ensuring immediate updates when underlying data changes.

- **Memory Management**: Efficient memoization prevents memory leaks and excessive recalculations while supporting optimal application performance across different user activity patterns and data volumes.

#### Comprehensive Business Metrics Calculation

The statistics computation showcases enterprise-level analytics:

- **Total Order Aggregation**: Combined order counts provide accurate business metrics that include both real user activity and demo data while supporting platform analytics and user engagement measurement.

- **Financial Metrics Integration**: Total spent calculation aggregates all financial data that provides accurate business intelligence while supporting revenue tracking and customer value analysis across different data sources.

- **Average Order Value Analytics**: Dynamic average calculation provides meaningful business insights that adapt to changing order patterns while supporting pricing strategy and customer behavior analysis.

#### Real-Time Dashboard Data Updates

The statistics structure supports responsive dashboard presentation:

- **Immediate Data Reflection**: Statistics update automatically with order changes that provide real-time dashboard accuracy while maintaining user confidence and supporting immediate business decision-making.

- **Comprehensive Metric Coverage**: The statistics include all essential e-commerce metrics (total orders, spending, averages) that provide complete dashboard overview while supporting various user and business analysis needs.

- **Data Granularity Support**: Statistics include detailed breakdowns (user vs demo orders) that enable granular analysis while supporting both user experience and business intelligence requirements.

#### Business Intelligence and Reporting Framework

The calculation approach supports analytics:

- **Historical Data Integration**: Statistics incorporate historical purchase data that provides long-term trend analysis while supporting customer lifetime value calculations and business forecasting.

- **Segmentation Support**: Data separation between user and demo orders enables accurate customer segmentation while supporting business analytics and marketing strategy development.

- **Scalable Analytics Architecture**: The calculation structure supports growth in data volume and complexity while maintaining performance and accuracy for enterprise-level e-commerce operations.

## Calculating Total Savings

```tsx
// src/app/dashboard/page.tsx
const totalSavings = useMemo(() => {
  // Calculate shipping savings (members typically get free shipping)
  const standardShippingCost = 9.99;
  const shippingSavings =
    hasMembership && user?.membershipTier
      ? combinedOrderStats.totalOrders * standardShippingCost
      : 0;

  // Calculate total discount savings from ALL sources (membership + discount codes + promotions)
  const userDiscountSavings = orders.reduce(
    (total, order) => total + order.discountAmount,
    0,
  );

  // Add demo purchase savings if available
  const demoDiscountSavings = purchaseStats?.totalSavings || 0;

  return shippingSavings + userDiscountSavings + demoDiscountSavings;
}, [
  hasMembership,
  user?.membershipTier,
  combinedOrderStats,
  orders,
  purchaseStats,
]);
```

### Explanation of the Code

This savings calculation demonstrates enterprise-level customer value analysis that quantifies multiple discount sources and membership benefits to provide users with clear visibility into their total savings while supporting business intelligence and customer retention strategies.

#### Membership Benefit Quantification Framework

The shipping savings calculation showcases membership value demonstration:

- **Membership-Based Shipping Benefits**: The calculation quantifies free shipping value for members by multiplying standard shipping costs across all orders that demonstrates tangible membership benefits while encouraging membership retention and upgrades.

- **Cost Basis Establishment**: Standard shipping cost of $9.99 provides consistent baseline for savings calculation that ensures accurate benefit quantification while supporting business analysis of shipping cost impacts and membership value propositions.

- **Conditional Benefit Application**: Shipping savings apply only to members with active memberships that maintains accuracy in benefit calculation while preventing overstated savings for non-members and ensuring proper business reporting.

#### Multi-Source Discount Aggregation System

The discount savings integration demonstrates promotion tracking:

- **Order-Level Discount Tracking**: User order discount aggregation captures all promotional savings including membership discounts, promotional codes, and special offers that provides complete savings visibility while supporting marketing effectiveness analysis.

- **Historical Discount Analysis**: Discount calculation processes entire order history that enables savings tracking while supporting customer lifetime value analysis and promotional strategy evaluation.

- **Demo Data Integration**: Demo purchase savings inclusion provides realistic platform demonstration while maintaining separation between real and demonstration data for accurate business intelligence and user experience testing.

#### Performance-Optimized Calculation Architecture

The `useMemo` implementation showcases efficient computation management:

- **Dependency-Based Recalculation**: Savings recalculate only when relevant data changes (membership status, orders, purchase stats) that optimizes dashboard performance while ensuring accurate savings display and responsive user interface updates.

- **Complex Aggregation Optimization**: Memoization prevents expensive recalculation of discount aggregations and shipping benefits while maintaining immediate updates when underlying membership or order data changes.

- **Memory Management Excellence**: Efficient memoization prevents memory leaks during complex calculations while supporting optimal application performance across different user activity patterns and order volumes.

#### Business Intelligence and Customer Value Framework

The savings calculation supports customer analytics:

- **Customer Lifetime Value Enhancement**: Total savings calculation contributes to customer lifetime value analysis that supports retention strategies while demonstrating platform value and encouraging continued engagement.

- **Membership ROI Demonstration**: Savings quantification helps users understand membership return on investment that supports membership renewal while providing clear value communication and customer satisfaction measurement.

- **Promotional Effectiveness Tracking**: Discount aggregation enables marketing campaign analysis that supports business strategy while providing insights into promotional impact and customer response patterns.

#### Transparent Value Communication Strategy

The calculation approach supports clear customer communication:

- **Comprehensive Savings Visibility**: Total calculation includes all savings sources that provides complete value transparency while building customer confidence and demonstrating platform benefits.

- **Accurate Benefit Representation**: Calculation methodology ensures honest savings reporting that maintains customer trust while providing realistic expectations and supporting ethical business practices.

- **Data-Driven Value Proposition**: Savings calculation provides quantified benefits that support marketing messaging while enabling personalized customer communication and retention strategies.

## Shopping Trends by Category

### The Calculations

```tsx
// src/app/dashboard/page.tsx
const shoppingTrends = useMemo(() => {
  const categoryStats: Record<string, { count: number; total: number }> = {};

  // Process user orders
  orders.forEach((order) => {
    // Calculate the actual amount paid after ALL discounts (membership + discount codes + promotions)
    const orderSubtotal = order.items.reduce(
      (sum, item) => sum + item.price * item.quantity,
      0,
    );

    // The actual amount paid is the subtotal minus all discount amounts
    const actualAmountPaid = orderSubtotal - order.discountAmount;

    // Calculate discount factor based on actual amount paid vs original subtotal
    const discountFactor =
      orderSubtotal > 0 ? actualAmountPaid / orderSubtotal : 1;

    order.items.forEach((item) => {
      if (!categoryStats[item.category]) {
        categoryStats[item.category] = { count: 0, total: 0 };
      }
      categoryStats[item.category].count += item.quantity;
      // Apply the discount factor to get the actual amount paid per item
      const itemTotal = item.price * item.quantity * discountFactor;
      categoryStats[item.category].total += itemTotal;
    });
  });

  // Process purchase history (use discountedTotal to reflect actual amount paid)
  if (previouslyPurchased.length > 0) {
    previouslyPurchased.forEach((product) => {
      // Use a fallback category since the type might not have category
      const category = (product as any).category || "Other";
      if (!categoryStats[category]) {
        categoryStats[category] = { count: 0, total: 0 };
      }
      categoryStats[category].count += product.quantity;
      // Use discountedTotal instead of total to reflect actual amount paid after discounts
      categoryStats[category].total += product.discountedTotal;
    });
  }

  // Convert to chart data
  const chartData = Object.entries(categoryStats)
    .map(([category, stats]) => ({
      category: category.charAt(0).toUpperCase() + category.slice(1),
      value: stats.total,
      count: stats.count,
      percentage: 0,
    }))
    .sort((a, b) => b.value - a.value)
    .slice(0, 6); // Top 6 categories

  // Calculate percentages
  const total = chartData.reduce((sum, item) => sum + item.value, 0);
  chartData.forEach((item) => {
    item.percentage = total > 0 ? Math.ceil((item.value / total) * 100) : 0;
  });

  return chartData;
}, [orders, previouslyPurchased]);
```

#### Explanation of the Code

This code calculates shopping trends by category based on the user's order history and previously purchased items. It processes both user orders and demo purchases to create a view of spending patterns. Key steps include:

- **Category Statistics**: A record is created to track the count and total amount spent in each category.
- **Actual Amount Paid**: For each order, the actual amount paid is calculated after applying all discounts, including membership benefits and promotional codes.
- **Discount Factor**: The discount factor is computed to adjust the total spent in each category based on the actual amount paid.
- **Chart Data Preparation**: The data is transformed into a format suitable for charting, including category names, total spent, item count, and percentage of total spending.
- **Sorting and Limiting**: The data is sorted by total spent and limited to the top 6 categories for display.

### Configuring Recharts

```tsx
// src/app/dashboard/page.tsx
const chartConfig = {
  value: {
    label: "Amount Spent",
  },
  ...shoppingTrends.reduce((acc, item, index) => {
    const colors = [
      "hsl(var(--chart-1))",
      "hsl(var(--chart-2))",
      "hsl(var(--chart-3))",
      "hsl(var(--chart-4))",
      "hsl(var(--chart-5))",
      "hsl(var(--chart-6))",
    ];
    acc[item.category.toLowerCase()] = {
      label: item.category,
      color: colors[index % colors.length],
    };
    return acc;
  }, {} as any),
};
```

## Handling Redirection, Access Control, and Logout

```tsx
// src/app/dashboard/page.tsx
useEffect(() => {
  if (!isLoggedIn) {
    router.push("/login");
  }
}, [isLoggedIn, router]);

if (!isLoggedIn || !user) {
  return (
    <div className="flex justify-center items-center bg-background min-h-screen">
      <div className="text-center">
        <h1 className="mb-4 font-bold text-2xl">Access Denied</h1>
        <p className="mb-4 text-muted-foreground">
          Please log in to access your dashboard.
        </p>
        <Button asChild>
          <Link href="/login">Sign In</Link>
        </Button>
      </div>
    </div>
  );
}

const handleLogout = () => {
  logout();
  router.push("/");
};
```

### Explanation of the Code

This access control and navigation management system demonstrates enterprise-level security implementation that protects dashboard content while providing seamless user experience through intelligent redirection, clear access denial communication, and secure logout functionality.

#### React Effect-Based Access Control

The useEffect implementation showcases modern authentication monitoring:

- **Automatic Authentication Monitoring**: The effect continuously monitors user authentication state that ensures immediate response to session changes while preventing unauthorized access and maintaining security boundaries throughout the user session.

- **Dependency-Optimized Execution**: The dependency array includes authentication state and router that ensures proper effect timing while preventing unnecessary re-execution and maintaining optimal component performance.

- **Seamless Security Enforcement**: Automatic redirection provides transparent security without disrupting user workflow while maintaining protection against unauthorized access attempts and session manipulation.

#### Comprehensive Access Denial Interface

The conditional rendering demonstrates user-friendly security messaging:

- **Professional Access Denial**: Clean, centered layout with clear messaging provides professional user experience even during access denial while maintaining brand consistency and user confidence.

- **Actionable Security Guidance**: Direct link to login page provides clear next steps for unauthorized users while eliminating confusion about access requirements and supporting conversion to authenticated usage.

- **Accessible Error Communication**: Screen reader friendly content structure and clear visual hierarchy ensure inclusive access denial experience while supporting users with different accessibility needs and technical capabilities.

#### Secure Logout Implementation Framework

The logout handler demonstrates session termination:

- **Complete Session Cleanup**: Logout function call ensures thorough session termination that clears authentication state while preventing session persistence and maintaining security compliance standards.

- **Strategic Post-Logout Navigation**: Redirection to home page provides appropriate landing destination while preventing return to protected content and supporting smooth user transition after logout.

- **User-Initiated Security Control**: Manual logout functionality empowers users to control their session security while providing peace of mind and supporting shared device usage scenarios.

#### Security Architecture Excellence

The access control system incorporates multiple security layers:

- **Multi-Factor Authentication Verification**: Both `isLoggedIn` and `user` object verification ensure authentication validation while preventing edge cases and maintaining robust security boundaries.

- **Client-Side Security Enforcement**: Immediate access control provides responsive security while supporting server-side verification as the primary security mechanism for protection.

- **Session State Coordination**: Access control integrates with authentication context state that ensures consistent security behavior while supporting complex authentication workflows and user state management.

#### User Experience and Security Balance

The implementation prioritizes optimal user interaction within security constraints:

- **Transparent Security Boundaries**: Users understand access limitations through clear communication while maintaining positive brand experience and supporting conversion to authenticated usage.

- **Minimal Security Friction**: Automatic redirection and clear guidance minimize user effort during authentication while maintaining strong security standards and preventing unauthorized access.

- **Progressive Enhancement Support**: Access control works across different technical capabilities while ensuring consistent security behavior and maintaining baseline protection for all users.

## Getting Membership Expiration Date

```tsx
// src/app/dashboard/page.tsx
const membershipExpiry = user.membershipExpiry
  ? new Date(user.membershipExpiry)
  : null;
const daysUntilExpiry = membershipExpiry
  ? Math.ceil(
      (membershipExpiry.getTime() - new Date().getTime()) /
        (1000 * 60 * 60 * 24),
    )
  : 0;
```

### Explanation of the Code

This membership expiration calculation demonstrates enterprise-level subscription management that provides users with clear visibility into their membership status while supporting proactive renewal strategies and customer retention through strategic timing calculations and user communication.

#### Date Processing and Validation Framework

The membership expiry processing showcases robust date management:

- **Safe Date Conversion**: The conditional date conversion prevents runtime errors when membership expiry data is undefined while ensuring consistent date handling across different user membership states and data availability scenarios.

- **Null Safety Implementation**: Conditional processing handles cases where users lack membership data that maintains application stability while providing appropriate fallback behavior for non-members and data edge cases.

- **Data Type Consistency**: Date object creation ensures consistent date handling throughout the dashboard while supporting reliable calculations and preventing type-related errors in membership processing.

#### Time-Based Calculation Excellence

The days calculation demonstrates precise temporal analytics:

- **Millisecond-Accurate Calculation**: Time difference calculation uses precise millisecond computation that ensures accurate day counting while supporting reliable membership expiration tracking and renewal timing optimization.

- **Mathematical Time Conversion**: Division by milliseconds per day (1000 _ 60 _ 60 \* 24) provides accurate day calculation while maintaining precision for membership expiration tracking and user notification timing.

- **Ceiling Function Application**: `Math.ceil` ensures partial days count as full days that provides conservative expiration estimates while supporting user-friendly expiration communication and preventing premature membership termination.

#### Business Logic Integration Framework

The expiration calculation supports membership management:

- **Proactive User Communication**: Days until expiry calculation enables timely renewal notifications that support customer retention while providing adequate notice for membership decision-making and payment processing.

- **Conditional Feature Access**: Expiration data supports membership gate functionality that controls feature access while providing clear user feedback about membership requirements and renewal needs.

- **Revenue Protection Strategy**: Accurate expiration tracking prevents service delivery beyond membership terms while maintaining customer satisfaction through clear communication and renewal opportunities.

#### User Experience Enhancement Framework

The calculation approach prioritizes optimal user interaction:

- **Clear Temporal Communication**: Days remaining provides intuitive time understanding that supports user planning while eliminating confusion about membership status and renewal timing requirements.

- **Visual Status Indicators**: Expiration data enables color-coded status display (red for urgent, green for active) that provides immediate visual feedback while supporting accessibility requirements and user experience optimization.

- **Actionable Information Delivery**: Expiration calculation supports conditional display of renewal prompts and membership management options that guide user action while maintaining non-intrusive interface design.

#### Strategic Business Intelligence Support

The expiration tracking enables membership analytics:

- **Churn Prevention Analytics**: Expiration data supports customer retention analysis that identifies at-risk memberships while enabling proactive retention strategies and customer lifetime value optimization.

- **Renewal Timing Optimization**: Days until expiry calculation supports optimal renewal communication timing that maximizes conversion while minimizing user annoyance and supporting respectful customer relationship management.

- **Membership Lifecycle Management**: Expiration tracking enables membership journey analysis that supports business strategy while providing insights into customer behavior patterns and renewal decision factors.

## Rendering the Dashboard

```tsx
// src/app/dashboard/page.tsx
  return (
    <div className="min-h-screen">
      <div className="mx-auto px-6 lg:px-8 py-12 max-w-7xl">
        {/* Header */}
        <div className="flex sm:flex-row flex-col justify-between items-start sm:items-center mb-8">
          <div>
            <h1 className="mb-2 font-bold text-3xl">
              Welcome back, {user.username}!
            </h1>
            <p className="text-muted-foreground">
              Manage your account and membership from your dashboard.
            </p>
          </div>
          <div className="flex gap-2 mt-4 sm:mt-0">
            <Button
              variant="outline"
              size="sm"
              onClick={() => router.push("/dashboard/settings")}
            >
              <Settings className="mr-2 w-4 h-4" />
              Settings
            </Button>
            <Button variant="outline" size="sm" onClick={handleLogout}>
              <LogOut className="mr-2 w-4 h-4" />
              Sign Out
            </Button>
          </div>
        </div>

        <div className="gap-6 grid lg:grid-cols-3">
          {/* User Profile Card */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <User className="w-5 h-5" />
                Profile Information
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="flex items-center gap-3">
                <div className="flex justify-center items-center bg-primary rounded-full w-12 h-12">
                  <User className="w-6 h-6 text-primary-foreground" />
                </div>
                <div>
                  <p className="font-medium">{user.username}</p>
                  <p className="text-muted-foreground text-sm">
                    Member since{" "}
                    {new Date(user.joinedDate).toLocaleDateString()}
                  </p>
                </div>
              </div>

              <div className="space-y-2">
                <div className="flex items-center gap-2 text-sm">
                  <Phone className="w-4 h-4 text-muted-foreground" />
                  <span>{user.phoneNumber}</span>
                </div>
                {user.email && (
                  <div className="flex items-center gap-2 text-sm">
                    <Mail className="w-4 h-4 text-muted-foreground" />
                    <span>{user.email}</span>
                  </div>
                )}
              </div>
            </CardContent>
          </Card>

          {/* Membership Status Card */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <CreditCard className="w-5 h-5" />
                Membership Status
              </CardTitle>
            </CardHeader>
            <CardContent>
              {hasMembership && user.membershipTier ? (
                <div className="space-y-4">
                  <div className="flex items-center gap-3">
                    <div
                      className={`w-10 h-10 ${getTierColor(
                        user.membershipTier.name
                      )} rounded-full flex items-center justify-center text-white`}
                    >
                      {getTierIcon(user.membershipTier.name)}
                    </div>
                    <div>
                      <div className="flex items-center gap-2">
                        <span className="font-semibold">
                          {user.membershipTier.name}
                        </span>
                        <Badge>Active</Badge>
                      </div>
                      <p className="text-muted-foreground text-sm">
                        {user.membershipTier.discountPercentage}% discount on
                        all purchases
                      </p>
                    </div>
                  </div>

                  <div className="space-y-2">
                    <div className="flex justify-between text-sm">
                      <span>Expires:</span>
                      <span>{membershipExpiry?.toLocaleDateString()}</span>
                    </div>
                    <div className="flex justify-between text-sm">
                      <span>Days remaining:</span>
                      <span
                        className={
                          daysUntilExpiry <= 7
                            ? "text-red-600"
                            : "text-green-600"
                        }
                      >
                        {daysUntilExpiry} days
                      </span>
                    </div>
                  </div>

                  <div className="space-y-2">
                    <h4 className="font-medium text-sm">Benefits:</h4>
                    <ul className="space-y-1 text-xs">
                      {user.membershipTier.benefits
                        .slice(0, 3)
                        .map((benefit, index) => (
                          <li key={index} className="flex items-start gap-2">
                            <div className="bg-primary mt-2 rounded-full w-1 h-1 shrink-0" />
                            <span>{benefit}</span>
                          </li>
                        ))}
                      <li className="flex items-start gap-2">
                        <div className="bg-primary mt-2 rounded-full w-1 h-1 shrink-0" />
                        ...AND MORE
                      </li>
                    </ul>
                  </div>

                  {daysUntilExpiry <= 7 && (
                    <Button size="sm" className="w-full" asChild>
                      <Link href="/membership">Renew Membership</Link>
                    </Button>
                  )}
                </div>
              ) : (
                <div className="space-y-4 text-center">
                  <div className="flex justify-center items-center bg-muted mx-auto rounded-full w-12 h-12">
                    <Crown className="w-6 h-6 text-muted-foreground" />
                  </div>
                  <div>
                    <p className="font-medium">No Active Membership</p>
                    <p className="text-muted-foreground text-sm">
                      Upgrade to unlock exclusive benefits and discounts
                    </p>
                  </div>
                  <Button size="sm" className="w-full" asChild>
                    <Link href="/membership">Browse Memberships</Link>
                  </Button>
                </div>
              )}
            </CardContent>
          </Card>

          {/* Shopping Overview Card */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <ShoppingBag className="w-5 h-5" />
                Shopping Overview
              </CardTitle>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="flex justify-between items-center">
                <span className="text-sm">Items in Cart:</span>
                <Badge variant="outline">{totalItems}</Badge>
              </div>

              <div className="flex justify-between items-center">
                <span className="text-sm">Wishlist Items:</span>
                <Badge variant="outline">{wishlistCount}</Badge>
              </div>

              <div className="flex justify-between items-center">
                <span className="text-sm">Previously Purchased:</span>
                <Badge variant="outline">{purchasedItems.length}</Badge>
              </div>

              {hasMembership && (
                <div className="bg-green-50 dark:bg-green-900/20 p-3 border border-green-200 dark:border-green-800 rounded-lg">
                  <p className="text-green-800 text-sm dark:text-green-200">
                    ðŸŽ‰ You're saving {user.membershipTier?.discountPercentage}%
                    on all purchases!
                  </p>
                </div>
              )}

              <div className="space-y-2">
                <Button variant="outline" size="sm" className="w-full" asChild>
                  <Link href="/shopping">Continue Shopping</Link>
                </Button>
                {wishlistCount > 0 && (
                  <Button
                    variant="outline"
                    size="sm"
                    className="w-full"
                    asChild
                  >
                    <Link href="/wishlist">
                      <Heart className="mr-2 w-4 h-4" />
                      View Wishlist ({wishlistCount})
                    </Link>
                  </Button>
                )}
                {totalItems > 0 && (
                  <Button size="sm" className="w-full" asChild>
                    <Link href="/cart">View Cart ({totalItems})</Link>
                  </Button>
                )}
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Order Statistics */}
        <div className="mt-8">
          <h2 className="mb-4 font-semibold text-xl">Order Overview</h2>
          <div className="gap-4 grid sm:grid-cols-2 lg:grid-cols-4">
            <Card>
              <CardContent className="p-6">
                <div className="flex justify-between items-center">
                  <div>
                    <p className="text-muted-foreground text-sm">Total Spent</p>
                    <p className="font-bold text-2xl">
                      {formatPrice(combinedOrderStats.totalSpent)}
                    </p>
                    {combinedOrderStats.userOrders > 0 &&
                      combinedOrderStats.demoOrders > 0 && (
                        <p className="text-muted-foreground text-xs">
                          Combined real + demo
                        </p>
                      )}
                  </div>
                  <CreditCard className="w-8 h-8 text-primary" />
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardContent className="p-6">
                <div className="flex justify-between items-center">
                  <div>
                    <p className="text-muted-foreground text-sm">
                      Average Order
                    </p>
                    <p className="font-bold text-2xl">
                      {formatPrice(combinedOrderStats.averageOrderValue)}
                    </p>
                  </div>
                  <TrendingUp className="w-8 h-8 text-primary" />
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardContent className="p-6">
                <div className="flex justify-between items-center">
                  <div>
                    <p className="text-muted-foreground text-sm">
                      Total Savings
                    </p>
                    <p className="font-bold text-2xl">
                      {formatPrice(totalSavings)}
                    </p>
                    {totalSavings > 0 && (
                      <p className="text-green-600 text-xs">
                        {hasMembership
                          ? "Shipping + discounts"
                          : "Discount codes"}
                      </p>
                    )}
                  </div>
                  <DollarSign className="w-8 h-8 text-green-500" />
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardContent className="p-6">
                <div className="flex justify-between items-center">
                  <div>
                    <p className="text-muted-foreground text-sm">
                      Total Orders
                    </p>
                    <p className="font-bold text-2xl">
                      {combinedOrderStats.totalOrders}
                    </p>
                    {combinedOrderStats.userOrders > 0 &&
                      combinedOrderStats.demoOrders > 0 && (
                        <p className="text-muted-foreground text-xs">
                          {combinedOrderStats.userOrders} real +{" "}
                          {combinedOrderStats.demoOrders} demo
                        </p>
                      )}
                  </div>
                  <Package className="w-8 h-8 text-blue-500" />
                </div>
              </CardContent>
            </Card>
          </div>

          {/* Shopping Trends Chart */}
          {shoppingTrends.length > 0 ? (
            <div className="mt-6">
              <Card>
                <CardHeader>
                  <CardTitle className="flex items-center gap-2">
                    <PieChartIcon className="w-5 h-5" />
                    Shopping Trends by Category
                  </CardTitle>
                </CardHeader>
                <CardContent>
                  <div className="gap-6 grid lg:grid-cols-2">
                    {/* Chart */}
                    <div className="relative flex justify-center">
                      <ChartContainer
                        config={chartConfig}
                        className="mx-auto max-h-[350px] aspect-square"
                      >
                        <PieChart>
                          <ChartTooltip
                            cursor={false}
                            content={
                              <ChartTooltipContent
                                hideLabel
                                formatter={(value, name) => [
                                  formatPrice(value as number),
                                  name,
                                ]}
                              />
                            }
                          />
                          <Pie
                            data={shoppingTrends}
                            dataKey="value"
                            nameKey="category"
                            innerRadius={60}
                            outerRadius={120}
                            strokeWidth={2}
                            stroke="#ffffff"
                          >
                            {shoppingTrends.map((entry, index) => {
                              const colors = [
                                "#3B82F6", // Blue
                                "#10B981", // Green
                                "#8B5CF6", // Purple
                                "#F59E0B", // Orange
                                "#EF4444", // Red
                                "#06B6D4", // Cyan
                              ];
                              return (
                                <Cell
                                  key={`cell-${index}`}
                                  fill={colors[index % colors.length]}
                                />
                              );
                            })}
                          </Pie>
                        </PieChart>
                      </ChartContainer>

                      {/* Center Label */}
                      <div className="absolute inset-0 flex flex-col justify-center items-center">
                        <div className="text-center">
                          <p className="font-bold text-2xl">
                            {formatPrice(combinedOrderStats.totalSpent)}
                          </p>
                          <p className="text-muted-foreground text-sm">
                            After Discounts
                          </p>
                        </div>
                      </div>
                    </div>

                    {/* Category Breakdown */}
                    <div className="space-y-3 h-[17em]">
                      <h4 className="font-medium text-sm">
                        Category Breakdown
                      </h4>
                      {shoppingTrends.map((category, index) => {
                        const colors = [
                          "#3B82F6", // Blue
                          "#10B981", // Green
                          "#8B5CF6", // Purple
                          "#F59E0B", // Orange
                          "#EF4444", // Red
                          "#06B6D4", // Cyan
                        ];
                        return (
                          <div
                            key={category.category}
                            className="flex justify-between items-center"
                          >
                            <div className="flex items-center gap-2">
                              <div
                                className="rounded-full w-3 h-3"
                                style={{
                                  backgroundColor:
                                    colors[index % colors.length],
                                }}
                              />
                              <span className="text-sm">
                                {category.category}
                              </span>
                            </div>
                            <div className="text-right text-sm">
                              <p className="font-medium">
                                {formatPrice(category.value)}
                              </p>
                              <p className="text-muted-foreground text-xs">
                                {category.percentage}%
                              </p>
                            </div>
                          </div>
                        );
                      })}
                    </div>
                  </div>
                </CardContent>
              </Card>
            </div>
          ) : (
            <div className="mt-6">
              <Card>
                <CardHeader>
                  <CardTitle className="flex items-center gap-2">
                    <PieChartIcon className="w-5 h-5" />
                    Shopping Trends by Category
                  </CardTitle>
                </CardHeader>
                <CardContent className="py-12">
                  <div className="text-center">
                    <PieChartIcon className="mx-auto mb-4 w-12 h-12 text-muted-foreground" />
                    <h3 className="mb-2 font-medium">No Purchase Data Yet</h3>
                    <p className="mb-4 text-muted-foreground text-sm">
                      Start shopping to see your category trends and spending
                      patterns
                    </p>
                    <Button asChild>
                      <Link href="/shopping">Start Shopping</Link>
                    </Button>
                  </div>
                </CardContent>
              </Card>
            </div>
          )}
        </div>

        {/* Recent Orders */}
        {orderStats.recentOrders.length > 0 && (
          <div className="mt-8">
            <div className="flex justify-between items-center mb-4">
              <h2 className="font-semibold text-xl">Your Recent Orders</h2>
              <div className="flex gap-2">
                <Button variant="outline" size="sm" asChild>
                  <Link href="/dashboard/my-orders">View All Orders</Link>
                </Button>
                <Button variant="outline" size="sm" asChild>
                  <Link href="/track-order">Track Order</Link>
                </Button>
              </div>
            </div>
            <div className="space-y-4">
              {orderStats.recentOrders.slice(0, 3).map((order) => (
                <Card key={order.id}>
                  <CardContent className="p-4">
                    <div className="flex justify-between items-start">
                      <div className="space-y-1">
                        <div className="flex items-center gap-2">
                          <p className="font-medium">Order #{order.id}</p>
                          <Badge variant={`${getStatusColor(order.status)}`}>
                            {order.status}
                          </Badge>
                        </div>
                        <p className="text-muted-foreground text-sm">
                          {new Date(order.orderDate).toLocaleDateString()} â€¢{" "}
                          {order.items.length} items
                        </p>
                        <p className="text-muted-foreground text-sm">
                          Tracking: {order.trackingNumber}
                        </p>
                      </div>
                      <div className="text-right">
                        <p className="font-semibold">
                          {formatPrice(order.grandTotal)}
                        </p>
                        <Button
                          variant="ghost"
                          size="sm"
                          asChild
                          className="mt-1"
                        >
                          <Link
                            href={`/track-order?tracking=${order.trackingNumber}`}
                          >
                            <Truck className="mr-1 w-4 h-4" />
                            Track
                          </Link>
                        </Button>
                      </div>
                    </div>
                  </CardContent>
                </Card>
              ))}
            </div>
          </div>
        )}

        {/* Quick Actions */}
        <div className="mt-8">
          <h2 className="mb-4 font-semibold text-xl">Quick Actions</h2>
          <div className="gap-4 grid sm:grid-cols-2 md:grid-cols-4">
            <Link href="/shopping">
              <Card className="hover:shadow-md transition-shadow cursor-pointer">
                <CardContent className="flex flex-col items-center p-6 text-center">
                  <ShoppingBag className="mb-3 w-8 h-8 text-primary" />
                  <h3 className="font-medium">Shop Products</h3>
                  <p className="text-muted-foreground text-sm">
                    Browse our catalog
                  </p>
                </CardContent>
              </Card>
            </Link>

            <Link href="/cart">
              <Card className="hover:shadow-md transition-shadow cursor-pointer">
                <CardContent className="flex flex-col items-center p-6 text-center">
                  <div className="relative">
                    <ShoppingBag className="mb-3 w-8 h-8 text-primary" />
                    {totalItems > 0 && (
                      <Badge className="-top-2 -right-2 absolute flex justify-center items-center p-0 w-5 h-5 text-xs">
                        {totalItems}
                      </Badge>
                    )}
                  </div>
                  <h3 className="font-medium">Shopping Cart</h3>
                  <p className="text-muted-foreground text-sm">
                    Review your items
                  </p>
                </CardContent>
              </Card>
            </Link>

            <Link href="/wishlist">
              <Card className="hover:shadow-md transition-shadow cursor-pointer">
                <CardContent className="flex flex-col items-center p-6 text-center">
                  <div className="relative">
                    <Heart className="mb-3 w-8 h-8 text-primary" />
                    {wishlistCount > 0 && (
                      <Badge className="-top-2 -right-2 absolute flex justify-center items-center p-0 w-5 h-5 text-xs">
                        {wishlistCount}
                      </Badge>
                    )}
                  </div>
                  <h3 className="font-medium">Wishlist</h3>
                  <p className="text-muted-foreground text-sm">
                    Saved for later
                  </p>
                </CardContent>
              </Card>
            </Link>

            <Link href={"/dashboard/settings"}>
              <Card className="hover:shadow-md transition-shadow cursor-pointer">
                <CardContent className="flex flex-col items-center p-6 text-center">
                  <Settings className="mb-3 w-8 h-8 text-primary" />
                  <h3 className="font-medium">Account Settings</h3>
                  <p className="text-muted-foreground text-sm">
                    Manage preferences
                  </p>
                </CardContent>
              </Card>
            </Link>
          </div>
        </div>

        {/* Purchase History from DummyJSON */}
        <div className="mt-8">
          <div className="flex justify-between items-center mb-4">
            <h2 className="font-semibold text-xl">DEMO Purchase History</h2>
            <div className="flex gap-2">
              <Button
                variant="outline"
                size="sm"
                onClick={refetchPurchaseHistory}
                disabled={isPurchaseHistoryLoading}
              >
                <RefreshCw
                  className={`mr-1 w-4 h-4 ${
                    isPurchaseHistoryLoading ? "animate-spin" : ""
                  }`}
                />
                Refresh
              </Button>
              {purchaseStats && (
                <Badge variant="secondary">
                  {purchaseStats.totalOrders} orders
                </Badge>
              )}
            </div>
          </div>

          {isPurchaseHistoryLoading ? (
            <Card>
              <CardContent className="flex justify-center items-center p-8">
                <RefreshCw className="mr-2 w-4 h-4 animate-spin" />
                Loading purchase history...
              </CardContent>
            </Card>
          ) : purchaseHistoryError ? (
            <Card>
              <CardContent className="p-6 text-center">
                <div className="text-muted-foreground">
                  <Package className="mx-auto mb-2 w-8 h-8" />
                  <p>Unable to load purchase history</p>
                  <p className="text-sm">{purchaseHistoryError}</p>
                </div>
              </CardContent>
            </Card>
          ) : purchaseStats ? (
            <>
              {/* Purchase Statistics */}
              <div className="gap-4 grid sm:grid-cols-2 lg:grid-cols-4 mb-6">
                <Card>
                  <CardContent className="p-6">
                    <div className="flex justify-between items-center">
                      <div>
                        <p className="text-muted-foreground text-sm">
                          Total Orders
                        </p>
                        <p className="font-bold text-2xl">
                          {purchaseStats.totalOrders}
                        </p>
                      </div>
                      <History className="w-8 h-8 text-blue-500" />
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardContent className="p-6">
                    <div className="flex justify-between items-center">
                      <div>
                        <p className="text-muted-foreground text-sm">
                          Total Spent
                        </p>
                        <p className="font-bold text-2xl">
                          {formatPrice(purchaseStats.totalSpent)}
                        </p>
                      </div>
                      <CreditCard className="w-8 h-8 text-green-500" />
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardContent className="p-6">
                    <div className="flex justify-between items-center">
                      <div>
                        <p className="text-muted-foreground text-sm">
                          Total Items
                        </p>
                        <p className="font-bold text-2xl">
                          {purchaseStats.totalItems}
                        </p>
                      </div>
                      <Package className="w-8 h-8 text-purple-500" />
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardContent className="p-6">
                    <div className="flex justify-between items-center">
                      <div>
                        <p className="text-muted-foreground text-sm">
                          Total Savings
                        </p>
                        <p className="font-bold text-2xl">
                          {formatPrice(purchaseStats.totalSavings)}
                        </p>
                      </div>
                      <Zap className="w-8 h-8 text-orange-500" />
                    </div>
                  </CardContent>
                </Card>
              </div>

              {/* Previously Purchased Items */}
              {previouslyPurchased.length > 0 && (
                <div className="mb-6">
                  <h3 className="mb-3 font-medium text-lg">
                    Previously Purchased Items
                  </h3>
                  <div className="gap-4 grid sm:grid-cols-2 lg:grid-cols-3">
                    {previouslyPurchased.slice(0, 6).map((product) => (
                      <Card key={product.id}>
                        <CardContent className="p-4">
                          <div className="flex items-start gap-3">
                            <Image
                              src={product.thumbnail}
                              alt={product.title}
                              className="rounded w-16 h-16 object-cover"
                              width={64}
                              height={64}
                              loading="lazy"
                            />
                            <div className="flex-1 min-w-0">
                              <h4 className="font-medium text-sm line-clamp-2">
                                {product.title}
                              </h4>
                              <p className="text-muted-foreground text-xs">
                                Qty: {product.quantity} â€¢{" "}
                                {formatPrice(product.total)}
                              </p>
                              {product.discountPercentage > 0 && (
                                <Badge
                                  variant="secondary"
                                  className="mt-1 text-xs"
                                >
                                  {product.discountPercentage}% off
                                </Badge>
                              )}
                            </div>
                          </div>
                        </CardContent>
                      </Card>
                    ))}
                  </div>
                  {previouslyPurchased.length > 6 && (
                    <div className="mt-4 text-center">
                      <Button variant="outline" size="sm">
                        View All {previouslyPurchased.length} Items
                      </Button>
                    </div>
                  )}
                </div>
              )}

              {/* Notice */}
              <Card className="border-dashed">
                <CardContent className="p-4 text-center">
                  <div className="text-muted-foreground text-sm">
                    <Star className="mx-auto mb-2 w-5 h-5" />
                    <p>This purchase history is demo data from DummyJSON API</p>
                    <p>Used for testing and demonstration purposes only</p>
                  </div>
                </CardContent>
              </Card>
            </>
          ) : (
            <Card>
              <CardContent className="p-6 text-center">
                <div className="text-muted-foreground">
                  <Package className="mx-auto mb-2 w-8 h-8" />
                  <p>No purchase history available</p>
                  <p className="text-sm">
                    data will appear here when available
                  </p>
                </div>
              </CardContent>
            </Card>
          )}
        </div>
      </div>
    </div>
  );
}
```

### Explanation of the Code

This code implements a user dashboard for an e-commerce platform, providing a centralized location for users to manage their accounts and view important information. Key features include:

- **User Profile Information**: Displays the user's profile details, including username, phone number, and email.
- **Membership Status**: Shows the user's membership tier, benefits, and renewal options.
- **Shopping Overview**: Provides a summary of the user's shopping activities, including items in the cart, wishlist items, and previously purchased items.
- **Order Statistics**: Displays key metrics such as total spent, average order value, total savings, and total orders.
- **Shopping Trends Chart**: Visualizes shopping trends by category using a pie chart, showing spending patterns and category breakdowns.
- **Recent Orders**: Lists the user's recent orders with options to track shipments.

## Next Steps

Now that weâ€™ve implemented a user dashboard to centralize account-related features, itâ€™s time to give users clear and convenient access to their past transactions. Allowing customers to easily [view their order history](/ecommerce-platform/creating-the-pages/dashboard/order-history) not only improves transparency but also builds trust and enhances the overall shopping experience.

The order history page should enable users to:

- **Review previous orders**
  Display a chronological list of completed purchases, including order numbers, dates, and total amounts.

- **View order details**
  Allow users to expand individual orders to see itemized lists of products, quantities, prices, and any applied discounts.

- **Check order status**
  Clearly indicate the fulfillment status of each order, such as processing, shipped, delivered, or canceled, with relevant dates and updates.

- **Track shipments**
  Provide tracking links or shipment details for orders that have been dispatched, giving customers real-time visibility into delivery progress.

- **Download receipts or invoices**
  Enable users to access downloadable PDFs or printable versions of order confirmations for personal records or business expense reporting.

- **Request support or returns**
  Include direct links or options to contact customer service, initiate returns, or report issues related to specific orders.

The order history page should be responsive, visually consistent with the dashboard, and designed with accessibility best practices in mind. By giving customers straightforward access to their order information, you reinforce a sense of professionalism, reliability, and user empowermentâ€”key elements for fostering loyalty and satisfaction.

<BackToTop />
