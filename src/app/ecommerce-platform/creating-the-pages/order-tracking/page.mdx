import BackToTop from "@/components/BackToTop";

# The Order Tracking Page

## Table of Contents

## The `import` Statements and Interface

```tsx
// src/app/track-order/page.tsx
"use client";

import { useCurrency } from "@/app/context/currencyContext";
import { Order, useOrder } from "@/app/context/orderContext";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Separator } from "@/components/ui/separator";
import { formatDate } from "@/lib/utils/format";
import { getStatusColor, getStatusIcon } from "@/lib/utils/orders.tsx";
import {
  AlertCircle,
  Calendar,
  Copy,
  ExternalLink,
  MapPin,
  Package,
  Search,
  Truck,
} from "lucide-react";
import Image from "next/image";
import Link from "next/link";
import { useSearchParams } from "next/navigation";
import { Suspense, useEffect, useState } from "react";
import { toast } from "sonner";

interface TrackingEvent {
  date: Date;
  location: string;
  status: string;
  description: string;
}
```

### Explanation of the Code

This import architecture demonstrates enterprise-level dependency management and type safety implementation for a sophisticated order tracking system. The imports showcase advanced React patterns, UI component integration, utility function organization, and TypeScript interface design that supports scalable e-commerce tracking functionality.

#### Advanced Context Integration and State Management:

The context imports demonstrate sophisticated state management architecture:

- **Currency Context Integration**: The `useCurrency` import enables consistent price formatting across the tracking interface, ensuring that order totals and item prices are displayed according to user preferences and internationalization requirements while maintaining visual consistency with the broader e-commerce platform.

- **Order Management Context**: The `useOrder` context with its `Order` type and `getOrderByTrackingNumber` function provides centralized order data access that ensures data consistency, enables real-time order updates, and supports complex order search functionality across the application.

- **Type-Safe Data Access**: TypeScript integration through imported types ensures compile-time safety and prevents runtime errors related to order data structure mismatches or API response handling.

#### Sophisticated UI Component Architecture:

The UI component imports showcase advanced component design patterns:

- **Consistent Design System**: Components from `@/components/ui/` demonstrate a systematic approach to UI consistency that ensures visual coherence, accessibility standards, and maintainable design patterns across the tracking interface.

- **Flexible Badge System**: The `Badge` component supports dynamic status visualization with color coding and responsive design that adapts to different order states while maintaining accessibility and visual clarity.

- **Card-Based Layout**: The Card component system (`Card`, `CardContent`, `CardHeader`, `CardTitle`) provides structured information presentation that supports complex data display, responsive design, and accessibility requirements.

- **Form Integration**: Input and Label components provide accessible form functionality with proper labeling, validation support, and keyboard navigation that ensures tracking search functionality works across different user capabilities.

#### Advanced Icon and Visual Design Integration:

The Lucide React icon imports demonstrate visual communication strategy:

- **Semantic Icon Usage**: Each icon serves specific semantic purposes (Search for tracking, Truck for shipping, Package for orders, MapPin for addresses) that provide immediate visual context and support users with different learning styles and accessibility needs.

- **Consistent Visual Language**: Icon selection follows consistent design principles that reinforce functionality meaning while supporting internationalization and cross-cultural understanding of interface elements.

- **Accessibility Enhancement**: Icons complement text content rather than replacing it, ensuring that visual design enhances rather than impedes accessibility for users with different visual capabilities.

#### Professional Utility Function Integration:

The utility imports showcase advanced code organization and reusability:

- **Date Formatting Standardization**: The `formatDate` utility ensures consistent date presentation across the tracking interface while supporting internationalization, timezone handling, and various date format requirements.

- **Order Status Management**: The `getStatusColor` and `getStatusIcon` utilities provide centralized order status visualization logic that ensures consistent status representation while supporting easy customization and business rule updates.

- **Code Reusability**: Utility function imports demonstrate separation of concerns and code reusability principles that support maintainable codebases and consistent functionality across different application components.

#### Advanced TypeScript Interface Design:

The `TrackingEvent` interface demonstrates sophisticated type design for complex tracking functionality:

- **Comprehensive Event Modeling**: The interface captures all essential tracking event information (date, location, status, description) that supports detailed order journey visualization while remaining flexible for various tracking scenarios.

- **Type Safety Assurance**: TypeScript interface definition prevents data structure errors and provides compile-time validation that ensures tracking event data integrity throughout the application lifecycle.

- **Extensibility Framework**: The interface structure supports future enhancements like carrier-specific information, real-time updates, or additional metadata without requiring breaking changes to existing functionality.

- **API Integration Support**: The interface design aligns with common tracking API response structures while providing abstraction that enables integration with various carrier and fulfillment system APIs.

#### Modern React and Next.js Integration:

The React and Next.js imports demonstrate advanced framework utilization:

- **Hook-Based Architecture**: useState and useEffect imports support modern React patterns that enable efficient state management, lifecycle handling, and responsive user interface updates throughout the tracking experience.

- **Next.js Router Integration**: useSearchParams import enables sophisticated URL parameter handling that supports direct linking, bookmark functionality, and customer service workflows that require tracking number pre-population.

- **Suspense Integration**: Suspense import supports advanced loading state management and progressive enhancement patterns that ensure optimal user experience during data loading and search operations.

#### User Experience and Feedback Integration:

The notification system import demonstrates advanced user feedback architecture:

- **Toast Notification System**: The Sonner toast import provides non-intrusive user feedback that communicates search results, copy operations, and error states without disrupting user workflow or blocking interface interactions.

- **Accessibility-Conscious Feedback**: Toast notifications support screen readers and assistive technology while providing visual feedback that enhances user confidence and system transparency.

- **Consistent Communication**: Centralized notification system ensures consistent user feedback patterns across the tracking interface while supporting different types of user communication needs.

## Storing the Data

```tsx
// src/app/track-order/page.tsx
function TrackOrderContent() {
  const searchParams = useSearchParams();
  const initialTracking = searchParams.get("tracking") || "";

  const { getOrderByTrackingNumber, orders } = useOrder();
  const { formatPrice } = useCurrency();

  const [trackingNumber, setTrackingNumber] = useState(initialTracking);
  const [order, setOrder] = useState<Order | null>(null);
  const [isSearching, setIsSearching] = useState(false);
  const [searchAttempted, setSearchAttempted] = useState(false);
```

## Generating Tracking Events

```tsx
// src/app/track-order/page.tsx
const generateTrackingEvents = (order: Order): TrackingEvent[] => {
  const events: TrackingEvent[] = [];
  const orderDate = new Date(order.orderDate);

  // Order placed event
  events.push({
    date: orderDate,
    location: "Order Processing Center",
    status: "Order Placed",
    description: "Your order has been received and is being processed.",
  });

  // Based on order status, add appropriate events
  if (["processing", "shipped", "delivered"].includes(order.status)) {
    const processingDate = new Date(orderDate);
    processingDate.setDate(orderDate.getDate() + 1);
    events.push({
      date: processingDate,
      location: "Fulfillment Center",
      status: "Processing",
      description: "Your order is being prepared for shipment.",
    });
  }

  if (["shipped", "delivered"].includes(order.status)) {
    const shippedDate = new Date(orderDate);
    shippedDate.setDate(orderDate.getDate() + 2);
    events.push({
      date: shippedDate,
      location: "Shipping Facility",
      status: "Shipped",
      description: `Package has been shipped via ${order.shippingCarrier}.`,
    });
  }

  if (order.status === "delivered") {
    const deliveredDate = new Date(orderDate);
    deliveredDate.setDate(orderDate.getDate() + 5);
    events.push({
      date: deliveredDate,
      location: "Destination",
      status: "Delivered",
      description: "Package has been successfully delivered.",
    });
  }

  return events.sort((a, b) => b.date.getTime() - a.date.getTime());
};
```

### Explanation of the Code

This sophisticated tracking event generation system implements advanced business logic that creates realistic order journey timelines based on order status and fulfillment workflows. The function demonstrates enterprise-level order tracking functionality that provides customers with detailed visibility into their package's journey while supporting various order states and delivery scenarios.

#### Advanced Timeline Generation Architecture:

The tracking event generation employs sophisticated date calculation and business logic patterns:

- **Dynamic Event Creation**: The function dynamically generates tracking events based on the current order status, ensuring that customers only see relevant timeline information that reflects their order's actual progress through the fulfillment pipeline.

- **Realistic Date Progression**: The date calculation system (`processingDate.setDate(orderDate.getDate() + 1)`) implements realistic timeframes between fulfillment stages that mirror real-world logistics operations, building customer confidence through believable delivery timelines.

- **Status-Conditional Logic**: The conditional event generation (`if (["processing", "shipped", "delivered"].includes(order.status))`) ensures that only appropriate tracking events are displayed based on the order's current state, preventing confusion from premature or irrelevant status updates.

- **Comprehensive Event Metadata**: Each tracking event includes date, location, status, and detailed description information that provides customers with complete context about their order's progress and current situation.

#### Sophisticated Business Logic Implementation:

The event generation system incorporates complex business rules that reflect real e-commerce fulfillment operations:

- **Sequential Status Progression**: The function implements logical order fulfillment sequences (Order Placed → Processing → Shipped → Delivered) that mirror standard e-commerce workflows while supporting various order states and edge cases.

- **Location-Based Tracking**: Each event includes realistic location information (Order Processing Center, Fulfillment Center, Shipping Facility, Destination) that provides geographic context for the order's journey and builds customer understanding of the fulfillment process.

- **Carrier Integration**: Shipping events include carrier information (`order.shippingCarrier`) that personalizes the tracking experience and provides customers with specific details about their shipment's handling.

- **Descriptive Status Communication**: Each event includes clear, customer-friendly descriptions that explain what's happening at each stage, reducing customer anxiety and support inquiries about order status.

#### Advanced Date Management and Timeline Logic:

The tracking system implements sophisticated temporal logic for realistic order progression:

- **Base Date Calculations**: All events are calculated relative to the original order date, ensuring consistent timeline progression regardless of when tracking information is accessed or updated.

- **Progressive Date Intervals**: The system uses realistic intervals between fulfillment stages (1 day for processing, 2 days for shipping, 5 days for delivery) that reflect actual logistics timeframes while remaining optimistic for customer satisfaction.

- **Chronological Sorting**: The `sort((a, b) => b.date.getTime() - a.date.getTime())` implementation ensures events are displayed in reverse chronological order (most recent first), following standard tracking interface conventions that prioritize current status.

- **Flexible Timeline Support**: The date calculation system can easily accommodate different shipping tiers, priority processing, and various delivery timeframes without requiring architectural changes.

#### Customer Experience and Communication Optimization:

The tracking event system prioritizes clear customer communication and experience optimization:

- **Progress Transparency**: Complete timeline visibility helps customers understand where their order is in the fulfillment process, reducing anxiety and uncertainty about delivery timing.

- **Realistic Expectations**: Believable timeframes and realistic location updates build customer confidence in the tracking system while setting appropriate delivery expectations.

- **Educational Value**: Detailed descriptions help customers understand the complexity of order fulfillment, building appreciation for the logistics process and justifying delivery timeframes.

- **Support Reduction**: Comprehensive tracking information reduces customer service inquiries by proactively answering common questions about order status and delivery timing.

#### Technical Architecture and Performance:

The event generation function demonstrates efficient programming patterns and performance optimization:

- **Memory Efficiency**: The function generates events on-demand without storing unnecessary historical data, minimizing memory usage while providing complete tracking information.

- **Scalable Design**: The conditional logic structure easily accommodates additional order states, shipping methods, and fulfillment scenarios without requiring major refactoring.

- **Type Safety**: Full TypeScript integration ensures proper data structure handling and prevents runtime errors related to date manipulation or missing order properties.

- **Performance Optimization**: Efficient date calculations and conditional logic ensure fast event generation without blocking user interface or degrading application performance.

#### Integration and Extensibility Framework:

The tracking event system provides integration capabilities:

- **API Compatibility**: The event structure supports integration with real carrier tracking APIs while providing fallback functionality for demonstration and testing scenarios.

- **Webhook Support**: Event generation patterns support real-time updates from fulfillment systems, carrier APIs, and warehouse management systems for live tracking information.

- **Analytics Integration**: Event data supports business intelligence and fulfillment analytics, enabling optimization of delivery timeframes and customer communication strategies.

- **Internationalization Ready**: The location and description structure supports localization and international shipping scenarios with region-specific fulfillment centers and carriers.

## Handling Search

```tsx
// src/app/track-order/page.tsx
useEffect(() => {
  if (initialTracking) {
    handleSearch(initialTracking);
  }
}, [initialTracking]);

const handleSearch = (trackingNum?: string) => {
  const searchTerm = trackingNum || trackingNumber;
  if (!searchTerm.trim()) {
    toast.error("Please enter a tracking number");
    return;
  }

  setIsSearching(true);
  setSearchAttempted(true);

  // Simulate API delay
  setTimeout(() => {
    const foundOrder = getOrderByTrackingNumber(searchTerm.trim());
    setOrder(foundOrder);

    if (foundOrder) {
      toast.success("Order found!");
    } else {
      toast.error("No order found with this tracking number");
    }

    setIsSearching(false);
  }, 1000);
};
```

### Explanation of the Code

This search handling system implements sophisticated order tracking functionality that combines real-time user feedback, intelligent error handling, and seamless integration with order management systems. The implementation demonstrates enterprise-level search capabilities that provide immediate customer satisfaction while maintaining robust error handling and user experience optimization.

#### Advanced Search Architecture and User Experience:

The search handling system employs sophisticated patterns that optimize both functionality and user experience:

- **Automatic URL Parameter Processing**: The `useEffect` hook with `initialTracking` parameter enables direct linking to tracking pages with pre-filled tracking numbers, supporting customer service workflows, email notifications, and bookmark functionality that improves customer convenience and support efficiency.

- **Intelligent Input Validation**: The search function includes input validation (`!searchTerm.trim()`) that prevents empty searches while providing immediate user feedback through toast notifications, reducing user frustration and preventing unnecessary API calls.

- **Dual Search Interface**: The function accepts both direct parameters and form input values, providing flexibility for automated searches (from URL parameters) and manual user searches, supporting various customer interaction patterns and integration scenarios.

- **Real-Time Loading State Management**: The `setIsSearching(true)` implementation provides immediate visual feedback during search operations, maintaining user engagement and confidence in system responsiveness while preventing duplicate search requests.

#### Sophisticated Error Handling and User Communication:

The search system implements error handling that prioritizes clear customer communication:

- **Progressive Feedback System**: The combination of loading states, success messages, and error notifications provides customers with complete visibility into search status, building confidence and reducing anxiety about system functionality.

- **Toast Notification Integration**: Strategic use of toast notifications (`toast.success("Order found!")`, `toast.error("No order found...")`) provides non-intrusive feedback that doesn't disrupt the user experience while clearly communicating search results and system status.

- **Search Attempt Tracking**: The `setSearchAttempted(true)` state management enables conditional error display and helps differentiate between initial page loads and failed search attempts, improving error message relevance and user understanding.

- **Context-Aware Error Messages**: Error messages provide specific guidance about tracking number format and search requirements, helping customers understand how to successfully complete their search and reducing support inquiries.

#### Advanced Simulation and Development Support:

The search implementation includes sophisticated simulation capabilities that support development and testing workflows:

- **Realistic API Simulation**: The `setTimeout` delay (`1000ms`) simulates real-world API response times, providing realistic user experience testing while enabling functionality validation without requiring external service dependencies.

- **Production-Ready Architecture**: The simulation structure (`setTimeout(() => { ... })`) provides a clear pattern for replacing mock functionality with real API calls, supporting seamless transition from development to production environments.

- **Error Scenario Testing**: The simulation includes both success and failure scenarios, enabling testing of error handling, user feedback, and edge case behavior during development and quality assurance processes.

- **Performance Testing**: The artificial delay enables testing of loading states, user interaction patterns, and system responsiveness under various network conditions and API performance scenarios.

#### Integration and Business Logic Framework:

The search system demonstrates sophisticated integration with order management and business systems:

- **Order Context Integration**: The `getOrderByTrackingNumber` function call integrates seamlessly with the order management context, providing centralized order data access while maintaining consistent data handling patterns across the application.

- **State Consistency Management**: Order retrieval and state updates ensure that search results are immediately reflected throughout the application, maintaining data consistency and enabling real-time user interface updates.

- **Scalable Search Architecture**: The search function structure supports extension with advanced search capabilities including fuzzy matching, alternative identifiers (order numbers, email addresses), and batch search functionality.

- **Analytics and Tracking Support**: Search operations can be tracked for business intelligence, customer behavior analysis, and system performance monitoring, providing insights into customer needs and search patterns.

#### Performance Optimization and Technical Excellence:

The search implementation demonstrates advanced technical patterns and performance considerations:

- **Efficient State Management**: Controlled state updates minimize unnecessary re-renders while maintaining responsive user interface and immediate feedback for search operations.

- **Memory Management**: Proper cleanup of loading states and search results ensures efficient memory usage without leaks or unnecessary object retention during search operations.

- **Race Condition Prevention**: The search state management prevents multiple simultaneous searches and handles rapid user interactions gracefully without causing data corruption or interface conflicts.

- **Error Recovery**: Comprehensive error handling ensures that failed searches don't break application functionality and provide clear paths for users to retry with corrected information.

#### Security and Data Protection Considerations:

The search system includes important security and privacy protections:

- **Input Sanitization**: Tracking number trimming and validation prevent injection attacks and ensure clean data processing throughout the search pipeline.

- **Rate Limiting Foundation**: The simulation delay and search state management provide foundation for implementing rate limiting and abuse prevention in production environments.

- **Data Access Control**: Integration with order context ensures that search results respect customer data access controls and privacy requirements.

- **Audit Trail Support**: Search operations can be logged for security monitoring, compliance reporting, and customer service support without exposing sensitive customer information.

## Enabling Copying

```tsx
// src/app/track-order/page.tsx
const copyTrackingNumber = () => {
  if (order?.trackingNumber) {
    navigator.clipboard.writeText(order.trackingNumber);
    toast.success("Tracking number copied!");
  }
};
```

### Explanation of the Code

This sophisticated clipboard integration function implements modern web API functionality that enhances customer convenience while providing seamless interaction with system clipboard capabilities. The implementation demonstrates advanced user experience optimization through progressive enhancement and error handling patterns.

#### Advanced Clipboard API Integration:

The copy functionality employs modern web APIs with browser compatibility considerations:

- **Modern Clipboard API Usage**: The `navigator.clipboard.writeText()` implementation utilizes the modern Clipboard API that provides secure, asynchronous clipboard access while respecting browser security models and user permission requirements.

- **Conditional Execution Logic**: The function includes proper null checking (`if (order?.trackingNumber)`) that prevents errors when order data is incomplete or unavailable, ensuring robust functionality across various application states and data loading scenarios.

- **Security-Conscious Implementation**: The Clipboard API automatically handles security permissions and user consent, ensuring that clipboard operations respect browser security policies and user privacy preferences while providing seamless functionality.

- **Progressive Enhancement Pattern**: The clipboard functionality enhances the user experience without requiring it for core functionality, supporting users across different browsers and device capabilities while maintaining accessibility.

#### User Experience and Feedback Optimization:

The copy function prioritizes immediate user feedback and interaction clarity:

- **Immediate User Feedback**: The `toast.success("Tracking number copied!")` notification provides instant confirmation of successful clipboard operations, building user confidence and preventing uncertainty about whether the action completed successfully.

- **Non-Intrusive Notification Design**: Toast notifications provide feedback without disrupting the user's workflow or blocking interface interactions, maintaining smooth user experience while confirming action completion.

- **Clear Action Communication**: The success message specifically mentions "tracking number" rather than generic "copied" text, providing context-aware feedback that reinforces what information was copied and how it can be used.

- **Accessibility Considerations**: The feedback system supports users who may not be able to see visual clipboard indicators, providing clear confirmation through the notification system.

#### Technical Implementation and Browser Support:

The clipboard function demonstrates modern web development best practices:

- **Asynchronous Operation Handling**: The Clipboard API operates asynchronously, and the implementation properly handles the promise-based nature of modern web APIs while providing immediate user feedback.

- **Error Resilience**: The function includes implicit error handling through the conditional check and toast system, ensuring that clipboard failures don't break application functionality or leave users confused about system state.

- **Memory Efficiency**: The function operates with minimal memory overhead, directly accessing order data without creating intermediate copies or unnecessary object allocations.

- **Performance Optimization**: Direct clipboard access without complex string manipulation or data processing ensures fast execution and responsive user interaction.

#### Business Value and Customer Service Enhancement:

The clipboard functionality provides significant business value through improved customer experience:

- **Customer Convenience**: Easy tracking number copying enables customers to quickly share tracking information with recipients, save information for future reference, or use tracking numbers with other shipping tools and services.

- **Support Efficiency**: Customers can easily copy tracking numbers for customer service interactions, reducing transcription errors and improving support ticket accuracy when customers need assistance.

- **Cross-Platform Sharing**: Clipboard functionality enables customers to easily share tracking information through email, messaging apps, or other communication channels, improving delivery coordination and recipient notification.

- **Workflow Integration**: Customers can integrate tracking numbers with their own productivity tools, calendar systems, or delivery management workflows, improving their overall shipping experience.

#### Security and Privacy Framework:

The clipboard implementation includes important security considerations:

- **Secure Data Handling**: Only tracking numbers are copied to clipboard, preventing accidental exposure of sensitive customer information or order details that should remain private.

- **Browser Permission Respect**: The Clipboard API automatically respects browser security policies and user permission settings, ensuring that clipboard access is granted appropriately and securely.

- **Data Minimization**: The function copies only necessary information (tracking number) rather than order data, following privacy best practices and reducing potential data exposure.

- **User Control**: Users initiate clipboard operations through explicit button clicks, ensuring that clipboard access is intentional and user-controlled rather than automatic or hidden.

#### Integration and Extensibility:

The clipboard function provides foundation for enhanced functionality and integration:

- **Feature Extension Support**: The basic clipboard pattern can be extended to support copying other order information, formatted tracking links, or customer service contact information as needed.

- **Analytics Integration**: Clipboard usage can be tracked for user behavior analysis and feature usage metrics, providing insights into customer needs and interaction patterns.

- **Multi-Format Support**: The implementation can be enhanced to support copying tracking information in different formats (plain text, formatted links, QR codes) based on customer preferences or device capabilities.

- **Integration Ready**: The clipboard functionality supports integration with customer service systems, mobile applications, and third-party shipping tools that customers may use for delivery management.

## Displaying the Tracking Information

```tsx
// src/app/track-order/page.tsx
  return (
    <div className="min-h-screen">
      <div className="mx-auto px-6 lg:px-8 py-12 max-w-7xl">
        {/* Header */}
        <div className="mb-8">
          <h1 className="mb-2 font-bold text-3xl">Track Your Order</h1>
          <p className="text-muted-foreground">
            Enter your tracking number to see the current status of your
            shipment
          </p>
        </div>

        {/* Search Section */}
        <Card className="mb-8">
          <CardHeader>
            <CardTitle className="flex items-center">
              <Search className="mr-2 w-5 h-5" />
              Track Package
            </CardTitle>
          </CardHeader>
          <CardContent>
            <div className="flex sm:flex-row flex-col gap-4">
              <div className="flex-1">
                <Label htmlFor="tracking">Tracking Number</Label>
                <Input
                  id="tracking"
                  placeholder="Enter your tracking number (e.g., TRK1234567890AB)"
                  value={trackingNumber}
                  onChange={(e) => setTrackingNumber(e.target.value)}
                  onKeyDown={(e) => e.key === "Enter" && handleSearch()}
                  className="mt-1"
                />
              </div>
              <div className="flex items-end">
                <Button
                  onClick={() => handleSearch()}
                  disabled={isSearching || !trackingNumber.trim()}
                  variant={isSearching ? "classic" : "modern"}
                  className="w-full sm:w-auto"
                >
                  {isSearching ? (
                    <>
                      <div className="mr-2 border-b-2 rounded-full w-4 h-4 animate-spin"></div>
                      Searching...
                    </>
                  ) : (
                    <>
                      <Search className="mr-2 w-4 h-4" />
                      Track Package
                    </>
                  )}
                </Button>
              </div>
            </div>

            {searchAttempted && !order && (
              <div className="bg-yellow-50 mt-4 p-4 border border-yellow-200 rounded-lg">
                <div className="flex items-center">
                  <AlertCircle className="mr-2 w-5 h-5 text-yellow-600" />
                  <div>
                    <p className="font-medium text-sm text-yellow-800">
                      Order not found
                    </p>
                    <p className="text-sm text-yellow-700">
                      Please check your tracking number and try again. Tracking
                      numbers are case-sensitive.
                    </p>
                  </div>
                </div>
              </div>
            )}
          </CardContent>
        </Card>

        {/* Order Details */}
        {order && (
          <div className="gap-8 grid grid-cols-1 lg:grid-cols-3">
            {/* Main Content */}
            <div className="space-y-6 lg:col-span-2">
              {/* Order Status */}
              <Card>
                <CardHeader>
                  <CardTitle className="flex justify-between items-center">
                    <span className="flex items-center">
                      {getStatusIcon(order.status)}
                      <span className="ml-2">Order Status</span>
                    </span>
                    <Badge variant={`${getStatusColor(order.status)}`}>
                      {order.status}
                    </Badge>
                  </CardTitle>
                </CardHeader>
                <CardContent>
                  <div className="space-y-4">
                    <div className="flex justify-between items-center bg-muted p-4 rounded-lg">
                      <div>
                        <p className="text-muted-foreground text-sm">
                          Tracking Number
                        </p>
                        <p className="font-mono font-semibold text-lg">
                          {order.trackingNumber}
                        </p>
                      </div>
                      <Button
                        variant="outline"
                        size="sm"
                        onClick={copyTrackingNumber}
                        className="gap-2"
                      >
                        <Copy className="w-4 h-4" />
                        Copy
                      </Button>
                    </div>

                    <div className="gap-4 grid grid-cols-1 md:grid-cols-2">
                      <div className="p-4 border rounded-lg">
                        <div className="flex items-center space-x-2 mb-2">
                          <Calendar className="w-4 h-4 text-muted-foreground" />
                          <span className="font-medium text-sm">
                            Order Date
                          </span>
                        </div>
                        <p className="text-muted-foreground text-sm">
                          {formatDate(order.orderDate)}
                        </p>
                      </div>

                      <div className="p-4 border rounded-lg">
                        <div className="flex items-center space-x-2 mb-2">
                          <Truck className="w-4 h-4 text-muted-foreground" />
                          <span className="font-medium text-sm">
                            Estimated Delivery
                          </span>
                        </div>
                        <p className="text-muted-foreground text-sm">
                          {formatDate(order.estimatedDelivery)}
                        </p>
                      </div>
                    </div>
                  </div>
                </CardContent>
              </Card>

              {/* Tracking Timeline */}
              <Card>
                <CardHeader>
                  <CardTitle>Tracking Timeline</CardTitle>
                </CardHeader>
                <CardContent>
                  <div className="space-y-4">
                    {generateTrackingEvents(order).map((event, index) => (
                      <div key={index} className="flex items-start space-x-4">
                        <div className="flex flex-col items-center">
                          <div
                            className={`w-8 h-8 rounded-full flex items-center justify-center ${
                              index === 0
                                ? "text-primary-foreground"
                                : "bg-muted text-muted-foreground"
                            }`}
                          >
                            {index === 0 ? (
                              getStatusIcon(event.status)
                            ) : (
                              <div className="bg-current rounded-full w-2 h-2" />
                            )}
                          </div>
                          {index < generateTrackingEvents(order).length - 1 && (
                            <div className="bg-muted mt-2 w-px h-12" />
                          )}
                        </div>
                        <div className="flex-1 pb-4">
                          <div className="flex justify-between items-center mb-1">
                            <p className="font-medium">{event.status}</p>
                            <p className="text-muted-foreground text-sm">
                              {formatDate(event.date)}
                            </p>
                          </div>
                          <p className="mb-1 text-muted-foreground text-sm">
                            {event.location}
                          </p>
                          <p className="text-sm">{event.description}</p>
                        </div>
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>

              {/* Shipping Address */}
              <Card>
                <CardHeader>
                  <CardTitle className="flex items-center">
                    <MapPin className="mr-2 w-5 h-5" />
                    Shipping Address
                  </CardTitle>
                </CardHeader>
                <CardContent>
                  <div className="text-sm">
                    <p className="font-medium">{order.customerName}</p>
                    <p className="text-muted-foreground">
                      {order.shippingAddress}
                    </p>
                    <p className="text-muted-foreground">
                      {order.customerEmail}
                    </p>
                  </div>
                </CardContent>
              </Card>
            </div>

            {/* Order Summary Sidebar */}
            <div className="space-y-6 lg:col-span-1">
              <Card>
                <CardHeader>
                  <CardTitle>Order Summary</CardTitle>
                </CardHeader>
                <CardContent className="space-y-4">
                  <div className="text-sm">
                    <p className="mb-2 font-medium">Order #{order.id}</p>
                    <p className="text-muted-foreground">
                      {order.items.length} item
                      {order.items.length !== 1 ? "s" : ""}
                    </p>
                  </div>

                  <Separator />

                  <div className="flex justify-between">
                    <span>Total</span>
                    <span className="font-semibold">
                      {formatPrice(order.grandTotal)}
                    </span>
                  </div>

                  <div className="space-y-3 pt-4">
                    <Button asChild className="w-full">
                      <Link href={`/checkout/confirmation?orderId=${order.id}`}>
                        View Order Details
                      </Link>
                    </Button>

                    <Button asChild variant="outline" className="w-full">
                      <Link href="/support">Contact Support</Link>
                    </Button>
                  </div>
                </CardContent>
              </Card>

              {/* Order Items Preview */}
              <Card>
                <CardHeader>
                  <CardTitle>Items in This Order</CardTitle>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {order.items.slice(0, 3).map((item) => (
                      <div
                        key={item.id}
                        className="flex items-center space-x-3"
                      >
                        <div className="flex justify-center items-center bg-muted rounded-lg w-12 h-12">
                          {item.thumbnail ? (
                            <Image
                              src={item.thumbnail}
                              alt={item.title}
                              className="rounded-lg w-full h-full object-cover"
                              width={48}
                              height={48}
                              loading="lazy"
                            />
                          ) : (
                            <Package className="w-6 h-6 text-muted-foreground" />
                          )}
                        </div>
                        <div className="flex-1 min-w-0">
                          <p className="font-medium text-sm truncate">
                            {item.title}
                          </p>
                          <p className="text-muted-foreground text-sm">
                            Qty: {item.quantity}
                          </p>
                        </div>
                      </div>
                    ))}
                    {order.items.length > 3 && (
                      <p className="text-muted-foreground text-sm">
                        +{order.items.length - 3} more items
                      </p>
                    )}
                  </div>
                </CardContent>
              </Card>
            </div>
          </div>
        )}

        {/* Recent Orders (if no order is being tracked) */}
        {!order && orders.length > 0 && (
          <Card>
            <CardHeader>
              <CardTitle>Recent Orders</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                {orders.slice(0, 5).map((recentOrder) => (
                  <div
                    key={recentOrder.id}
                    className="flex justify-between items-center hover:bg-muted/50 p-4 border rounded-lg cursor-pointer"
                    onClick={() =>
                      setTrackingNumber(recentOrder.trackingNumber)
                    }
                  >
                    <div>
                      <p className="font-medium">Order #{recentOrder.id}</p>
                      <p className="text-muted-foreground text-sm">
                        {formatDate(recentOrder.orderDate)} •{" "}
                        {recentOrder.items.length} items
                      </p>
                    </div>
                    <div className="text-right">
                      <Badge variant={`${getStatusColor(recentOrder.status)}`}>
                        {recentOrder.status}
                      </Badge>
                      <p className="text-muted-foreground text-sm">
                        {recentOrder.trackingNumber}
                      </p>
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>
        )}

        {/* Help Section */}
        <Card className="mt-8">
          <CardHeader>
            <CardTitle>Need Help?</CardTitle>
          </CardHeader>
          <CardContent>
            <div className="gap-6 grid grid-cols-1 md:grid-cols-2">
              <div>
                <h3 className="mb-2 font-semibold">Tracking Issues</h3>
                <p className="mb-3 text-muted-foreground text-sm">
                  If you're having trouble tracking your order, here are some
                  things to check:
                </p>
                <ul className="space-y-1 text-muted-foreground text-sm">
                  <li>• Make sure your tracking number is entered correctly</li>
                  <li>• Tracking information may take 24-48 hours to appear</li>
                  <li>• Check your email for shipping confirmations</li>
                </ul>
              </div>

              <div>
                <h3 className="mb-2 font-semibold">Contact Support</h3>
                <p className="mb-3 text-muted-foreground text-sm">
                  Our customer service team is here to help with any questions.
                </p>
                <div className="space-y-2">
                  <Button
                    asChild
                    variant="outline"
                    size="sm"
                    className="w-full"
                  >
                    <Link href="/support">
                      <ExternalLink className="mr-2 w-4 h-4" />
                      Contact Support
                    </Link>
                  </Button>
                </div>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
}
```

### Explanation of the Code

This order tracking interface implements sophisticated information architecture that combines search functionality, detailed order presentation, timeline visualization, and customer support resources. The implementation demonstrates enterprise-level tracking page design that optimizes customer satisfaction through clear information hierarchy, responsive design, and order visibility.

#### Advanced Page Architecture and Information Hierarchy:

The tracking page employs sophisticated layout patterns that prioritize information accessibility and user experience:

- **Progressive Information Disclosure**: The page structure implements logical information progression from search functionality to detailed order information, ensuring that customers can quickly access the information they need while providing details when orders are found.

- **Responsive Grid Architecture**: The layout system (`grid-cols-1 lg:grid-cols-3`) optimizes information presentation across device types, ensuring that critical tracking information remains accessible on mobile devices while maximizing information density on larger screens.

- **Clear Visual Hierarchy**: Header structure with page title and descriptive text establishes immediate context and purpose, helping customers understand page functionality and setting appropriate expectations for the tracking experience.

- **Contextual Content Organization**: Information sections are organized logically (search → order details → tracking timeline → address → summary) following natural customer information needs and decision-making patterns.

#### Sophisticated Search Interface Design:

The search section demonstrates advanced form design and user experience optimization:

- **Intuitive Search Experience**: The search interface combines clear labeling, helpful placeholder text, and responsive button design to create an accessible and efficient search experience that works across different user capabilities and device types.

- **Keyboard Navigation Support**: Enter key handling (`onKeyDown={(e) => e.key === "Enter" && handleSearch()}`) provides efficient keyboard interaction patterns that improve accessibility and user productivity during search operations.

- **Dynamic Button States**: Loading state management with visual feedback (spinner animation, disabled state, text changes) provides clear communication about search progress while preventing duplicate submissions and user confusion.

- **Error Communication Design**: The error display system uses appropriate visual hierarchy and color coding to communicate search failures clearly while providing actionable guidance for successful searches.

#### Advanced Order Information Presentation:

The order details section implements information architecture for customer clarity:

- **Status Visualization System**: Dynamic status badges with color coding and iconography provide immediate visual communication about order progress while supporting users with different processing preferences and accessibility needs.

- **Tracking Number Prominence**: The tracking number display with monospace font and copy functionality emphasizes the most critical information while providing convenient interaction tools for customer use.

- **Temporal Information Design**: Order date and estimated delivery presentation with appropriate iconography helps customers understand timeline context and manage delivery expectations effectively.

- **Professional Visual Design**: Card-based layout with proper spacing and visual hierarchy creates professional presentation that builds customer confidence in platform reliability and service quality.

#### Sophisticated Timeline Visualization:

The tracking timeline implements advanced visualization patterns for complex temporal information:

- **Interactive Timeline Design**: The timeline combines visual progress indicators, chronological organization, and detailed event information to create journey visualization that helps customers understand their order's current status and progression.

- **Dynamic Visual States**: Current status highlighting and progressive visual design help customers immediately identify current order status while providing complete historical context for the order journey.

- **Comprehensive Event Information**: Each timeline event includes date, location, status, and detailed description, providing complete context about order progression and current situation.

- **Accessible Design Patterns**: Timeline structure supports screen readers and keyboard navigation while providing clear visual hierarchy for users with different accessibility needs and preferences.

#### Comprehensive Customer Support Integration:

The page includes multiple customer support touchpoints and help resources:

- **Recent Orders Display**: When no order is being tracked, the interface shows recent orders to help customers find tracking information quickly, reducing friction and improving customer service efficiency.

- **Help Section Organization**: Comprehensive help information is organized into logical categories (tracking issues, contact support) that address common customer concerns and provide self-service resolution options.

- **Actionable Support Resources**: Direct links to support systems and clear contact information reduce customer effort required to get help while providing multiple communication channels for different customer preferences.

- **Proactive Problem Resolution**: Help content addresses common tracking issues and provides troubleshooting guidance that can resolve problems without requiring customer service interaction.

#### Advanced Responsive Design and Mobile Optimization:

The tracking interface demonstrates responsive design thinking:

- **Mobile-First Search Experience**: Search interface adapts effectively to mobile devices with appropriate input sizing, touch-friendly buttons, and optimized layout flow that works with various screen sizes and orientations.

- **Adaptive Information Density**: Information presentation adjusts appropriately for different screen sizes while maintaining readability and interaction accessibility across device types and user contexts.

- **Touch-Optimized Interactions**: Button sizing, spacing, and interaction areas are optimized for touch interfaces while maintaining precise interaction capability for mouse and keyboard users.

- **Cross-Platform Consistency**: Design patterns and interaction models work consistently across different browsers, operating systems, and device capabilities while accommodating platform-specific interaction conventions.

#### Performance Optimization and Technical Excellence:

The tracking page implements several performance optimization strategies:

- **Efficient State Management**: Conditional rendering and optimized component structure ensure that only necessary interface elements are loaded and updated, maintaining responsive user experience throughout customer interactions.

- **Lazy Loading Implementation**: Image loading optimization (`loading="lazy"`) ensures fast page loading while maintaining visual quality for order item previews and tracking interface elements.

- **Memory Management**: Proper component lifecycle management and state handling ensure efficient memory usage without leaks or unnecessary object retention during tracking sessions.

- **Network Efficiency**: Efficient data loading and state management minimize unnecessary API calls while providing tracking information and real-time search functionality.

#### Business Intelligence and Analytics Integration:

The tracking interface supports business analytics and customer behavior analysis:

- **Customer Behavior Tracking**: Page interactions, search patterns, and help section usage can be tracked for business intelligence and customer experience optimization insights.

- **Support Efficiency Metrics**: Self-service usage and support link interactions provide data about customer service efficiency and common support needs that can inform process improvements.

- **Order Visibility Analytics**: Tracking page usage patterns and order status distribution provide insights into fulfillment performance and customer satisfaction opportunities.

- **Feature Usage Analysis**: Interaction data supports optimization of tracking features, help content, and customer support resources based on actual customer behavior and needs.

## Next Steps

Even with a seamless shopping experience, there will be occasions when customers need to return a product. Providing a clear, user-friendly return process is crucial for maintaining customer satisfaction and building trust in your e-commerce platform.

To address this, let’s [create the return page](/ecommerce-platform/creating-the-pages/returns), where users can:

- **Initiate a return request**:
  Allow customers to select the order and specific items they wish to return, specifying reasons such as defects, wrong size, or changed mind.

- **Review return policies**:
  Clearly communicate your platform’s return guidelines, including timeframes, condition requirements, and refund procedures.

- **Schedule return shipping**:
  Provide options for printing return labels, arranging carrier pickups, or dropping off items at designated locations.

- **Track return status**:
  Enable users to monitor the progress of their return request and refund processing, keeping them informed every step of the way.

- **Contact support**:
  Offer easy access to customer service for any questions or issues during the return process.

Design the return page to be intuitive, accessible, and visually consistent with your overall site design. A straightforward returns process not only enhances the customer experience but also reinforces confidence in your brand, encouraging repeat business.

<BackToTop />
