import BackToTop from "@/components/BackToTop";

# The Wishlist

## Table of Contents

## The `import` Statements and Storing Data

```tsx
// src/app/wishlist/page.tsx
"use client";

import { useAuth } from "@/app/context/authContext";
import { useCart } from "@/app/context/cartContext";
import { useCurrency } from "@/app/context/currencyContext";
import { useWishlist } from "@/app/context/wishlistContext";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Card, CardContent } from "@/components/ui/card";
import { displayRatingStars } from "@/lib/displayRatingStars";
import { Heart, PackageCheck, ShoppingCart, Trash2 } from "lucide-react";
import Image from "next/image";
import Link from "next/link";
import { useRouter } from "next/navigation";
import { toast } from "sonner";

export default function WishlistPage() {
  const { activeWishlistItems, purchasedItems, removeFromWishlist, isLoading } = useWishlist();
  const { addToCart, isInCart } = useCart();
  const { isLoggedIn } = useAuth();
  const { formatPrice } = useCurrency();
  const router = useRouter();
```

### Explanation of the Code

This code imports necessary hooks and components for managing the wishlist functionality in our e-commerce platform. It includes authentication, cart management, currency formatting, and UI components like badges, buttons, and cards. The `useRouter` hook is used for navigation within the application.

## Handling Access Control

```tsx
// src/app/wishlist/page.tsx
if (!isLoggedIn) {
  return (
    <div className="mx-auto px-6 lg:px-8 py-12 max-w-7xl">
      <div className="text-center">
        <Heart className="mx-auto mb-4 w-16 h-16 text-gray-400" />
        <h1 className="mb-2 font-bold text-2xl">Your Wishlist</h1>
        <p className="mb-6 text-gray-600">
          Please log in to view your wishlist
        </p>
        <div className="space-x-4">
          <Button asChild>
            <Link href="/login">Log In</Link>
          </Button>
          <Button variant="outline" asChild>
            <Link href="/register">Sign Up</Link>
          </Button>
        </div>
      </div>
    </div>
  );
}
```

### Explanation of the Code

This code checks if the user is logged in. If not, it displays a message prompting them to log in or sign up to view their wishlist. The `Heart` icon is used to visually represent the wishlist, and buttons are provided for navigation to the login and registration pages.

## Checking Wishlist State

```tsx
// src/app/wishlist/page.tsx
if (activeWishlistItems.length === 0 && purchasedItems.length === 0) {
  return (
    <div className="mx-auto px-6 lg:px-8 py-12 max-w-7xl">
      <div className="text-center">
        <Heart className="mx-auto mb-4 w-16 h-16 text-gray-400" />
        <h1 className="mb-2 font-bold text-2xl">Your Wishlist</h1>
        <p className="mb-6 text-gray-600">
          You haven't added any items to your wishlist yet
        </p>
        <Button asChild>
          <Link href="/shopping">Start Shopping</Link>
        </Button>
      </div>
    </div>
  );
}
```

### Explanation of the Code

This code checks if the user has any items in their wishlist or purchased items. If both lists are empty, it displays a message indicating that the wishlist is empty and provides a button to navigate back to the shopping page.

## Moving Wishlist Items to Cart

```tsx
// src/app/wishlist/page.tsx
const handleMoveToCart = async (productId: number) => {
  const wishlistItem = activeWishlistItems.find(
    (item) => item.id === productId,
  );
  if (!wishlistItem) return;

  // Add to cart
  addToCart(wishlistItem.product);

  // Remove from wishlist
  const result = await removeFromWishlist(productId);
  if (result.success) {
    toast.success("Item moved to cart");
  } else {
    toast.error(result.message);
  }
};
```

### Explanation of the Code

This function handles moving an item from the wishlist to the cart. It first checks if the item exists in the wishlist, then adds it to the cart using the `addToCart` function. After that, it removes the item from the wishlist and displays a success or error message using `toast`.

## Removing Items from Wishlist

```tsx
// src/app/wishlist/page.tsx
const handleRemoveFromWishlist = async (productId: number) => {
  const result = await removeFromWishlist(productId);
  if (result.success) {
    toast.success(result.message);
  } else {
    toast.error(result.message);
  }
};
```

### Explanation of the Code

This function handles the removal of an item from the wishlist. It calls the `removeFromWishlist` function and displays a success or error message based on the result.

## Displaying the Wishlist

```tsx
// src/app/wishlist/page.tsx

  return (
    <div className="mx-auto px-6 lg:px-8 py-12 max-w-7xl">
      <div className="mb-8">
        <h1 className="mb-2 font-bold text-3xl">Your Wishlist</h1>
        <p className="text-gray-600">
          {activeWishlistItems.length}{" "}
          {activeWishlistItems.length === 1 ? "item" : "items"} in your wishlist
        </p>
      </div>

      {/* Active Wishlist Items */}
      {activeWishlistItems.length > 0 && (
        <div className="mb-12">
          <h2 className="mb-6 font-semibold text-xl">Wishlist Items</h2>
          <div className="gap-6 grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
            {activeWishlistItems.map((wishlistItem) => {
              const { product } = wishlistItem;
              return (
                <Card
                  key={product.id}
                  className="group hover:shadow-lg transition-all duration-300 overflow-hidden"
                >
                  <div className="relative">
                    <div className="overflow-hidden aspect-square">
                      {product.thumbnail ? (
                        <Image
                          src={product.thumbnail}
                          alt={product.title}
                          width={300}
                          height={300}
                          className="w-full h-full transition-transform duration-300 object-cover group-hover:scale-105"
                        />
                      ) : (
                        <div className="flex justify-center items-center bg-gray-200 w-full h-full text-gray-400">
                          No Image
                        </div>
                      )}
                    </div>

                    {/* Discount Badge */}
                    {product.discountPercentage &&
                      product.discountPercentage > 0 && (
                        <Badge className="top-3 left-3 absolute bg-red-500 hover:bg-red-600 shadow-lg text-white">
                          -{Math.round(product.discountPercentage)}%
                        </Badge>
                      )}

                    {/* Remove Button */}
                    <Button
                      variant="ghost"
                      size="sm"
                      onClick={() => handleRemoveFromWishlist(product.id)}
                      className="top-3 right-3 absolute bg-white/80 hover:bg-white dark:bg-slate-800/80 dark:hover:bg-slate-800 backdrop-blur-sm"
                      disabled={isLoading}
                    >
                      <Trash2 className="w-4 h-4 text-red-500" />
                    </Button>
                  </div>

                  <CardContent className="p-4">
                    <div className="mb-2">
                      <h3 className="min-h-[2.5rem] font-semibold line-clamp-2">
                        {product.title}
                      </h3>
                      {product.brand && (
                        <Badge variant="outline" className="mt-1 text-xs">
                          {product.brand}
                        </Badge>
                      )}
                    </div>

                    <p className="mb-3 text-gray-600 text-sm line-clamp-2">
                      {product.description}
                    </p>

                    {/* Rating */}
                    {product.rating && (
                      <div className="flex items-center gap-1 mb-3">
                        <div className="flex">
                          {displayRatingStars(product.rating)}
                        </div>
                        <span className="text-gray-500 text-sm">
                          ({product.rating})
                        </span>
                      </div>
                    )}

                    {/* Price */}
                    <div className="flex items-center gap-2 mb-4">
                      <span className="font-bold text-primary text-xl">
                        {formatPrice(product.price)}
                      </span>
                      {product.discountPercentage &&
                        product.discountPercentage > 0 && (
                          <span className="text-gray-500 text-sm line-through">
                            {formatPrice(
                              product.price /
                                (1 - product.discountPercentage / 100)
                            )}
                          </span>
                        )}
                    </div>

                    {/* Action Buttons */}
                    <div className="space-y-2">
                      <Button
                        onClick={() => handleMoveToCart(product.id)}
                        className="w-full"
                        disabled={isLoading}
                      >
                        <ShoppingCart className="mr-2 w-4 h-4" />
                        {isInCart(product.id)
                          ? "Already in Cart"
                          : "Move to Cart"}
                      </Button>

                      <p className="text-center text-gray-500 text-xs">
                        Added{" "}
                        {new Date(wishlistItem.addedAt).toLocaleDateString()}
                      </p>
                    </div>
                  </CardContent>
                </Card>
              );
            })}
          </div>
        </div>
      )}

      {/* Purchased Items */}
      {purchasedItems.length > 0 && (
        <div>
          <h2 className="flex items-center gap-2 mb-6 font-semibold text-xl">
            <PackageCheck className="w-5 h-5" />
            Previously Purchased ({purchasedItems.length})
          </h2>
          <div className="gap-4 grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
            {purchasedItems.map((wishlistItem) => {
              const { product } = wishlistItem;
              return (
                <Card key={`purchased-${product.id}`} className="opacity-75">
                  <div className="relative">
                    <div className="overflow-hidden aspect-square">
                      {product.thumbnail ? (
                        <Image
                          src={product.thumbnail}
                          alt={product.title}
                          width={200}
                          height={200}
                          className="w-full h-full object-cover"
                        />
                      ) : (
                        <div className="flex justify-center items-center bg-gray-200 w-full h-full text-gray-400">
                          No Image
                        </div>
                      )}
                    </div>

                    <Badge className="top-3 left-3 absolute bg-green-500">
                      <PackageCheck className="mr-1 w-3 h-3" />
                      Purchased
                    </Badge>
                  </div>

                  <CardContent className="p-4">
                    <h3 className="mb-2 font-semibold line-clamp-2">
                      {product.title}
                    </h3>
                    <p className="text-gray-500 text-sm">
                      Purchased {wishlistItem.purchasedAt?.toLocaleDateString()}
                    </p>
                  </CardContent>
                </Card>
              );
            })}
          </div>
        </div>
      )}
    </div>
  );
}
```

### Explanation of the Code

This code renders the wishlist page, displaying both active wishlist items and previously purchased items. It uses a grid layout to show each item in a card format, including product images, titles, descriptions, ratings, prices, and action buttons for moving items to the cart or removing them from the wishlist. The purchased items are displayed with reduced opacity to indicate they are no longer active in the wishlist.

## Next Steps

Now that the core functionality of our e-commerce platform is firmly in place—including product browsing, cart management, checkout, and account features—it’s time to turn our attention to key informational pages that complete the user experience and establish your brand as a trustworthy, customer-centric business.

These pages—such as the About Us, Careers, Contact Us, Terms of Service, and Sizing Guide—play a vital role in communicating your mission, values, policies, and practical information to your visitors. They not only enhance transparency and credibility but also foster user confidence, which is essential for converting first-time visitors into loyal customers.

The **About Us page** will introduce your company’s story, values, and vision, allowing customers to connect emotionally with your brand. The **Careers page** will enable you to attract top talent by showcasing open positions, your workplace culture, and the benefits of joining your team. The **Contact Us page** will make it easy for visitors to reach out with questions, feedback, or support requests, improving customer service and engagement.

The **Terms of Service page** is critical for clearly outlining your store policies, legal terms, and expectations, helping protect both you and your customers while fostering transparency. Finally, a **Sizing Guide page** will provide customers with the information they need to make confident purchasing decisions—reducing returns, improving satisfaction, and increasing conversion rates.

These pages are essential to delivering a complete, polished, and professional e-commerce experience. Together, they build trust, improve usability, and strengthen your brand identity.

Let’s start by [creating the About Us page](/ecommerce-platform/creating-the-pages/about-us), which will set the tone for your brand story and customer relationships.

<BackToTop />
