import BackToTop from "@/components/BackToTop";

# Top-Level Files

## Table of Contents

## Overview

Top-level files in a Next.js application are crucial for defining the structure and behavior of the application. They include configuration files, entry points, and other essential files that help in the development and deployment of the application. Understanding these files is important for developers to effectively manage and customize their Next.js projects.

## Key Top-Level Files

| File Name            | Description                                                                                                                                                                                                                                                                                                                             |
| -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `next.config.js`     | This file is used to configure various aspects of the Next.js application, such as custom routes, environment variables, and other settings. It allows developers to customize the behavior of the Next.js framework to suit their specific needs.                                                                                      |
| `package.json`       | This file contains metadata about the project, including dependencies, scripts, and other configurations. It is essential for managing the project's dependencies and defining scripts for building, testing, and running the application.                                                                                              |
| `package-lock.json`  | This file is automatically generated when installing dependencies and contains a detailed description of the dependency tree, including versions and resolved URLs. It ensures that the same versions of dependencies are installed across different environments, providing consistency in the application.                            |
| `node_modules/`      | This directory contains all the installed dependencies for the Next.js application. It is automatically created when running `npm install` or `yarn install`, and it includes all the packages required for the application to function properly.                                                                                       |
| `middleware.js`      | This file is used to define middleware functions that can intercept requests and responses in the Next.js application. Middleware allows developers to implement custom logic, such as authentication, logging, or data transformation, before the request reaches the page or API route.                                               |
| `.env`               | This file is used to define environment variables for the Next.js application. Environment variables allow developers to store sensitive information, such as API keys or database credentials, outside of the codebase, ensuring better security and flexibility in different environments (development, staging, production).         |
| `.env.local`         | This file is used to define local environment variables that are specific to the development environment. It allows developers to set up configurations that are not shared with other environments, such as local database connections or API endpoints.                                                                               |
| `.env.development`   | This file is used to define environment variables specifically for the development environment. It allows developers to set configurations that are only applicable during development, such as API endpoints or feature flags that differ from production settings.                                                                    |
| `.env.production`    | This file is used to define environment variables specifically for the production environment. It allows developers to set configurations that are only applicable in production, such as API endpoints or feature flags that differ from development settings.                                                                         |
| `.gitignore`         | This file specifies which files and directories should be ignored by Git when committing changes. It helps keep the repository clean by excluding files that are not necessary for version control, such as build artifacts or sensitive configuration files.                                                                           |
| `.eslint.config.mjs` | This file is used to configure ESLint, a tool for identifying and fixing problems in JavaScript code. It allows developers to define coding standards, rules, and plugins to ensure code quality and consistency across the project.                                                                                                    |
| `.prettierrc`        | This file is used to configure Prettier, a code formatter that helps maintain consistent code style across the project. It allows developers to define formatting rules, such as indentation, line length, and other stylistic preferences.                                                                                             |
| `tsconfig.json`      | This file is used to configure TypeScript settings for the Next.js application. It allows developers to define compiler options, type checking rules, and other TypeScript-specific configurations, enabling better type safety and development experience.                                                                             |
| `next-env.d.ts`      | This file is automatically generated by Next.js when using TypeScript. It contains type definitions for Next.js features, ensuring that TypeScript can properly understand and type-check the Next.js code. It is essential for enabling TypeScript support in a Next.js application.                                                   |
| `README.md`          | This file contains documentation for the Next.js application, including setup instructions, usage guidelines, and other relevant information. It serves as a reference for developers working on the project and helps maintain clarity about the project's purpose and functionality.                                                  |
| `LICENSE`            | This file contains the license information for the Next.js application, specifying the terms under which the code can be used, modified, and distributed. It is important for legal compliance and clarifying the rights of users and contributors to the project.                                                                      |
| `.next/`             | This directory contains build artifacts and other files generated by Next.js during the build process. It is used to store optimized versions of the application, including static assets, server-rendered pages, and other files required for deployment.                                                                              |
| `public/`            | This directory contains static assets that can be served directly by the Next.js application. It is used to store images, fonts, and other files that do not require processing by Next.js. Files in this directory can be accessed directly via the URL path, making it easy to serve static content without additional configuration. |

<BackToTop />

### The Importance of Top-Level Files

Top-level files play a crucial role in the development and deployment of Next.js applications. They provide essential configurations, manage dependencies, and define the structure of the application. Understanding these files is important for developers to effectively manage their projects, customize the behavior of the application, and ensure smooth development workflows.

## `next.config.js`

The `next.config.js` file is a configuration file for Next.js applications. It allows developers to customize various aspects of the application, such as routing, environment variables, and other settings. This file is essential for defining how the Next.js framework should behave and interact with the application code.

## Key Features of `next.config.js`

- **Custom Routes**: Developers can define custom routes in this file, allowing for more flexible routing configurations beyond the default file-based routing provided by Next.js. This is useful for creating dynamic routes or handling specific URL patterns.
- **Environment Variables**: The `next.config.js` file can be used to define environment variables that are accessible throughout the application. This is useful for storing sensitive information, such as API keys or database credentials, without hardcoding them in the application code.
- **Build Configuration**: Developers can customize the build process by defining specific configurations in this file. This includes options for optimizing performance, enabling experimental features, and configuring plugins or loaders.
- **Custom Webpack Configuration**: The `next.config.js` file allows developers to extend or modify the default Webpack configuration used by Next.js. This is useful for adding custom loaders, plugins, or other Webpack-specific configurations to enhance the build process.

### Example of `next.config.js`

```javascript
/** @type {import('next').NextConfig} */
const nextConfig = {
  reactStrictMode: true,
};

module.exports = nextConfig;
```

This example shows a basic configuration for a Next.js application, enabling React's strict mode for better error handling and warnings during development. Developers can add more configurations as needed to customize the behavior of their Next.js application.

## `package.json`

The `package.json` file is a crucial part of any Node.js application, including Next.js projects. It serves as the metadata file for the project, containing information about the project, its dependencies, scripts, and other configurations. This file is essential for managing the project's dependencies and defining scripts for building, testing, and running the application.

##### Key Features of `package.json`

- **Project Metadata**: The `package.json` file contains metadata about the project, such as the project name, version, description, author, and license. This information is useful for understanding the project and its purpose.
- **Dependencies**: The file lists all the dependencies required for the project, including both runtime and development dependencies. This allows developers to easily manage and install the necessary packages using package managers like npm or yarn.
- **Scripts**: The `package.json` file defines scripts that can be run using the command line. These scripts can include commands for building the application, running tests, starting the development server, and more. This provides a convenient way to automate common tasks in the development workflow.

## `package.json` Example

```json
{
  "name": "my-nextjs-app",
  "version": "1.0.0",
  "description": "A Next.js application",
  "author": "Your Name",
  "license": "MIT",
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start"
  },
  "dependencies": {
    "next": "^12.0.0",
    "react": "^17.0.0",
    "react-dom": "^17.0.0"
  },
  "devDependencies": {
    "eslint": "^7.0.0",
    "prettier": "^2.0.0"
  }
}
```

This example shows a basic `package.json` file for a Next.js application. It includes project metadata, scripts for development and production, and dependencies required for the application to function properly. Developers can customize this file to suit their project's needs by adding or removing dependencies and scripts as necessary.

### `package-lock.json`

The `package-lock.json` file is automatically generated when installing dependencies in a Node.js project. It contains a detailed description of the dependency tree, including versions and resolved URLs for each package. This file is essential for ensuring that the same versions of dependencies are installed across different environments, providing consistency in the application.

##### Key Features of `package-lock.json`

- **Dependency Tree**: The file contains a complete snapshot of the dependency tree, including all direct and transitive dependencies. This ensures that the exact versions of packages are installed, preventing issues caused by version mismatches.
- **Version Locking**: The `package-lock.json` file locks the versions of dependencies, ensuring that the same versions are used in all environments (development, staging, production). This helps avoid unexpected behavior due to version changes in dependencies.
- **Performance Optimization**: The file includes metadata about the packages, such as their integrity hashes and resolved URLs. This allows package managers to optimize the installation process by skipping unnecessary network requests and ensuring that the installed packages match the expected versions.

##### NOTE

> The `package-lock.json` file is automatically generated and should not be manually edited. It is important to commit this file to version control to ensure that all team members and deployment environments use the same dependency versions.

## `middleware.js`

The `middleware.js` file in a Next.js application is used to define middleware functions that can intercept requests and responses. Middleware allows developers to implement custom logic, such as authentication, logging, or data transformation, before the request reaches the page or API route. This provides a powerful way to enhance the functionality of the application and manage requests effectively.

##### Key Features of `middleware.js`

- **Request Interception**: Middleware functions can intercept incoming requests, allowing developers to perform actions before the request is processed by the page or API route. This is useful for implementing authentication checks, logging requests, or modifying request headers.
- **Response Modification**: Middleware can also modify the response before it is sent back to the client. This allows developers to add custom headers, modify response data, or implement caching strategies.
- **Error Handling**: Middleware can be used to handle errors that occur during request processing. This allows developers to implement custom error handling logic, such as logging errors or returning specific error responses to the client.

### Example of `middleware.js`

```javascript
import { NextResponse } from "next/server";
export function middleware(request) {
  // Check if the user is authenticated
  const isAuthenticated = request.cookies.get("auth_token");

  if (!isAuthenticated) {
    // Redirect to the login page if not authenticated
    return NextResponse.redirect(new URL("/login", request.url));
  }

  // Continue processing the request if authenticated
  return NextResponse.next();
}
```

This example shows a simple middleware function that checks if the user is authenticated by looking for an `auth_token` cookie. If the user is not authenticated, it redirects them to the login page. If the user is authenticated, it allows the request to continue processing.

<BackToTop />

## `.env` Files

The `.env` files in a Next.js application are used to define environment variables that can be accessed throughout the application. Environment variables allow developers to store sensitive information, such as API keys or database credentials, outside of the codebase, ensuring better security and flexibility in different environments (development, staging, production).

##### Key Features of `.env` Files

- **Environment-Specific Configurations**: Each `.env` file can contain environment-specific configurations, allowing developers to define different settings for development, staging, and production environments. This helps maintain a clean separation of configurations and prevents accidental exposure of sensitive information.
- **Sensitive Information Storage**: Environment variables are ideal for storing sensitive information that should not be hardcoded in the application code. This includes API keys, database connection strings, and other credentials that should remain private.
- **Accessing Environment Variables**: Next.js provides a built-in mechanism to access environment variables defined in `.env` files. Developers can use `process.env.VARIABLE_NAME` to access the values of environment variables in their application code.

### Example of `.env` Files

```txt title=".env"
NEXT_PUBLIC_API_URL=https://api.example.com
DATABASE_URL=mongodb://localhost:27017/mydatabase
NEXT_PUBLIC_ANALYTICS_KEY=your_analytics_key
```

This example shows a basic `.env` file containing environment variables for a Next.js application. The `NEXT_PUBLIC_API_URL` variable is prefixed with `NEXT_PUBLIC_`, indicating that it can be accessed in the client-side code. The `DATABASE_URL` variable is used for server-side configurations, while the `NEXT_PUBLIC_ANALYTICS_KEY` variable is used for client-side analytics tracking.

### `.env.local`, `.env.development`, and `.env.production` Files

The `.env.local`, `.env.development`, and `.env.production` files are specific environment configuration files used in Next.js applications. They allow developers to define environment variables that are specific to different stages of the application lifecycle, such as development, staging, and production.

###### Key Features of Environment-Specific `.env` Files

- **`.env.local`**: This file is used to define local environment variables that are specific to the development environment. It allows developers to set up configurations that are not shared with other environments, such as local database connections or API endpoints. This file is typically ignored by version control systems to prevent sensitive information from being exposed.
- **`.env.development`**: This file is used to define environment variables specifically for the development environment. It allows developers to set configurations that are only applicable during development, such as API endpoints or feature flags that differ from production settings. This file is useful for testing and debugging during the development phase.
- **`.env.production`**: This file is used to define environment variables specifically for the production environment. It allows developers to set configurations that are only applicable in production, such as API endpoints or feature flags that differ from development settings. This ensures that the application behaves correctly in a production environment without exposing sensitive information.

```javascript
// Example of .env.local
NEXT_PUBLIC_API_URL=http://localhost:3000/api
DATABASE_URL=mongodb://localhost:27017/mydatabase
// Example of .env.development
NEXT_PUBLIC_API_URL=https://dev.api.example.com
DATABASE_URL=mongodb://dev.db.example.com:27017/mydatabase
// Example of .env.production
NEXT_PUBLIC_API_URL=https://api.example.com
DATABASE_URL=mongodb://prod.db.example.com:27017/mydatabase
```

<BackToTop />

## `.gitignore`

The `.gitignore` file is an essential part of any Git repository, including Next.js applications. It specifies which files and directories should be ignored by Git when committing changes. This helps keep the repository clean by excluding files that are not necessary for version control, such as build artifacts, temporary files, and sensitive configuration files.

##### Key Features of `.gitignore`

- **Exclusion of Unnecessary Files**: The `.gitignore` file allows developers to specify files and directories that should not be tracked by Git. This includes build artifacts, logs, temporary files, and other files that are generated during the development process but do not need to be versioned.
- **Sensitive Information Protection**: Sensitive configuration files, such as `.env` files containing API keys or database credentials, can be excluded from version control using the `.gitignore` file. This helps prevent accidental exposure of sensitive information in the repository.
- **Customizable Rules**: Developers can define custom rules in the `.gitignore` file to specify which files or directories should be ignored. This allows for flexibility in managing the files that are tracked by Git, ensuring that only relevant files are included in the version control system.

### Example of `.gitignore`

```txt title=".gitignore"
## Dependencies
node_modules/

## Next.js Build Artifacts
.next/

## Environment Variables
.env
.env.local
.env.development
.env.production

## Logs
logs/
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

## Runtime Data
pids/
*.pid
*.seed
*.pid.lock

## Coverage Directory Used by Tools like Istanbul
coverage/
.nyc_output

## IDE and Editor Files
.vscode/
.idea/
*.swp
*.swo

## Operating System Files
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

## Build Outputs
build/
dist/
out/

## Temporary Files
tmp/
temp/
*.tmp
*.temp
```

This example shows a basic `.gitignore` file for a Next.js application. It excludes the `node_modules/` directory, build artifacts in the `.next/` directory, environment variable files, logs, temporary files, IDE-specific files, and other unnecessary files. Developers can customize this file to suit their project's needs by adding or removing rules as necessary.

##### NOTE

<blockquote>

There are many more files that can be added to the `.gitignore` file, depending on the specific requirements of the project. It is important to review and update the `.gitignore` file regularly to ensure that only relevant files are tracked by Git.

You can find a  list of files to ignore in Next.js projects in the official Next.js documentation or community resources. This helps maintain a clean and organized repository, making it easier for developers to collaborate and manage the project effectively.

There are also `.gitignore` templates available for Next.js projects that can be used as a starting point. These templates include common files and directories that should be ignored in Next.js applications, helping developers quickly set up their `.gitignore` file without having to manually specify each rule.

</blockquote>

<BackToTop />

## `.eslint.config.mjs`

The `.eslint.config.mjs` file is used to configure ESLint, a tool for identifying and fixing problems in JavaScript code. It allows developers to define coding standards, rules, and plugins to ensure code quality and consistency across the project. This file is essential for maintaining a clean and maintainable codebase in Next.js applications.

##### Key Features of `.eslint.config.mjs`

- **Coding Standards**: The `.eslint.config.mjs` file allows developers to define coding standards and best practices for their Next.js application. This includes rules for code formatting, variable naming conventions, and other stylistic preferences.
- **Custom Rules**: Developers can define custom ESLint rules to enforce specific coding practices or to catch common errors in the code. This helps maintain a consistent code style and reduces the likelihood of bugs in the application.
- **Plugins and Extensions**: The file can include plugins and extensions that provide additional rules or functionality for ESLint. This allows developers to leverage community-contributed rules and tools to enhance their linting process.

### Example of `.eslint.config.mjs`

```javascript
import eslint from "eslint";
export default {
  extends: ["eslint:recommended", "plugin:react/recommended"],
  parserOptions: {
    ecmaVersion: 2020,
    sourceType: "module",
    ecmaFeatures: {
      jsx: true,
    },
  },
  rules: {
    "no-unused-vars": "warn",
    "react/prop-types": "off",
    "react/react-in-jsx-scope": "off",
  },
};
```

This example shows a basic `.eslint.config.mjs` file for a Next.js application. It extends the recommended ESLint rules and includes rules for React applications. The `parserOptions` section specifies the ECMAScript version and features used in the code, while the `rules` section defines custom rules for linting. Developers can customize this file to suit their project's coding standards and requirements.

<BackToTop />
## `.prettierrc` the `.prettierrc` File is Used to Configure Prettier, a Code
formatter that helps maintain consistent code style across the project. It
allows developers to define formatting rules, such as indentation, line length,
and other stylistic preferences. This file is essential for ensuring that the
codebase remains clean and readable in Next.js applications. #### Key Features
of `.prettierrc` - **Consistent Code Formatting**: The `.prettierrc` file allows
developers to define formatting rules that ensure consistent code style across
the project. This includes rules for indentation, line breaks, spacing, and
other stylistic preferences. - **Automatic Formatting**: Prettier can
automatically format code according to the rules defined in the `.prettierrc`
file. This helps maintain a clean and organized codebase, reducing the need for
manual formatting and improving developer productivity. - **Integration with
Editors**: Many code editors and IDEs support Prettier integration, allowing
developers to format their code automatically on save or through specific
commands. This ensures that the code adheres to the defined formatting rules
without requiring additional steps. ### Example of `.prettierrc`

```json
{
  "semi": true,
  "singleQuote": true,
  "trailingComma": "es5",
  "tabWidth": 2,
  "printWidth": 80
}
```

This example shows a basic `.prettierrc` file for a Next.js application. It specifies that semicolons should be used, single quotes should be preferred over double quotes, trailing commas should be added where valid in ES5 (such as in arrays and objects), the tab width should be set to 2 spaces, and the maximum line length should be 80 characters. Developers can customize this file to suit their project's formatting preferences and requirements.

<BackToTop />
## `tsconfig.json` the `tsconfig.json` File is Used to Configure TypeScript Settings
for a Next.js application. It allows developers to define compiler options, type
checking rules, and other TypeScript-specific configurations, enabling better type
safety and development experience in Next.js projects. #### Key Features of `tsconfig.json`
- **Compiler Options**: The `tsconfig.json` file allows developers to specify compiler
options for TypeScript, such as target ECMAScript version, module resolution, and
strict type checking. This helps ensure that the TypeScript code is compiled correctly
and adheres to the desired standards. - **Type Checking Rules**: Developers can define
type checking rules in the `tsconfig.json` file to enforce strict type checking and
catch potential errors during development. This helps improve code quality and reduces
the likelihood of runtime errors. - **Project Structure**: The file can specify the
structure of the TypeScript project, including the root directory, source files,
and output directory. This helps organize the TypeScript code and ensures that it
is compiled correctly. ### Example of `tsconfig.json`
```json
{
  "compilerOptions": {
    "target": "es5",
    "module": "commonjs",
    "strict": true,
    "jsx": "preserve",
    "moduleResolution": "node",
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", ".next"]
}
```

This example shows a basic `tsconfig.json` file for a Next.js application. It specifies the target ECMAScript version as ES5, uses CommonJS modules, enables strict type checking, preserves JSX syntax, and configures module resolution. The `include` section specifies the source files to be included in the TypeScript project, while the `exclude` section excludes the `node_modules` and `.next` directories from type checking. Developers can customize this file to suit their project's TypeScript requirements and preferences.

<BackToTop />
## `next-env.d.ts` the `next-env.d.ts` File is Automatically Generated by
Next.js when using TypeScript. It contains type definitions for Next.js
features, ensuring that TypeScript can properly understand and type-check the
Next.js code. This file is essential for enabling TypeScript support in a
Next.js application and providing accurate type information for Next.js
components and APIs. #### Key Features of `next-env.d.ts` - **Type
Definitions**: The `next-env.d.ts` file includes type definitions for various
Next.js features, such as pages, components, and APIs. This allows TypeScript to
provide accurate type checking and autocompletion for Next.js code, improving
the development experience. - **Automatic Generation**: The file is
automatically generated by Next.js when using TypeScript, ensuring that it is
always up-to-date with the latest Next.js features and APIs. Developers do not
need to manually create or update this file, as it is managed by the Next.js
framework. - **Type Safety**: By including type definitions for Next.js
features, the `next-env.d.ts` file helps ensure type safety in the application.
This reduces the likelihood of runtime errors and improves code quality by
catching potential issues during development.

### Example of `next-env.d.ts`

```typescript
/// <reference types="next" />
/// <reference types="next/image-types/global" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.
```

This example shows a basic `next-env.d.ts` file for a Next.js application. It includes references to the Next.js types, ensuring that TypeScript can properly understand and type-check the Next.js code. Developers do not need to modify this file, as it is automatically generated and managed by Next.js.

<BackToTop />

## `README.md`

The `README.md` file is an important part of any Next.js application, serving as the primary documentation for the project. It provides essential information about the application, including setup instructions, usage guidelines, and other relevant details. This file is crucial for helping developers understand the purpose and functionality of the project.

##### Key Features of `README.md`

- **Project Overview**: The `README.md` file typically includes a brief overview of the project, explaining its purpose, features, and functionality. This helps developers quickly understand what the application does and how it can be used.
- **Setup Instructions**: The file provides detailed instructions on how to set up the project, including prerequisites, installation steps, and configuration options. This is essential for new developers joining the project or for users who want to run the application locally.
- **Usage Guidelines**: The `README.md` file often includes examples of how to use the application, such as API endpoints, command-line commands, or user interface interactions. This helps users understand how to interact with the application and utilize its features effectively.
- **Contribution Guidelines**: Many `README.md` files include guidelines for contributing to the project, such as coding standards, pull request processes, and issue reporting. This encourages collaboration and helps maintain a consistent development workflow.

## The `src/` and `public/` Directories

The `src/` and `public/` directories are essential components of a Next.js application, each serving distinct purposes in the project structure. Understanding the roles of these directories is crucial for organizing the application code and managing static assets effectively.

### Key Subdirectories in `src/`

- **`components/`**: This directory contains reusable React components that can be used throughout the application. Components are the building blocks of a Next.js application, allowing developers to create modular and reusable UI elements. Organizing components in this directory helps maintain a clear separation of concerns and promotes code reusability.
- **`app/`**: This directory contains the pages of the Next.js application. Each file in this directory corresponds to a route in the application, allowing developers to define the structure and behavior of different pages. Next.js automatically handles routing based on the file structure in this directory, making it easy to create dynamic and static routes.
- **`styles/`**: This directory contains global styles and CSS modules for the application. It allows developers to define the visual appearance of the application, including typography, colors, and layout. Organizing styles in this directory helps maintain a consistent design language across the application and makes it easier to manage styles as the application grows.
- **`utils/`**: This directory contains utility functions and helper modules that can be used throughout the application. Utility functions are reusable pieces of code that perform common tasks, such as data formatting, API calls, and other operations. Organizing utility functions in this directory helps keep the codebase clean and modular, making it easier to maintain and test.

##### Key Features of the `public/` Directory

- **Static Asset Serving**: Files in the `public/` directory can be accessed directly via the URL path, allowing developers to serve static assets without additional processing. For example, if you have an image named `logo.png` in the `public/` directory, it can be accessed via the URL `/logo.png`. This makes it easy to serve images, fonts, and other static files without additional configuration.
- **No Processing Required**: Files in the `public/` directory do not require any processing by Next.js. They are served as-is, which means they can be used directly in the application without any additional steps. This is particularly useful for static assets that do not require dynamic processing or transformation.
- **Organized Structure**: Developers can organize static assets in subdirectories within the `public/` directory to maintain a clean and organized structure. For example, you can create a `public/images/` directory to store all images, a `public/fonts/` directory for fonts, and so on. This helps keep the project organized and makes it easier to manage static assets as the application grows.
