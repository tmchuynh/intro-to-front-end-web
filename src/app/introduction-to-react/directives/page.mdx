import BackToTop from "@/components/BackToTop";

# Directives

## Table of Contents

## Overview

Directives in React are special instructions that can be used to modify the behavior of components or elements. They allow you to apply conditional rendering, loops, and other logic directly within your JSX code.

Directives are not a built-in feature of React like in some other frameworks (e.g., Angular), but you can achieve similar functionality using JavaScript expressions, conditional rendering, and higher-order components.

## "use client" Directive

The `"use client"` directive is a special instruction in React that indicates that a component should be rendered on the client side. This is particularly useful in server-side rendering (SSR) scenarios where you want to ensure that certain components are only executed in the browser.

```javascript
"use client";
import React from "react";
function ClientOnlyComponent() {
  return <div>This component is rendered on the client side only.</div>;
}
export default ClientOnlyComponent;
```

### How to Use "use client"

To use the `"use client"` directive, simply add it at the top of your component file. This tells React that the component should be treated as a client-side component, and it will be rendered in the browser rather than on the server.

![Client Component Example](https://react.dev/_next/image?url=%2Fimages%2Fdocs%2Fdiagrams%2Fuse_client_module_dependency.png&w=1200&q=75)

During render, React will ensure that the component is executed in the browser environment, allowing you to use browser-specific features and APIs.

![Client Component Execution](https://react.dev/_next/image?url=%2Fimages%2Fdocs%2Fdiagrams%2Fuse_client_render_tree.png&w=1080&q=75)

During development, you can use the `"use client"` directive to ensure that certain components are only executed in the browser, allowing you to take advantage of client-side features like local storage, browser APIs, and user interactions.

```javascript
"use client";
import React, { useState } from "react";
function ChangeBgColor() {
  const [color, setColor] = useState("white");

  const changeColor = () => {
    setColor(color === "white" ? "lightblue" : "white");
  };

  return (
    <div style={{ backgroundColor: color, padding: "20px" }}>
      <h1>Click the button to change background color</h1>
      <button onClick={changeColor}>Change Color</button>
    </div>
  );
}
export default ChangeBgColor;
```

This example demonstrates a simple interactive component that uses the `"use client"` directive to ensure it runs in the browser. The component maintains its own state and updates the count when the button is clicked.

### When to Use "use client"

The `"use client"` directive is particularly useful in scenarios where you need to:

- Implement client-side interactivity, such as handling user input, animations, or dynamic updates.
- Access browser-specific APIs, such as the DOM, local storage, or window events.
- Manage client-side state that does not need to be shared with the server or other components.

### Advantaged and Disadvantages of "use client"

| Aspect           | Advantages                                                                                                                    | Disadvantages                                                                                                                                      |
| ---------------- | ----------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| Performance      | Faster client-side interactions, as components are rendered in the browser.                                                   | Slower initial page loads compared to server-side rendering, as the browser has to download and execute JavaScript before rendering the component. |
| SEO              | Allows for dynamic content updates without requiring a full page reload, which can improve user experience.                   | Components rendered on the client side may not be indexed by search engines, which can affect SEO performance.                                     |
| State Management | Enables the use of client-side state management libraries (e.g., Redux, Zustand) to handle data and interactions effectively. | Client-side components may need to manage their own state, which can lead to increased complexity in larger applications.                          |

### Caveats

When using the `"use client"` directive, be aware of the following:

- **Performance**: Client-side rendering can lead to slower initial page loads compared to server-side rendering, as the browser has to download and execute JavaScript before rendering the component.
- **SEO**: Components rendered on the client side may not be indexed by search engines, which can affect SEO performance. If SEO is a concern, consider using server-side rendering for critical components.
- **State Management**: Client-side components may need to manage their own state or rely on client-side state management libraries (e.g., Redux, Zustand) to handle data and interactions effectively.

### Security Considerations When Using "use client"

When using the `"use client"` directive, it's important to consider security implications, especially when handling sensitive data or user input. Ensure that any data processed on the client side is properly validated and sanitized to prevent security vulnerabilities such as cross-site scripting (XSS) or data leaks.

<BackToTop />

## "use server" Directive

The `"use server"` directive is used to indicate that a component should be rendered on the server side. This is useful for components that need to fetch data or perform operations that are better suited for server-side execution.

```javascript
"use server";
import React from "react";
function ServerOnlyComponent() {
  return <div>This component is rendered on the server side only.</div>;
}
export default ServerOnlyComponent;
```

### How to Use "use server"

To use the `"use server"` directive, add it at the top of your component file. This tells React that the component should be executed on the server, allowing you to perform server-side operations such as data fetching or processing.

```javascript
"use server";
import React from "react";
async function fetchData() {
  const response = await fetch("https://api.example.com/data");
  return response.json();
}
function ServerComponent() {
  const data = fetchData();
  return (
    <div>
      <h1>Data from Server:</h1>
      <pre>{JSON.stringify(data, null, 2)}</pre>
    </div>
  );
}
export default ServerComponent;
```

This example demonstrates a server-side component that fetches data from an API and renders it. The `"use server"` directive ensures that the component is executed on the server, allowing you to perform data fetching without relying on client-side JavaScript.

### When to Use "use server"

The `"use server"` directive is particularly useful in scenarios where you need to:

- Fetch data from APIs or databases that are better suited for server-side execution.
- Perform server-side operations that require access to server resources or environment variables.
- Render components that do not require client-side interactivity or state management.

### Advantages and Disadvantages of "use server"

| Aspect           | Advantages                                                                                             | Disadvantages                                                                                                                                      |
| ---------------- | ------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| Performance      | Faster initial page loads, as the server can pre-render components and send HTML to the client.        | Slower client-side interactions, as components may require a full page reload to update or fetch new data.                                         |
| SEO              | Components rendered on the server can be indexed by search engines, improving SEO performance.         | Limited interactivity, as server-side components may not respond to user actions without a full page reload.                                       |
| State Management | Allows for server-side state management, which can be useful for data that does not change frequently. | Server-side components may not be able to handle client-side state management effectively, leading to increased complexity in larger applications. |

### Caveats

When using the `"use server"` directive, be aware of the following:

- **Performance**: Server-side rendering can lead to faster initial page loads, but it may result in slower client-side interactions if components require frequent updates or user interactions.
- **SEO**: Components rendered on the server can be indexed by search engines, improving SEO performance. However, if components require client-side interactivity, you may need to implement additional logic to handle user actions without requiring a full page reload.
- **State Management**: Server-side components may not be able to handle client-side state management effectively, leading to increased complexity in larger applications. Consider using client-side state management libraries (e.g., Redux, Zustand) for components that require dynamic updates or interactivity.

### Security Considerations When Using "use server"

When using the `"use server"` directive, it's important to consider security implications, especially when handling sensitive data or user input. Ensure that any data fetched or processed on the server is properly sanitized and validated to prevent security vulnerabilities such as cross-site scripting (XSS) or SQL injection.

<BackToTop />
